2017-05-05 14:22:28 DEBUG   10.10.0.249     --- Access to /dolibarr/index.php showing the login form and exit
2017-05-05 14:22:28 DEBUG   10.10.0.249     sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:22:28 DEBUG   10.10.0.249     --- End access to /dolibarr/index.php
2017-05-05 14:22:30 DEBUG   10.10.0.249     --- Access to /dolibarr/theme/eldy/style.css.php
2017-05-05 14:22:30 DEBUG   10.10.0.249     sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:22:30 DEBUG   10.10.0.249     Menubase::menuLoad mymainmenu= myleftmenu= type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:22:30 DEBUG   10.10.0.249     sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:22:30 DEBUG   10.10.0.249     --- End access to /dolibarr/theme/eldy/style.css.php
2017-05-05 14:22:31 DEBUG   10.10.0.249     --- Access to /dolibarr/core/js/select2_locale.js.php
2017-05-05 14:22:31 DEBUG   10.10.0.249     sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:22:31 DEBUG   10.10.0.249     --- End access to /dolibarr/core/js/select2_locale.js.php
2017-05-05 14:22:32 DEBUG   10.10.0.249     --- Access to /dolibarr/core/js/lib_head.js.php
2017-05-05 14:22:32 DEBUG   10.10.0.249     sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:22:32 DEBUG   10.10.0.249     --- End access to /dolibarr/core/js/lib_head.js.php
2017-05-05 14:22:34 DEBUG   10.10.0.249     --- Access to /dolibarr/core/js/datepicker.js.php
2017-05-05 14:22:34 DEBUG   10.10.0.249     sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:22:34 DEBUG   10.10.0.249     --- End access to /dolibarr/core/js/datepicker.js.php
2017-05-05 14:22:57 DEBUG   10.10.0.249     checkLoginPassEntity usertotest=apperture entitytotest=1 authmode=dolibarr
2017-05-05 14:22:57 DEBUG   10.10.0.249     functions_dolibarr::check_user_password_dolibarr usertotest=apperture passwordtotest=****** entitytotest=1
2017-05-05 14:22:57 DEBUG   10.10.0.249     sql=SELECT rowid, login, entity, pass, pass_crypted FROM llx_user WHERE (login = 'apperture') AND entity IN (0,1) AND statut = 1
2017-05-05 14:22:58 DEBUG   10.10.0.249     functions_dolibarr::check_user_password_dolibarr Authentification ok - md5 of pass is ok
2017-05-05 14:22:58 DEBUG   10.10.0.249     User::fetch
2017-05-05 14:22:58 DEBUG   10.10.0.249     sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IN (0, 1) AND u.login = 'apperture'
2017-05-05 14:22:58 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:22:58 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:22:58 DEBUG   10.10.0.249     sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:22:58 DEBUG   10.10.0.249     This is a new started user session. _SESSION['dol_login']=apperture Session id=9rv5i4hkpuniq4fn4bdg16kop3
2017-05-05 14:22:58 DEBUG   10.10.0.249     BEGIN Transaction
2017-05-05 14:22:58 DEBUG   10.10.0.249      User::update_last_login_date user->id=1 UPDATE llx_user SET datepreviouslogin = datelastlogin, datelastlogin = '20170505142258', tms = tms WHERE rowid = 1
2017-05-05 14:22:58 DEBUG   10.10.0.249      sql=UPDATE llx_user SET datepreviouslogin = datelastlogin, datelastlogin = '20170505142258', tms = tms WHERE rowid = 1
2017-05-05 14:22:58 DEBUG   10.10.0.249      Interfaces::run_triggers action=USER_LOGIN Triggers for file 'interface_20_modPaypal_PaypalWorkflow.class.php' need module to be enabled
2017-05-05 14:22:58 DEBUG   10.10.0.249      Interfaces::run_triggers action=USER_LOGIN Launch runTrigger for file 'interface_20_all_Logevents.class.php'
2017-05-05 14:22:58 DEBUG   10.10.0.249      Interfaces::run_triggers action=USER_LOGIN Launch runTrigger for file 'interface_20_modWorkflow_WorkflowManager.class.php'
2017-05-05 14:22:58 DEBUG   10.10.0.249      Interfaces::run_triggers action=USER_LOGIN Launch runTrigger for file 'interface_50_modAgenda_ActionsAuto.class.php'
2017-05-05 14:22:58 DEBUG   10.10.0.249      Interfaces::run_triggers action=USER_LOGIN Launch runTrigger for file 'interface_50_modLdap_Ldapsynchro.class.php'
2017-05-05 14:22:58 DEBUG   10.10.0.249      Interfaces::run_triggers action=USER_LOGIN Launch runTrigger for file 'interface_50_modMailmanspip_Mailmanspipsynchro.class.php'
2017-05-05 14:22:58 DEBUG   10.10.0.249      Interfaces::run_triggers action=USER_LOGIN Launch runTrigger for file 'interface_50_modNotification_Notification.class.php'
2017-05-05 14:22:58 DEBUG   10.10.0.249      Trigger 'Notification' for action 'USER_LOGIN' launched by C:\dolibarr\www\dolibarr\htdocs\core\triggers\interface_50_modNotification_Notification.class.php. id=1
2017-05-05 14:22:58 DEBUG   10.10.0.249      Notify::send notifcode=USER_LOGIN, object=1
2017-05-05 14:22:58 DEBUG   10.10.0.249      sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:22:58 DEBUG   10.10.0.249     COMMIT Transaction
2017-05-05 14:22:58 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:22:58 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:22:58 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:22:58 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:22:58 DEBUG   10.10.0.249     --- Access to /dolibarr/index.php
2017-05-05 14:22:58 DEBUG   10.10.0.249     Menubase::menuLoad mymainmenu=home myleftmenu= type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:22:58 DEBUG   10.10.0.249     sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:22:59 DEBUG   10.10.0.249     sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:22:59 DEBUG   10.10.0.249     InfoBox::listBoxes get default box list for mode=activated userid=
2017-05-05 14:22:59 DEBUG   10.10.0.249     sql=SELECT b.rowid, b.position, b.box_order, b.fk_user, d.rowid as box_id, d.file, d.note, d.tms FROM llx_boxes as b, llx_boxes_def as d WHERE b.box_id = d.rowid AND b.entity IN (0,1) AND b.position = 0 AND b.fk_user = 0 ORDER BY b.box_order
2017-05-05 14:22:59 DEBUG   10.10.0.249     box_clients::loadBox
2017-05-05 14:22:59 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.code_client, s.client, s.code_fournisseur, s.fournisseur, s.logo, s.datec, s.tms, s.status FROM llx_societe as s WHERE s.client IN (1, 3) AND s.entity IN (1) ORDER BY s.tms DESC LIMIT 5
2017-05-05 14:22:59 DEBUG   10.10.0.249     box_clients::showBox
2017-05-05 14:22:59 DEBUG   10.10.0.249     box_comptes::loadBox
2017-05-05 14:22:59 DEBUG   10.10.0.249     sql=SELECT rowid, ref, label, bank, number, courant, clos, rappro, url, code_banque, code_guichet, cle_rib, bic, iban_prefix as iban, domiciliation, proprio, owner_address, account_number, currency_code, min_allowed, min_desired, comment FROM llx_bank_account WHERE entity = 1 AND clos = 0 ORDER BY label LIMIT 5
2017-05-05 14:22:59 DEBUG   10.10.0.249     sql=SELECT sum(amount) as amount FROM llx_bank WHERE fk_account = 1
2017-05-05 14:23:00 DEBUG   10.10.0.249     Translate::loadCacheCurrencies
2017-05-05 14:23:00 DEBUG   10.10.0.249     sql=SELECT code_iso, label, unicode FROM llx_c_currencies WHERE active = 1 AND code_iso = 'EUR'
2017-05-05 14:23:00 DEBUG   10.10.0.249     box_comptes::showBox
2017-05-05 14:23:00 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, c.rowid, c.ref, c.statut as contract_status, cd.rowid as cdid, cd.tms as datem, cd.statut, cd.label, cd.description, cd.product_type as type, p.rowid as product_id, p.ref as product_ref FROM (llx_societe as s, llx_contrat as c, llx_contratdet as cd LEFT JOIN llx_product as p ON cd.fk_product = p.rowid) WHERE c.entity = 1 AND s.rowid = c.fk_soc AND c.rowid = cd.fk_contrat ORDER BY c.tms DESC LIMIT 5
2017-05-05 14:23:00 DEBUG   10.10.0.249     box_services_contracts::showBox
2017-05-05 14:23:00 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.code_client, s.logo, c.ref, c.tms, c.rowid, c.date_commande, c.ref_client, c.fk_statut, c.fk_user_valid, c.facture, c.total_ht, c.tva as total_tva, c.total_ttc FROM llx_societe as s, llx_commande as c WHERE c.fk_soc = s.rowid AND c.entity = 1 ORDER BY c.tms DESC, c.ref DESC  LIMIT 5
2017-05-05 14:23:00 DEBUG   10.10.0.249     box_commandes::showBox
2017-05-05 14:23:00 DEBUG   10.10.0.249     CommandeStats::getAmountByMonthWithPrevYear cache file c:/dolibarr/dolibarr_documents/users/temp/CommandeStats_getAmountByMonthWithPrevYear_customer_es_ES_entity.1_user1.cache is not found or older than now - cachedelay (1493994180 - 86400) so we can't use it.
2017-05-05 14:23:00 DEBUG   10.10.0.249     CommandeStats::_getAmountByMonth
2017-05-05 14:23:00 DEBUG   10.10.0.249     sql=SELECT date_format(c.date_commande,'%m') as dm, SUM(c.total_ht) FROM llx_commande as c WHERE c.date_commande BETWEEN '20160101000000' AND '20161231235959' AND  c.fk_statut > 0 AND c.entity = 1 GROUP BY dm ORDER BY dm DESC
2017-05-05 14:23:00 DEBUG   10.10.0.249     CommandeStats::_getAmountByMonth
2017-05-05 14:23:00 DEBUG   10.10.0.249     sql=SELECT date_format(c.date_commande,'%m') as dm, SUM(c.total_ht) FROM llx_commande as c WHERE c.date_commande BETWEEN '20170101000000' AND '20171231235959' AND  c.fk_statut > 0 AND c.entity = 1 GROUP BY dm ORDER BY dm DESC
2017-05-05 14:23:00 DEBUG   10.10.0.249     CommandeStats::getAmountByMonthWithPrevYear save cache file c:/dolibarr/dolibarr_documents/users/temp/CommandeStats_getAmountByMonthWithPrevYear_customer_es_ES_entity.1_user1.cache onto disk.
2017-05-05 14:23:00 DEBUG   10.10.0.249     functions.lib::dol_mkdir: dir=c:/dolibarr/dolibarr_documents/users/temp
2017-05-05 14:23:00 DEBUG   10.10.0.249     functions.lib::dol_mkdir: Directory 'c:/dolibarr/dolibarr_documents/users' does not exists or is outside open_basedir PHP setting.
2017-05-05 14:23:00 DEBUG   10.10.0.249     functions.lib::dol_mkdir: Directory 'c:/dolibarr/dolibarr_documents/users' created
2017-05-05 14:23:00 DEBUG   10.10.0.249     functions.lib::dol_mkdir: Directory 'c:/dolibarr/dolibarr_documents/users/temp' does not exists or is outside open_basedir PHP setting.
2017-05-05 14:23:00 DEBUG   10.10.0.249     functions.lib::dol_mkdir: Directory 'c:/dolibarr/dolibarr_documents/users/temp' created
2017-05-05 14:23:00 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=
2017-05-05 14:23:00 DEBUG   10.10.0.249     box_graph_orders_permonth::showBox
2017-05-05 14:23:00 DEBUG   10.10.0.249     FactureStats::getAmountByMonthWithPrevYear cache file c:/dolibarr/dolibarr_documents/users/temp/FactureStats_getAmountByMonthWithPrevYear_supplier_es_ES_entity.1_user1.cache is not found or older than now - cachedelay (1493994180 - 86400) so we can't use it.
2017-05-05 14:23:00 DEBUG   10.10.0.249     FactureStats::_getAmountByMonth
2017-05-05 14:23:00 DEBUG   10.10.0.249     sql=SELECT date_format(datef,'%m') as dm, SUM(f.total_ht) FROM llx_facture_fourn as f WHERE f.datef BETWEEN '20160101000000' AND '20161231235959' AND  f.fk_statut > 0 AND f.entity = 1 AND f.type IN (0,1,2,3) GROUP BY dm ORDER BY dm DESC
2017-05-05 14:23:00 DEBUG   10.10.0.249     FactureStats::_getAmountByMonth
2017-05-05 14:23:00 DEBUG   10.10.0.249     sql=SELECT date_format(datef,'%m') as dm, SUM(f.total_ht) FROM llx_facture_fourn as f WHERE f.datef BETWEEN '20170101000000' AND '20171231235959' AND  f.fk_statut > 0 AND f.entity = 1 AND f.type IN (0,1,2,3) GROUP BY dm ORDER BY dm DESC
2017-05-05 14:23:00 DEBUG   10.10.0.249     FactureStats::getAmountByMonthWithPrevYear save cache file c:/dolibarr/dolibarr_documents/users/temp/FactureStats_getAmountByMonthWithPrevYear_supplier_es_ES_entity.1_user1.cache onto disk.
2017-05-05 14:23:00 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=
2017-05-05 14:23:00 DEBUG   10.10.0.249     box_graph_invoices_supplier_permonth::showBox
2017-05-05 14:23:00 DEBUG   10.10.0.249     CommandeStats::getAmountByMonthWithPrevYear cache file c:/dolibarr/dolibarr_documents/users/temp/CommandeStats_getAmountByMonthWithPrevYear_supplier_es_ES_entity.1_user1.cache is not found or older than now - cachedelay (1493994180 - 86400) so we can't use it.
2017-05-05 14:23:00 DEBUG   10.10.0.249     CommandeStats::_getAmountByMonth
2017-05-05 14:23:00 DEBUG   10.10.0.249     sql=SELECT date_format(c.date_commande,'%m') as dm, SUM(c.total_ht) FROM llx_commande_fournisseur as c WHERE c.date_commande BETWEEN '20160101000000' AND '20161231235959' AND  c.fk_statut > 2 AND c.entity = 1 GROUP BY dm ORDER BY dm DESC
2017-05-05 14:23:00 DEBUG   10.10.0.249     CommandeStats::_getAmountByMonth
2017-05-05 14:23:00 DEBUG   10.10.0.249     sql=SELECT date_format(c.date_commande,'%m') as dm, SUM(c.total_ht) FROM llx_commande_fournisseur as c WHERE c.date_commande BETWEEN '20170101000000' AND '20171231235959' AND  c.fk_statut > 2 AND c.entity = 1 GROUP BY dm ORDER BY dm DESC
2017-05-05 14:23:00 DEBUG   10.10.0.249     CommandeStats::getAmountByMonthWithPrevYear save cache file c:/dolibarr/dolibarr_documents/users/temp/CommandeStats_getAmountByMonthWithPrevYear_supplier_es_ES_entity.1_user1.cache onto disk.
2017-05-05 14:23:00 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=
2017-05-05 14:23:00 DEBUG   10.10.0.249     box_graph_orders_supplier_permonth::showBox
2017-05-05 14:23:00 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.datec, s.tms, s.status, s.code_fournisseur, s.logo FROM llx_societe as s WHERE s.fournisseur = 1 AND s.entity IN (1) ORDER BY s.tms DESC  LIMIT 5
2017-05-05 14:23:00 DEBUG   10.10.0.249     box_fournisseurs::showBox
2017-05-05 14:23:00 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, f.rowid as facid, f.ref, f.ref_supplier, f.date_lim_reglement as datelimite, f.amount, f.datef as df, f.total_ht as total_ht, f.tva as total_tva, f.total_ttc, f.paye, f.fk_statut, f.type FROM llx_societe as s,llx_facture_fourn as f WHERE f.fk_soc = s.rowid AND f.entity = 1 AND f.paye=0 AND fk_statut = 1 ORDER BY datelimite DESC, f.ref_supplier DESC  LIMIT 5
2017-05-05 14:23:00 DEBUG   10.10.0.249     box_factures_fourn_imp::showBox
2017-05-05 14:23:00 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.code_fournisseur, s.logo, f.rowid as facid, f.ref, f.ref_supplier, f.total_ht, f.total_tva, f.total_ttc, f.paye, f.fk_statut, f.datef as df, f.datec as datec, f.date_lim_reglement as datelimite, f.tms, f.type FROM llx_societe as s, llx_facture_fourn as f WHERE f.fk_soc = s.rowid AND f.entity = 1 ORDER BY f.tms DESC, f.ref DESC  LIMIT 5
2017-05-05 14:23:00 DEBUG   10.10.0.249     FactureFournisseur::fetch
2017-05-05 14:23:00 DEBUG   10.10.0.249     sql=SELECT t.rowid, t.ref, t.ref_supplier, t.entity, t.type, t.fk_soc, t.datec, t.datef, t.tms, t.libelle, t.paye, t.amount, t.remise, t.close_code, t.close_note, t.tva, t.localtax1, t.localtax2, t.total, t.total_ht, t.total_tva, t.total_ttc, t.fk_statut, t.fk_user_author, t.fk_user_valid, t.fk_facture_source, t.fk_projet, t.fk_cond_reglement, t.fk_account, t.fk_mode_reglement, t.date_lim_reglement, t.note_private, t.note_public, t.model_pdf, t.import_key, t.extraparams, cr.code as cond_reglement_code, cr.libelle as cond_reglement_libelle, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, s.nom as socnom, s.rowid as socid, t.fk_incoterms, t.location_incoterms, i.libelle as libelle_incoterms, t.fk_multicurrency, t.multicurrency_code, t.multicurrency_tx, t.multicurrency_total_ht, t.multicurrency_total_tva, t.multicurrency_total_ttc FROM llx_facture_fourn as t LEFT JOIN llx_societe as s ON (t.fk_soc = s.rowid) LEFT JOIN llx_c_payment_term as cr ON (t.fk_cond_reglement = cr.rowid) LEFT JOIN llx_c_paiement as p ON (t.fk_mode_reglement = p.id) LEFT JOIN llx_c_incoterms as i ON t.fk_incoterms = i.rowid WHERE t.rowid=1
2017-05-05 14:23:00 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:23:00 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture_fourn' ORDER BY pos
2017-05-05 14:23:00 DEBUG   10.10.0.249     FactureFournisseur::fetch_lines
2017-05-05 14:23:00 DEBUG   10.10.0.249     sql=SELECT f.rowid, f.ref as ref_supplier, f.description, f.pu_ht, f.pu_ttc, f.qty, f.remise_percent, f.tva_tx, f.localtax1_tx, f.localtax2_tx, f.total_localtax1, f.total_localtax2 , f.total_ht, f.tva as total_tva, f.total_ttc, f.fk_product, f.product_type, f.info_bits, f.rang, f.special_code, f.fk_parent_line, f.fk_unit, p.rowid as product_id, p.ref as product_ref, p.label as label, p.description as product_desc, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_subprice, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc FROM llx_facture_fourn_det as f LEFT JOIN llx_product as p ON f.fk_product = p.rowid WHERE fk_facture_fourn=1 ORDER BY f.rang, f.rowid
2017-05-05 14:23:00 DEBUG   10.10.0.249     FactureFournisseur::getSommePaiement
2017-05-05 14:23:00 DEBUG   10.10.0.249     sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiementfourn_facturefourn WHERE fk_facturefourn = 1
2017-05-05 14:23:00 DEBUG   10.10.0.249     box_factures_fourn::showBox
2017-05-05 14:23:00 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.code_client, s.code_fournisseur, s.logo, c.ref, c.tms, c.rowid, c.date_commande, c.total_ht, c.tva as total_tva, c.total_ttc, c.fk_statut FROM llx_societe as s, llx_commande_fournisseur as c WHERE c.fk_soc = s.rowid AND c.entity = 1 ORDER BY c.tms DESC, c.ref DESC  LIMIT 5
2017-05-05 14:23:00 DEBUG   10.10.0.249     box_supplier_orders::showBox
2017-05-05 14:23:00 DEBUG   10.10.0.249     Box_actions::loadBox
2017-05-05 14:23:00 DEBUG   10.10.0.249     sql=SELECT a.id, a.label, a.datep as dp, a.percent as percentage, ta.code, ta.libelle as type_label, s.nom as name, s.rowid as socid, s.code_client FROM (llx_c_actioncomm AS ta, llx_actioncomm AS a) LEFT JOIN llx_societe as s ON a.fk_soc = s.rowid WHERE a.fk_action = ta.id AND a.entity = 1 AND a.percent >= 0 AND a.percent < 100 ORDER BY a.datec DESC LIMIT 5
2017-05-05 14:23:00 DEBUG   10.10.0.249     box_actions::showBox
2017-05-05 14:23:00 DEBUG   10.10.0.249     FactureStats::getAmountByMonthWithPrevYear cache file c:/dolibarr/dolibarr_documents/users/temp/FactureStats_getAmountByMonthWithPrevYear_customer_es_ES_entity.1_user1.cache is not found or older than now - cachedelay (1493994180 - 86400) so we can't use it.
2017-05-05 14:23:00 DEBUG   10.10.0.249     FactureStats::_getAmountByMonth
2017-05-05 14:23:00 DEBUG   10.10.0.249     sql=SELECT date_format(datef,'%m') as dm, SUM(f.total) FROM llx_facture as f WHERE f.datef BETWEEN '20160101000000' AND '20161231235959' AND  f.fk_statut > 0 AND f.entity = 1 AND (f.fk_statut <> 3 OR f.close_code <> 'replaced') AND f.type IN (0,1,2,3) GROUP BY dm ORDER BY dm DESC
2017-05-05 14:23:00 DEBUG   10.10.0.249     FactureStats::_getAmountByMonth
2017-05-05 14:23:00 DEBUG   10.10.0.249     sql=SELECT date_format(datef,'%m') as dm, SUM(f.total) FROM llx_facture as f WHERE f.datef BETWEEN '20170101000000' AND '20171231235959' AND  f.fk_statut > 0 AND f.entity = 1 AND (f.fk_statut <> 3 OR f.close_code <> 'replaced') AND f.type IN (0,1,2,3) GROUP BY dm ORDER BY dm DESC
2017-05-05 14:23:00 DEBUG   10.10.0.249     FactureStats::getAmountByMonthWithPrevYear save cache file c:/dolibarr/dolibarr_documents/users/temp/FactureStats_getAmountByMonthWithPrevYear_customer_es_ES_entity.1_user1.cache onto disk.
2017-05-05 14:23:00 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=
2017-05-05 14:23:00 DEBUG   10.10.0.249     box_graph_invoices_permonth::showBox
2017-05-05 14:23:00 DEBUG   10.10.0.249     ModeleBoxes::showBox
2017-05-05 14:23:00 DEBUG   10.10.0.249     sql=SELECT f.rowid as facid, f.facnumber, f.type, f.total as total_ht, f.tva as total_tva, f.total_ttc, f.datef as df, f.paye, f.fk_statut, f.datec, f.tms, s.nom as name, s.rowid as socid, s.code_client, f.date_lim_reglement as datelimite FROM (llx_societe as s,llx_facture as f) WHERE f.fk_soc = s.rowid AND f.entity = 1 ORDER BY f.tms DESC, f.facnumber DESC  LIMIT 5
2017-05-05 14:23:00 DEBUG   10.10.0.249     box_factures::showBox
2017-05-05 14:23:00 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.code_client, s.logo, f.facnumber, f.date_lim_reglement as datelimite, f.type, f.amount, f.datef as df, f.total as total_ht, f.tva as total_tva, f.total_ttc, f.paye, f.fk_statut, f.rowid as facid, sum(pf.amount) as am FROM llx_societe as s,llx_facture as f LEFT JOIN llx_paiement_facture as pf ON f.rowid=pf.fk_facture  WHERE f.fk_soc = s.rowid AND f.entity = 1 AND f.paye = 0 AND fk_statut = 1 GROUP BY s.nom, s.rowid, s.code_client, s.logo, f.facnumber, f.date_lim_reglement, f.type, f.amount, f.datef, f.total, f.tva, f.total_ttc, f.paye, f.fk_statut, f.rowid ORDER BY datelimite ASC, f.facnumber ASC  LIMIT 5
2017-05-05 14:23:00 DEBUG   10.10.0.249     box_factures_imp::showBox
2017-05-05 14:23:00 DEBUG   10.10.0.249     box_prospect::loadBox
2017-05-05 14:23:00 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.code_client, s.client, s.code_fournisseur, s.fournisseur, s.logo, s.fk_stcomm, s.datec, s.tms, s.status FROM llx_societe as s WHERE s.client IN (2, 3) AND s.entity IN (1) ORDER BY s.tms DESC LIMIT 5
2017-05-05 14:23:00 DEBUG   10.10.0.249     box_prospect::showBox
2017-05-05 14:23:00 DEBUG   10.10.0.249     sql=SELECT sp.rowid as id, sp.lastname, sp.firstname, sp.civility as civility_id, sp.datec, sp.tms, sp.fk_soc, sp.statut as status, sp.address, sp.zip, sp.town, sp.phone, sp.phone_perso, sp.phone_mobile, s.nom as socname, s.name_alias, s.client, s.fournisseur, s.code_client, s.code_fournisseur FROM llx_socpeople as sp LEFT JOIN llx_societe as s ON sp.fk_soc = s.rowid WHERE sp.entity IN (1) ORDER BY sp.tms DESC LIMIT 5
2017-05-05 14:23:00 DEBUG   10.10.0.249     box_contacts::showBox
2017-05-05 14:23:01 DEBUG   10.10.0.249     FactureStats::getAllByProductEntry cache file c:/dolibarr/dolibarr_documents/users/temp/FactureStats_getAllByProductEntry_customer_es_ES_entity.1_user1.cache is not found or older than now - cachedelay (1493994181 - 86400) so we can't use it.
2017-05-05 14:23:01 DEBUG   10.10.0.249     FactureStats::_getAllByProduct
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT product.ref, COUNT(product.ref) as nb, SUM(tl.total_ht) as total, AVG(tl.total_ht) as avg FROM llx_facture as f, llx_facturedet as tl, llx_product as product WHERE  f.fk_statut > 0 AND f.entity = 1 AND (f.fk_statut <> 3 OR f.close_code <> 'replaced') AND f.type IN (0,1,2,3) AND f.rowid = tl.fk_facture AND tl.fk_product = product.rowid AND f.datef BETWEEN '20170101000000' AND '20171231235959' GROUP BY product.ref ORDER BY nb DESC
2017-05-05 14:23:01 DEBUG   10.10.0.249     FactureStats::getAllByProductEntry save cache file c:/dolibarr/dolibarr_documents/users/temp/FactureStats_getAllByProductEntry_customer_es_ES_entity.1_user1.cache onto disk.
2017-05-05 14:23:01 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=pie
2017-05-05 14:23:01 DEBUG   10.10.0.249     PropaleStats::getAllByProductEntry cache file c:/dolibarr/dolibarr_documents/users/temp/PropaleStats_getAllByProductEntry_es_ES_entity.1_user1.cache is not found or older than now - cachedelay (1493994181 - 86400) so we can't use it.
2017-05-05 14:23:01 DEBUG   10.10.0.249     PropaleStats::_getAllByProduct
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT product.ref, COUNT(product.ref) as nb, SUM(tl.total_ht) as total, AVG(tl.total_ht) as avg FROM llx_propal as p, llx_propaldet as tl, llx_product as product WHERE  p.fk_statut > 0 AND p.entity IN (1) AND p.rowid = tl.fk_propal AND tl.fk_product = product.rowid AND p.datep BETWEEN '20170101000000' AND '20171231235959' GROUP BY product.ref ORDER BY nb DESC
2017-05-05 14:23:01 DEBUG   10.10.0.249     PropaleStats::getAllByProductEntry save cache file c:/dolibarr/dolibarr_documents/users/temp/PropaleStats_getAllByProductEntry_es_ES_entity.1_user1.cache onto disk.
2017-05-05 14:23:01 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=pie
2017-05-05 14:23:01 DEBUG   10.10.0.249     CommandeStats::getAllByProductEntry cache file c:/dolibarr/dolibarr_documents/users/temp/CommandeStats_getAllByProductEntry_customer_es_ES_entity.1_user1.cache is not found or older than now - cachedelay (1493994181 - 86400) so we can't use it.
2017-05-05 14:23:01 DEBUG   10.10.0.249     CommandeStats::_getAllByProduct
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT product.ref, COUNT(product.ref) as nb, SUM(tl.total_ht) as total, AVG(tl.total_ht) as avg FROM llx_commande as c, llx_commandedet as tl, llx_product as product WHERE  c.fk_statut > 0 AND c.entity = 1 AND c.rowid = tl.fk_commande AND tl.fk_product = product.rowid AND c.date_commande BETWEEN '20170101000000' AND '20171231235959' GROUP BY product.ref ORDER BY nb DESC
2017-05-05 14:23:01 DEBUG   10.10.0.249     CommandeStats::getAllByProductEntry save cache file c:/dolibarr/dolibarr_documents/users/temp/CommandeStats_getAllByProductEntry_customer_es_ES_entity.1_user1.cache onto disk.
2017-05-05 14:23:01 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=pie
2017-05-05 14:23:01 DEBUG   10.10.0.249     box_graph_product_distribution::showBox
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT a.rowid, a.lastname, a.firstname, a.societe as company, a.fk_soc, a.datec, a.tms, a.statut as status, a.datefin as date_end_subscription, t.cotisation FROM llx_adherent as a, llx_adherent_type as t WHERE a.entity = 1 AND a.fk_adherent_type = t.rowid ORDER BY a.tms DESC LIMIT 5
2017-05-05 14:23:01 DEBUG   10.10.0.249     box_members::showBox
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, c.rowid, c.ref, c.statut as fk_statut, c.date_contrat, c.datec, c.fin_validite, c.date_cloture FROM llx_societe as s, llx_contrat as c WHERE c.fk_soc = s.rowid AND c.entity = 1 ORDER BY c.tms DESC, c.ref DESC  LIMIT 5
2017-05-05 14:23:01 DEBUG   10.10.0.249     box_contracts::showBox
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT  c.rowid, c.ref, c.statut as fk_statut, c.date_contrat, s.nom as name, s.rowid as socid, MIN(cd.date_fin_validite) as date_line, COUNT(cd.rowid) as nb_services FROM llx_contrat as c, llx_societe s, llx_contratdet as cd WHERE cd.statut = 4 AND cd.date_fin_validite <= '20170505142301' AND c.entity = 1 AND c.fk_soc=s.rowid AND cd.fk_contrat=c.rowid AND c.statut > 0 GROUP BY c.rowid, c.ref, c.statut, c.date_contrat, s.nom, s.rowid ORDER BY date_line ASC LIMIT 5
2017-05-05 14:23:01 DEBUG   10.10.0.249     box_services_expired::showBox
2017-05-05 14:23:01 DEBUG   10.10.0.249     box_ficheinter::loadBox
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT f.rowid, f.ref, f.fk_soc, f.fk_statut, f.datec, f.date_valid as datev, f.tms as datem, s.nom as name, s.rowid as socid, s.client FROM llx_societe as s, llx_fichinter as f WHERE f.fk_soc = s.rowid  AND f.entity = 1 ORDER BY f.tms DESC LIMIT 5
2017-05-05 14:23:01 DEBUG   10.10.0.249     box_ficheinter::showBox
2017-05-05 14:23:01 DEBUG   10.10.0.249     PropaleStats::getAmountByMonthWithPrevYear cache file c:/dolibarr/dolibarr_documents/users/temp/PropaleStats_getAmountByMonthWithPrevYear_es_ES_entity.1_user1.cache is not found or older than now - cachedelay (1493994181 - 86400) so we can't use it.
2017-05-05 14:23:01 DEBUG   10.10.0.249     PropaleStats::_getAmountByMonth
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT date_format(p.datep,'%m') as dm, SUM(p.total_ht) FROM llx_propal as p WHERE p.datep BETWEEN '20160101000000' AND '20161231235959' AND  p.fk_statut > 0 AND p.entity IN (1) GROUP BY dm ORDER BY dm DESC
2017-05-05 14:23:01 DEBUG   10.10.0.249     PropaleStats::_getAmountByMonth
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT date_format(p.datep,'%m') as dm, SUM(p.total_ht) FROM llx_propal as p WHERE p.datep BETWEEN '20170101000000' AND '20171231235959' AND  p.fk_statut > 0 AND p.entity IN (1) GROUP BY dm ORDER BY dm DESC
2017-05-05 14:23:01 DEBUG   10.10.0.249     PropaleStats::getAmountByMonthWithPrevYear save cache file c:/dolibarr/dolibarr_documents/users/temp/PropaleStats_getAmountByMonthWithPrevYear_es_ES_entity.1_user1.cache onto disk.
2017-05-05 14:23:01 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=bars,bars
2017-05-05 14:23:01 DEBUG   10.10.0.249     box_graph_propales_permonth::showBox
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.code_client, s.logo, p.rowid, p.ref, p.fk_statut, p.datep as dp, p.datec, p.fin_validite, p.date_cloture, p.total_ht, p.tva as total_tva, p.total as total_ttc, p.tms FROM llx_societe as s, llx_propal as p WHERE p.fk_soc = s.rowid AND p.entity = 1 ORDER BY p.tms DESC, p.ref DESC  LIMIT 5
2017-05-05 14:23:01 DEBUG   10.10.0.249     box_propales::showBox
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT b.title, b.url, b.target, b.favicon FROM llx_bookmark as b WHERE fk_user = 1 AND b.entity = 1 ORDER BY position ASC LIMIT 5
2017-05-05 14:23:01 DEBUG   10.10.0.249     box_bookmarks::showBox
2017-05-05 14:23:01 DEBUG   10.10.0.249     ModeleBoxes::showBox
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT count(u.rowid) as nb FROM llx_user as u WHERE u.statut > 0 AND u.entity IN (0,1)
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT count(s.rowid) as nb, s.client FROM llx_societe as s WHERE s.client IN (1,2,3) AND s.entity IN (1) GROUP BY s.client
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT count(s.rowid) as nb FROM llx_societe as s WHERE s.fournisseur = 1 AND s.entity IN (1)
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT count(sp.rowid) as nb FROM llx_socpeople as sp LEFT JOIN llx_societe as s ON (sp.fk_soc = s.rowid) WHERE s.entity IN (1)
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT count(a.rowid) as nb FROM llx_adherent as a WHERE a.statut > 0 AND a.entity IN (1)
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT count(p.rowid) as nb FROM llx_product as p WHERE p.entity IN (1) AND p.fk_product_type = 1
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT count(p.rowid) as nb FROM llx_propal as p LEFT JOIN llx_societe as s ON p.fk_soc = s.rowid WHERE p.entity IN (1)
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT count(co.rowid) as nb FROM llx_commande as co LEFT JOIN llx_societe as s ON co.fk_soc = s.rowid WHERE co.entity IN (1)
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT count(f.rowid) as nb FROM llx_facture as f LEFT JOIN llx_societe as s ON f.fk_soc = s.rowid WHERE f.entity = 1
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT count(c.rowid) as nb FROM llx_contrat as c LEFT JOIN llx_societe as s ON c.fk_soc = s.rowid WHERE c.entity = 1
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT count(fi.rowid) as nb FROM llx_fichinter as fi LEFT JOIN llx_societe as s ON fi.fk_soc = s.rowid WHERE fi.entity IN (1)
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT count(co.rowid) as nb FROM llx_commande_fournisseur as co LEFT JOIN llx_societe as s ON co.fk_soc = s.rowid WHERE co.entity = 1
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT count(f.rowid) as nb FROM llx_facture_fourn as f LEFT JOIN llx_societe as s ON f.fk_soc = s.rowid WHERE f.entity = 1
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT count(p.rowid) as nb FROM llx_supplier_proposal as p LEFT JOIN llx_societe as s ON p.fk_soc = s.rowid WHERE p.entity = 1
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT count(ex.rowid) as nb FROM llx_expensereport as ex WHERE ex.fk_statut > 0 AND ex.entity IN (1)
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT a.id, a.datep as dp FROM (llx_actioncomm as a) LEFT JOIN llx_societe as s ON a.fk_soc = s.rowid WHERE a.percent >= 0 AND a.percent < 100 AND a.entity IN (1)
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT p.rowid, p.ref, p.datec as datec, p.fin_validite as datefin FROM llx_propal as p WHERE p.entity IN (1) AND p.fk_statut = 1
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT p.rowid, p.ref, p.datec as datec, p.fin_validite as datefin FROM llx_propal as p WHERE p.entity IN (1) AND p.fk_statut = 2
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT p.rowid, p.ref, p.datec as datec FROM llx_supplier_proposal as p WHERE p.entity = 1 AND p.fk_statut = 1
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT p.rowid, p.ref, p.datec as datec FROM llx_supplier_proposal as p WHERE p.entity = 1 AND p.fk_statut = 2
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT c.rowid, c.date_creation as datec, c.date_commande, c.date_livraison as delivery_date, c.fk_statut FROM llx_commande as c WHERE c.entity IN (1) AND ((c.fk_statut IN (1,2)) OR (c.fk_statut = 3 AND c.facture = 0))
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT c.rowid, c.date_creation as datec, c.date_commande, c.fk_statut, c.date_livraison as delivery_date FROM llx_commande_fournisseur as c WHERE c.entity = 1 AND (c.fk_statut BETWEEN 1 AND 2)
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT cd.rowid, cd.date_ouverture_prevue as datefin FROM llx_contrat as c, llx_contratdet as cd, llx_societe as s WHERE c.statut = 1 AND c.rowid = cd.fk_contrat AND cd.statut = 0 AND c.fk_soc = s.rowid AND c.entity = 1
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT cd.rowid, cd.date_fin_validite as datefin FROM llx_contrat as c, llx_contratdet as cd, llx_societe as s WHERE c.statut = 1 AND c.rowid = cd.fk_contrat AND cd.statut = 4 AND cd.date_fin_validite < '20170505142301' AND c.fk_soc = s.rowid AND c.entity = 1
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT f.rowid, f.date_lim_reglement as datefin,f.fk_statut FROM llx_facture as f WHERE f.paye=0 AND f.entity = 1 AND f.fk_statut = 1
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT ff.rowid, ff.date_lim_reglement as datefin, ff.fk_statut FROM llx_facture_fourn as ff WHERE ff.paye=0 AND ff.fk_statut > 0 AND ff.entity = 1
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT COUNT(ba.rowid) as nb FROM llx_bank_account as ba WHERE ba.rappro > 0 and ba.clos = 0 AND ba.entity IN (1) AND ba.courant != 2
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT b.rowid, b.datev as datefin FROM llx_bank as b, llx_bank_account as ba WHERE b.rappro=0 AND b.fk_account = ba.rowid AND ba.entity IN (1) AND (ba.rappro = 1 AND ba.courant != 2) AND clos = 0
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT b.rowid, b.datev as datefin FROM llx_bank as b, llx_bank_account as ba WHERE b.fk_account = ba.rowid AND ba.entity IN (1) AND b.fk_type = 'CHQ' AND b.fk_bordereau = 0 AND b.amount > 0
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT a.rowid, a.datefin, a.statut FROM llx_adherent as a WHERE a.statut = 1 AND a.entity IN (1) AND (a.datefin IS NULL or a.datefin < '20170505142301')
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT ex.rowid, ex.date_valid FROM llx_expensereport as ex WHERE ex.fk_statut = 2 AND ex.entity IN (1)
2017-05-05 14:23:01 DEBUG   10.10.0.249     sql=SELECT ex.rowid, ex.date_valid FROM llx_expensereport as ex WHERE ex.fk_statut = 5 AND ex.entity IN (1)
2017-05-05 14:23:01 DEBUG   10.10.0.249     --- End access to /dolibarr/index.php
2017-05-05 14:23:03 DEBUG   10.10.0.249     --- Access to /dolibarr/theme/eldy/style.css.php
2017-05-05 14:23:03 DEBUG   10.10.0.249     sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:23:03 DEBUG   10.10.0.249     Menubase::menuLoad mymainmenu=home myleftmenu= type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:23:03 DEBUG   10.10.0.249     sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:23:03 DEBUG   10.10.0.249     User::fetch
2017-05-05 14:23:03 DEBUG   10.10.0.249     sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:23:03 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:23:03 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:23:03 DEBUG   10.10.0.249     sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:23:03 DEBUG   10.10.0.249     --- End access to /dolibarr/theme/eldy/style.css.php
2017-05-05 14:23:19 DEBUG   10.10.0.249     This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:23:19 DEBUG   10.10.0.249     User::fetch
2017-05-05 14:23:19 DEBUG   10.10.0.249     sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:23:19 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:23:19 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:23:19 DEBUG   10.10.0.249     sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:23:19 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:23:19 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:23:19 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:23:19 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:23:19 DEBUG   10.10.0.249     --- Access to /dolibarr/compta/index.php
2017-05-05 14:23:19 DEBUG   10.10.0.249     sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:23:19 DEBUG   10.10.0.249     Menubase::menuLoad mymainmenu=accountancy myleftmenu= type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:23:19 DEBUG   10.10.0.249     sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:23:19 DEBUG   10.10.0.249     sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:23:19 DEBUG   10.10.0.249     useLocalTax
2017-05-05 14:23:19 DEBUG   10.10.0.249     sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax1_type <> '0'
2017-05-05 14:23:20 DEBUG   10.10.0.249     useLocalTax
2017-05-05 14:23:20 DEBUG   10.10.0.249     sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:23:20 DEBUG   10.10.0.249     sql=SELECT f.facnumber, f.rowid, f.total as total_ht, f.tva as total_tva, f.total_ttc, f.type, s.nom as name, s.rowid as socid,s.code_client FROM llx_facture as f, llx_societe as s WHERE s.rowid = f.fk_soc AND f.fk_statut = 0 AND f.entity = 1
2017-05-05 14:23:20 DEBUG   10.10.0.249     sql=SELECT f.ref, f.rowid, f.total_ht, f.total_tva, f.total_ttc, f.type, s.nom as name, s.rowid as socid, s.code_fournisseur FROM llx_facture_fourn as f, llx_societe as s WHERE s.rowid = f.fk_soc AND f.fk_statut = 0 AND f.entity = 1
2017-05-05 14:23:20 DEBUG   10.10.0.249     sql=SELECT f.rowid, f.facnumber, f.fk_statut, f.type, f.total as total_ht, f.tva as total_tva, f.total_ttc, f.paye, f.tms, f.date_lim_reglement as datelimite, s.nom as name, s.rowid as socid, s.code_client, sum(pf.amount) as am FROM llx_societe as s,llx_facture as f LEFT JOIN llx_paiement_facture as pf on f.rowid=pf.fk_facture WHERE s.rowid = f.fk_soc AND f.entity = 1 GROUP BY f.rowid, f.facnumber, f.fk_statut, f.type, f.total, f.tva, f.total_ttc, f.paye, f.tms, f.date_lim_reglement, s.nom, s.rowid, s.code_client ORDER BY f.tms DESC  LIMIT 3
2017-05-05 14:23:20 DEBUG   10.10.0.249     Translate::loadCacheCurrencies
2017-05-05 14:23:20 DEBUG   10.10.0.249     sql=SELECT code_iso, label, unicode FROM llx_c_currencies WHERE active = 1 AND code_iso = 'EUR'
2017-05-05 14:23:20 DEBUG   10.10.0.249     files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1704-0004 types=files recursive=0 filter=FA1704\-0004[^\-]+ excludefilter="\\.meta$|\\.png$"
2017-05-05 14:23:20 DEBUG   10.10.0.249     files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1704-0002 types=files recursive=0 filter=FA1704\-0002[^\-]+ excludefilter="\\.meta$|\\.png$"
2017-05-05 14:23:20 DEBUG   10.10.0.249     files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1704-0003 types=files recursive=0 filter=FA1704\-0003[^\-]+ excludefilter="\\.meta$|\\.png$"
2017-05-05 14:23:20 DEBUG   10.10.0.249     sql=SELECT ff.rowid, ff.ref, ff.fk_statut, ff.libelle, ff.total_ht, ff.total_tva, ff.total_ttc, ff.tms, ff.paye, s.nom as name, s.rowid as socid, s.code_fournisseur, SUM(pf.amount) as am FROM llx_societe as s, llx_facture_fourn as ff LEFT JOIN llx_paiementfourn_facturefourn as pf on ff.rowid=pf.fk_facturefourn WHERE s.rowid = ff.fk_soc AND ff.entity = 1 GROUP BY ff.rowid, ff.ref, ff.fk_statut, ff.libelle, ff.total_ht, ff.tva, ff.total_tva, ff.total_ttc, ff.tms, ff.paye, s.nom, s.rowid, s.code_fournisseur ORDER BY ff.tms DESC  LIMIT 3
2017-05-05 14:23:20 DEBUG   10.10.0.249     sql=SELECT d.rowid, d.lastname, d.firstname, d.societe, d.datedon as date, d.tms as dm, d.amount, d.fk_statut FROM llx_don as d WHERE d.entity = 1 ORDER BY d.tms DESC LIMIT 3
2017-05-05 14:23:20 DEBUG   10.10.0.249     sql=SELECT c.rowid, c.amount, c.date_ech, c.paye, cc.libelle, SUM(pc.amount) as sumpaid FROM (llx_c_chargesociales as cc, llx_chargesociales as c) LEFT JOIN llx_paiementcharge as pc ON pc.fk_charge = c.rowid WHERE c.fk_type = cc.id AND c.entity = 1 AND c.paye = 0 GROUP BY c.rowid, c.amount, c.date_ech, c.paye, cc.libelle
2017-05-05 14:23:20 DEBUG   10.10.0.249     sql=SELECT sum(f.total) as tot_fht, sum(f.total_ttc) as tot_fttc, s.nom as name, s.rowid as socid, s.code_client, c.rowid, c.ref, c.facture, c.fk_statut, c.total_ht, c.tva as total_tva, c.total_ttc FROM llx_societe as s, llx_commande as c LEFT JOIN llx_element_element as el ON el.fk_source = c.rowid AND el.sourcetype = 'commande' LEFT JOIN llx_facture AS f ON el.fk_target = f.rowid AND el.targettype = 'facture' WHERE c.fk_soc = s.rowid AND c.entity = 1 AND c.fk_statut = 3 AND c.facture = 0 GROUP BY s.nom, s.rowid, s.code_client, c.rowid, c.ref, c.facture, c.fk_statut, c.tva, c.total_ht, c.total_ttc
2017-05-05 14:23:20 DEBUG   10.10.0.249     sql=SELECT f.rowid, f.facnumber, f.fk_statut, f.datef, f.type, f.total as total_ht, f.tva as total_tva, f.total_ttc, f.paye, f.tms, f.date_lim_reglement as datelimite, s.nom as name, s.rowid as socid, s.code_client, sum(pf.amount) as am FROM llx_societe as s,llx_facture as f LEFT JOIN llx_paiement_facture as pf on f.rowid=pf.fk_facture WHERE s.rowid = f.fk_soc AND f.paye = 0 AND f.fk_statut = 1 AND f.entity = 1 GROUP BY f.rowid, f.facnumber, f.fk_statut, f.datef, f.type, f.total, f.tva, f.total_ttc, f.paye, f.tms, f.date_lim_reglement, s.nom, s.rowid, s.code_client ORDER BY f.datef ASC, f.facnumber ASC
2017-05-05 14:23:20 DEBUG   10.10.0.249     files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1704-0001 types=files recursive=0 filter=FA1704\-0001[^\-]+ excludefilter="\\.meta$|\\.png$"
2017-05-05 14:23:20 DEBUG   10.10.0.249     files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/AV1704-0001 types=files recursive=0 filter=AV1704\-0001[^\-]+ excludefilter="\\.meta$|\\.png$"
2017-05-05 14:23:20 DEBUG   10.10.0.249     sql=SELECT ff.rowid, ff.ref, ff.fk_statut, ff.libelle, ff.total_ht, ff.total_tva, ff.total_ttc, ff.paye, ff.date_lim_reglement, s.nom as name, s.rowid as socid, s.code_client, s.code_fournisseur, sum(pf.amount) as am FROM llx_societe as s, llx_facture_fourn as ff LEFT JOIN llx_paiementfourn_facturefourn as pf on ff.rowid=pf.fk_facturefourn WHERE s.rowid = ff.fk_soc AND ff.entity = 1 AND ff.paye = 0 AND ff.fk_statut = 1 GROUP BY ff.rowid, ff.ref, ff.fk_statut, ff.libelle, ff.total_ht, ff.tva, ff.total_tva, ff.total_ttc, ff.paye, s.nom, s.rowid, s.code_client, s.code_fournisseur, ff.date_lim_reglement ORDER BY ff.date_lim_reglement ASC
2017-05-05 14:23:20 DEBUG   10.10.0.249     --- End access to /dolibarr/compta/index.php
2017-05-05 14:23:26 DEBUG   10.10.0.249     This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:23:26 DEBUG   10.10.0.249     User::fetch
2017-05-05 14:23:26 DEBUG   10.10.0.249     sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:23:26 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:23:26 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:23:26 DEBUG   10.10.0.249     sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:23:26 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:23:26 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:23:26 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:23:26 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:23:26 DEBUG   10.10.0.249     --- Access to /dolibarr/compta/facture/list.php
2017-05-05 14:23:26 DEBUG   10.10.0.249     sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:23:26 DEBUG   10.10.0.249     Menubase::menuLoad mymainmenu=accountancy myleftmenu=customers_bills type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:23:26 DEBUG   10.10.0.249     sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:23:26 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:23:26 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:23:26 DEBUG   10.10.0.249     sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:23:26 DEBUG   10.10.0.249     useLocalTax
2017-05-05 14:23:26 DEBUG   10.10.0.249     sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax1_type <> '0'
2017-05-05 14:23:26 DEBUG   10.10.0.249     useLocalTax
2017-05-05 14:23:26 DEBUG   10.10.0.249     sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:23:26 DEBUG   10.10.0.249     sql=SELECT f.rowid as facid, f.facnumber, f.ref_client, f.type, f.note_private, f.note_public, f.increment, f.fk_mode_reglement, f.total as total_ht, f.tva as total_vat, f.total_ttc, f.datef as df, f.date_lim_reglement as datelimite, f.paye as paye, f.fk_statut, f.datec as date_creation, f.tms as date_update, s.rowid as socid, s.nom as name, s.town, s.zip, s.fk_pays, s.client, s.code_client,  typent.code as typent_code, state.code_departement as state_code, state.nom as state_name, SUM(pf.amount) as am FROM llx_societe as s LEFT JOIN llx_c_country as country on (country.rowid = s.fk_pays) LEFT JOIN llx_c_typent as typent on (typent.id = s.fk_typent) LEFT JOIN llx_c_departements as state on (state.rowid = s.fk_departement), llx_facture as f LEFT JOIN llx_paiement_facture as pf ON pf.fk_facture = f.rowid WHERE f.fk_soc = s.rowid AND f.entity = 1 GROUP BY f.rowid, f.facnumber, ref_client, f.type, f.note_private, f.note_public, f.increment, fk_mode_reglement, f.total, f.tva, f.total_ttc, f.datef, f.date_lim_reglement, f.paye, f.fk_statut, f.datec, f.tms, s.rowid, s.nom, s.town, s.zip, s.fk_pays, s.code_client, s.client, typent.code ,state.code_departement, state.nom ORDER BY f.datef DESC, f.rowid DESC
2017-05-05 14:23:26 DEBUG   10.10.0.249     sql=SELECT f.rowid as facid, f.facnumber, f.ref_client, f.type, f.note_private, f.note_public, f.increment, f.fk_mode_reglement, f.total as total_ht, f.tva as total_vat, f.total_ttc, f.datef as df, f.date_lim_reglement as datelimite, f.paye as paye, f.fk_statut, f.datec as date_creation, f.tms as date_update, s.rowid as socid, s.nom as name, s.town, s.zip, s.fk_pays, s.client, s.code_client,  typent.code as typent_code, state.code_departement as state_code, state.nom as state_name, SUM(pf.amount) as am FROM llx_societe as s LEFT JOIN llx_c_country as country on (country.rowid = s.fk_pays) LEFT JOIN llx_c_typent as typent on (typent.id = s.fk_typent) LEFT JOIN llx_c_departements as state on (state.rowid = s.fk_departement), llx_facture as f LEFT JOIN llx_paiement_facture as pf ON pf.fk_facture = f.rowid WHERE f.fk_soc = s.rowid AND f.entity = 1 GROUP BY f.rowid, f.facnumber, ref_client, f.type, f.note_private, f.note_public, f.increment, fk_mode_reglement, f.total, f.tva, f.total_ttc, f.datef, f.date_lim_reglement, f.paye, f.fk_statut, f.datec, f.tms, s.rowid, s.nom, s.town, s.zip, s.fk_pays, s.code_client, s.client, typent.code ,state.code_departement, state.nom ORDER BY f.datef DESC, f.rowid DESC  LIMIT 26
2017-05-05 14:23:26 DEBUG   10.10.0.249     sql=SELECT u.rowid, u.lastname, u.firstname, u.statut, u.login FROM llx_user as u WHERE u.entity IN (0,1) ORDER BY lastname ASC
2017-05-05 14:23:26 DEBUG   10.10.0.249     Form::select_dolusers
2017-05-05 14:23:26 DEBUG   10.10.0.249     sql=SELECT DISTINCT u.rowid, u.lastname as lastname, u.firstname, u.statut, u.login, u.admin, u.entity FROM llx_user as u WHERE u.entity IN (0,1) ORDER BY u.lastname ASC
2017-05-05 14:23:26 WARNING 10.10.0.249     Form::select_all_categories: using numeric value for parameter type is deprecated. Use string code instead.
2017-05-05 14:23:26 WARNING 10.10.0.249     Categorie::get_full_arbo(): numeric types are deprecated, please use string instead
2017-05-05 14:23:26 DEBUG   10.10.0.249     Categorie::load_motherof
2017-05-05 14:23:26 DEBUG   10.10.0.249     sql=SELECT fk_parent as id_parent, rowid as id_son FROM llx_categorie WHERE fk_parent != 0 AND entity IN (1)
2017-05-05 14:23:26 DEBUG   10.10.0.249     Categorie::get_full_arbo get category list
2017-05-05 14:23:26 DEBUG   10.10.0.249     sql=SELECT DISTINCT c.rowid, c.label, c.description, c.color, c.fk_parent FROM llx_categorie as c WHERE c.entity IN (1) AND c.type = 0
2017-05-05 14:23:26 DEBUG   10.10.0.249     Categorie::get_full_arbo call to build_path_from_id_categ
2017-05-05 14:23:26 DEBUG   10.10.0.249     Categorie::get_full_arbo dol_sort_array
2017-05-05 14:23:26 DEBUG   10.10.0.249     Form::select_types_paiements , search_paymentmode, , 0
2017-05-05 14:23:26 DEBUG   10.10.0.249     Form::load_cache_types_paiements
2017-05-05 14:23:26 DEBUG   10.10.0.249     sql=SELECT id, code, libelle as label, type, active FROM llx_c_paiement
2017-05-05 14:23:26 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:23:26 DEBUG   10.10.0.249     sql=SELECT libelle as label FROM llx_c_paiement WHERE code = 'LCR'
2017-05-05 14:23:26 DEBUG   10.10.0.249     Facture::getSommePaiement
2017-05-05 14:23:26 DEBUG   10.10.0.249     sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 6
2017-05-05 14:23:26 DEBUG   10.10.0.249     files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1704-0004 types=files recursive=0 filter=FA1704\-0004[^\-]+ excludefilter="\\.meta$|\\.png$"
2017-05-05 14:23:26 DEBUG   10.10.0.249     Facture::getSommePaiement
2017-05-05 14:23:26 DEBUG   10.10.0.249     sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 5
2017-05-05 14:23:26 DEBUG   10.10.0.249     files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1704-0003 types=files recursive=0 filter=FA1704\-0003[^\-]+ excludefilter="\\.meta$|\\.png$"
2017-05-05 14:23:26 DEBUG   10.10.0.249     Facture::getSommePaiement
2017-05-05 14:23:26 DEBUG   10.10.0.249     sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 4
2017-05-05 14:23:26 DEBUG   10.10.0.249     files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/AV1704-0001 types=files recursive=0 filter=AV1704\-0001[^\-]+ excludefilter="\\.meta$|\\.png$"
2017-05-05 14:23:26 DEBUG   10.10.0.249     Facture::getSommePaiement
2017-05-05 14:23:26 DEBUG   10.10.0.249     sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 3
2017-05-05 14:23:26 DEBUG   10.10.0.249     files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1704-0001 types=files recursive=0 filter=FA1704\-0001[^\-]+ excludefilter="\\.meta$|\\.png$"
2017-05-05 14:23:26 DEBUG   10.10.0.249     Facture::getSommePaiement
2017-05-05 14:23:26 DEBUG   10.10.0.249     sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 2
2017-05-05 14:23:26 DEBUG   10.10.0.249     files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1704-0002 types=files recursive=0 filter=FA1704\-0002[^\-]+ excludefilter="\\.meta$|\\.png$"
2017-05-05 14:23:26 DEBUG   10.10.0.249     --- End access to /dolibarr/compta/facture/list.php
2017-05-05 14:23:34 DEBUG   10.10.0.249     This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:23:34 DEBUG   10.10.0.249     User::fetch
2017-05-05 14:23:34 DEBUG   10.10.0.249     sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:23:34 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:23:34 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:23:34 DEBUG   10.10.0.249     sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:23:34 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:23:34 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:23:34 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:23:34 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:23:34 DEBUG   10.10.0.249     --- Access to /dolibarr/compta/facture.php
2017-05-05 14:23:34 DEBUG   10.10.0.249     sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:23:34 DEBUG   10.10.0.249     Menubase::menuLoad mymainmenu=accountancy myleftmenu=customers_bills type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:23:34 DEBUG   10.10.0.249     sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:23:35 DEBUG   10.10.0.249     Facture::fetch
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=5
2017-05-05 14:23:35 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:23:35 DEBUG   10.10.0.249     Facture::fetch_lines
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 5 ORDER BY l.rang, l.rowid
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:23:35 DEBUG   10.10.0.249     useLocalTax
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax1_type <> '0'
2017-05-05 14:23:35 DEBUG   10.10.0.249     useLocalTax
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:23:35 DEBUG   10.10.0.249     Facture::fetch
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=5
2017-05-05 14:23:35 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:23:35 DEBUG   10.10.0.249     Facture::fetch_lines
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 5 ORDER BY l.rang, l.rowid
2017-05-05 14:23:35 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:23:35 DEBUG   10.10.0.249     Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:23:35 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:23:35 DEBUG   10.10.0.249     Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:23:35 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:23:35 DEBUG   10.10.0.249     useRevenueStamp
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT COUNT(*) as nb FROM llx_c_revenuestamp as r, llx_c_country as c WHERE r.fk_pays = c.rowid AND c.code = 'ES' AND r.active = 1
2017-05-05 14:23:35 DEBUG   10.10.0.249     Facture::getSommePaiement
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 5
2017-05-05 14:23:35 DEBUG   10.10.0.249     DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 5 AND f.type = 2
2017-05-05 14:23:35 DEBUG   10.10.0.249     DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 5 AND f.type = 3
2017-05-05 14:23:35 DEBUG   10.10.0.249     DiscountAbsolute::getAvailableDiscounts
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT SUM(rc.amount_ttc) as amount FROM llx_societe_remise_except as rc WHERE (rc.fk_facture IS NULL AND rc.fk_facture_line IS NULL) AND rc.fk_soc = 3 AND (fk_facture_source IS NULL OR (fk_facture_source IS NOT NULL AND description LIKE '(DEPOSIT)%'))
2017-05-05 14:23:35 DEBUG   10.10.0.249     DiscountAbsolute::getAvailableDiscounts
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT SUM(rc.amount_ttc) as amount FROM llx_societe_remise_except as rc WHERE (rc.fk_facture IS NULL AND rc.fk_facture_line IS NULL) AND rc.fk_soc = 3 AND (fk_facture_source IS NOT NULL AND description NOT LIKE '(DEPOSIT)%')
2017-05-05 14:23:35 DEBUG   10.10.0.249     User::fetch
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.rowid = 1
2017-05-05 14:23:35 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 5 AND type < 2 ORDER BY fk_statut DESC
2017-05-05 14:23:35 DEBUG   10.10.0.249     Facture::liste_contact
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT ec.rowid, ec.statut as statuslink, ec.fk_socpeople as id, ec.fk_c_type_contact, '-1' as socid, t.statut as statuscontact, t.civility as civility, t.lastname as lastname, t.firstname, t.email, tc.source, tc.element, tc.code, tc.libelle FROM llx_c_type_contact tc, llx_element_contact ec LEFT JOIN llx_user t on ec.fk_socpeople = t.rowid WHERE ec.element_id =5 AND ec.fk_c_type_contact=tc.rowid AND tc.element='facture' AND tc.source = 'internal' AND tc.active=1 ORDER BY t.lastname ASC
2017-05-05 14:23:35 DEBUG   10.10.0.249     Facture::liste_contact
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT ec.rowid, ec.statut as statuslink, ec.fk_socpeople as id, ec.fk_c_type_contact, t.fk_soc as socid, t.statut as statuscontact, t.civility as civility, t.lastname as lastname, t.firstname, t.email, tc.source, tc.element, tc.code, tc.libelle FROM llx_c_type_contact tc, llx_element_contact ec LEFT JOIN llx_socpeople t on ec.fk_socpeople = t.rowid WHERE ec.element_id =5 AND ec.fk_c_type_contact=tc.rowid AND tc.element='facture' AND tc.source = 'external' AND tc.active=1 ORDER BY t.lastname ASC
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT COUNT(pfd.rowid) as nb FROM llx_prelevement_facture_demande as pfd WHERE pfd.fk_facture = 5
2017-05-05 14:23:35 DEBUG   10.10.0.249     files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1704-0003 types=files recursive=0 filter= excludefilter="(\\.meta|_preview\\.png)$"
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT COUNT(rowid) as nb FROM llx_links WHERE objecttype = 'facture' AND objectid = 5 AND entity = 1
2017-05-05 14:23:35 DEBUG   10.10.0.249     DiscountAbsolute::fetch
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT sr.rowid, sr.fk_soc, sr.fk_user, sr.amount_ht, sr.amount_tva, sr.amount_ttc, sr.tva_tx, sr.fk_facture_line, sr.fk_facture, sr.fk_facture_source, sr.description, sr.datec, f.facnumber as ref_facture_source FROM llx_societe_remise_except as sr LEFT JOIN llx_facture as f ON sr.fk_facture_source = f.rowid WHERE sr.fk_facture_source=5
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT MAX(te.facnumber) FROM llx_facture as te WHERE te.facnumber < 'FA1704-0003' AND te.entity IN (1)
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT MIN(te.facnumber) FROM llx_facture as te WHERE te.facnumber > 'FA1704-0003' AND te.entity IN (1)
2017-05-05 14:23:35 DEBUG   10.10.0.249     get_OutstandingBill
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT rowid, total_ttc FROM llx_facture as f WHERE fk_soc = 3 AND paye = 0 AND fk_statut <> 0 AND fk_statut <> 3 AND fk_statut <> 2
2017-05-05 14:23:35 DEBUG   10.10.0.249     Facture::getSommePaiement
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 3
2017-05-05 14:23:35 DEBUG   10.10.0.249     DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 2
2017-05-05 14:23:35 DEBUG   10.10.0.249     DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 3
2017-05-05 14:23:35 DEBUG   10.10.0.249     Facture::getSommePaiement
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 4
2017-05-05 14:23:35 DEBUG   10.10.0.249     DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 4 AND f.type = 2
2017-05-05 14:23:35 DEBUG   10.10.0.249     DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 4 AND f.type = 3
2017-05-05 14:23:35 DEBUG   10.10.0.249     Translate::loadCacheCurrencies
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT code_iso, label, unicode FROM llx_c_currencies WHERE active = 1 AND code_iso = 'EUR'
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 5 AND type = 2
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT p.datep as dp, p.ref, p.num_paiement, p.rowid, p.fk_bank, c.code as payment_code, c.libelle as payment_label, pf.amount, ba.rowid as baid, ba.ref as baref, ba.label FROM llx_c_paiement as c, llx_paiement_facture as pf, llx_paiement as p LEFT JOIN llx_bank as b ON p.fk_bank = b.rowid LEFT JOIN llx_bank_account as ba ON b.fk_account = ba.rowid WHERE pf.fk_facture = 5 AND p.fk_paiement = c.id AND pf.fk_paiement = p.rowid ORDER BY p.datep, p.tms
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT fk_facture FROM llx_paiement_facture as pf, llx_facture as f WHERE pf.fk_facture = f.rowid AND fk_paiement = 1
2017-05-05 14:23:35 DEBUG   10.10.0.249     Facture::fetch
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=2
2017-05-05 14:23:35 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:23:35 DEBUG   10.10.0.249     Facture::fetch_lines
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 2 ORDER BY l.rang, l.rowid
2017-05-05 14:23:35 DEBUG   10.10.0.249     Facture::fetch
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=3
2017-05-05 14:23:35 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:23:35 DEBUG   10.10.0.249     Facture::fetch_lines
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 3 ORDER BY l.rang, l.rowid
2017-05-05 14:23:35 DEBUG   10.10.0.249     Facture::fetch
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=5
2017-05-05 14:23:35 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:23:35 DEBUG   10.10.0.249     Facture::fetch_lines
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 5 ORDER BY l.rang, l.rowid
2017-05-05 14:23:35 DEBUG   10.10.0.249     Facture::fetch
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=6
2017-05-05 14:23:35 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:23:35 DEBUG   10.10.0.249     Facture::fetch_lines
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 6 ORDER BY l.rang, l.rowid
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT re.rowid, re.amount_ht, re.amount_tva, re.amount_ttc, re.description, re.fk_facture_source FROM llx_societe_remise_except as re WHERE fk_facture = 5
2017-05-05 14:23:35 DEBUG   10.10.0.249     Form::load_cache_conditions_paiements
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT rowid, code, libelle as label FROM llx_c_payment_term WHERE active > 0 ORDER BY sortorder
2017-05-05 14:23:35 DEBUG   10.10.0.249     Form::load_cache_types_paiements
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT id, code, libelle as label, type, active FROM llx_c_paiement
2017-05-05 14:23:35 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT libelle as label FROM llx_c_paiement WHERE code = 'LCR'
2017-05-05 14:23:35 DEBUG   10.10.0.249     useLocalTax
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:23:35 DEBUG   10.10.0.249     Facture::fetch_lines
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 5 ORDER BY l.rang, l.rowid
2017-05-05 14:23:35 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facturedet' ORDER BY pos
2017-05-05 14:23:35 DEBUG   10.10.0.249     Product::fetch id=1 ref= ref_ext=
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT rowid, ref, ref_ext, label, description, url, note, customcode, fk_country, price, price_ttc, price_min, price_min_ttc, price_base_type, cost_price, default_vat_code, tva_tx, recuperableonly as tva_npr, localtax1_tx, localtax2_tx, localtax1_type, localtax2_type, tosell, tobuy, fk_product_type, duration, seuil_stock_alerte, canvas, weight, weight_units, length, length_units, surface, surface_units, volume, volume_units, barcode, fk_barcode_type, finished, accountancy_code_buy, accountancy_code_sell, stock, pmp, datec, tms, import_key, entity, desiredstock, tobatch, fk_unit, fk_price_expression, price_autogen FROM llx_product WHERE rowid = 1
2017-05-05 14:23:35 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'product' ORDER BY pos
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT MAX(CAST(SUBSTRING(facnumber FROM 8) AS SIGNED)) as max FROM llx_facture WHERE facnumber LIKE 'FA____-%' AND entity IN (1)
2017-05-05 14:23:35 DEBUG   10.10.0.249     mod_facture_terre::getNextValue
2017-05-05 14:23:35 DEBUG   10.10.0.249     mod_facture_terre::getNextValue
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT facnumber as ref FROM llx_facture WHERE facnumber LIKE 'FA____-0004' AND entity IN (1)
2017-05-05 14:23:35 DEBUG   10.10.0.249     /core/lib/function2.lib.php::getListOfModels
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT nom as id, nom as lib, libelle as label, description as description FROM llx_document_model WHERE type = 'invoice' AND entity IN (0,1) ORDER BY description DESC
2017-05-05 14:23:35 DEBUG   10.10.0.249     files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1704-0003 types=files recursive=0 filter= excludefilter="(\\.meta|_preview\\.png)$"
2017-05-05 14:23:35 DEBUG   10.10.0.249     Facture::fetchObjectLink
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT rowid, fk_source, sourcetype, fk_target, targettype FROM llx_element_element WHERE (fk_source = '5' AND sourcetype = 'facture') OR (fk_target = '5' AND targettype = 'facture') ORDER BY sourcetype
2017-05-05 14:23:35 DEBUG   10.10.0.249     Commande::fetch
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT c.rowid, c.date_creation, c.ref, c.fk_soc, c.fk_user_author, c.fk_statut, c.amount_ht, c.total_ht, c.total_ttc, c.tva as total_tva, c.localtax1 as total_localtax1, c.localtax2 as total_localtax2, c.fk_cond_reglement, c.fk_mode_reglement, c.fk_availability, c.fk_input_reason, c.fk_account, c.date_commande, c.date_livraison, c.fk_shipping_method, c.fk_warehouse, c.fk_projet, c.remise_percent, c.remise, c.remise_absolue, c.source, c.facture as billed, c.note_private, c.note_public, c.ref_client, c.ref_ext, c.ref_int, c.model_pdf, c.fk_delivery_address, c.extraparams, c.fk_incoterms, c.location_incoterms, c.fk_multicurrency, c.multicurrency_code, c.multicurrency_tx, c.multicurrency_total_ht, c.multicurrency_total_tva, c.multicurrency_total_ttc, i.libelle as libelle_incoterms, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, cr.code as cond_reglement_code, cr.libelle as cond_reglement_libelle, cr.libelle_facture as cond_reglement_libelle_doc, ca.code as availability_code, ca.label as availability_label, dr.code as demand_reason_code FROM llx_commande as c LEFT JOIN llx_c_payment_term as cr ON (c.fk_cond_reglement = cr.rowid) LEFT JOIN llx_c_paiement as p ON (c.fk_mode_reglement = p.id) LEFT JOIN llx_c_availability as ca ON (c.fk_availability = ca.rowid) LEFT JOIN llx_c_input_reason as dr ON (c.fk_input_reason = ca.rowid) LEFT JOIN llx_c_incoterms as i ON c.fk_incoterms = i.rowid WHERE c.entity IN (1) AND c.rowid=1
2017-05-05 14:23:35 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'commande' ORDER BY pos
2017-05-05 14:23:35 DEBUG   10.10.0.249     Commande::fetch_lines
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.product_type, l.fk_commande, l.label as custom_label, l.description, l.price, l.qty, l.tva_tx, l.localtax1_tx, l.localtax2_tx, l.fk_remise_except, l.remise_percent, l.subprice, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.rang, l.info_bits, l.special_code, l.total_ht, l.total_ttc, l.total_tva, l.total_localtax1, l.total_localtax2, l.date_start, l.date_end, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.description as product_desc, p.fk_product_type, p.label as product_label, p.weight, p.weight_units, p.volume, p.volume_units FROM llx_commandedet as l LEFT JOIN llx_product as p ON (p.rowid = l.fk_product) WHERE l.fk_commande = 1 ORDER BY l.rang, l.rowid
2017-05-05 14:23:35 DEBUG   10.10.0.249     sql=SELECT s.rowid as socid, s.nom as name, s.client, c.rowid, c.ref, c.ref_client, c.total_ht FROM llx_societe as s, llx_commande as c WHERE c.fk_soc = s.rowid AND c.fk_soc = 3
2017-05-05 14:23:36 DEBUG   10.10.0.249     ActionComm::getActions
2017-05-05 14:23:36 DEBUG   10.10.0.249     sql=SELECT a.id FROM llx_actioncomm as a WHERE a.entity IN (1) AND a.fk_element = 5 AND a.elementtype = 'invoice'
2017-05-05 14:23:36 DEBUG   10.10.0.249     ActionComm::fetch
2017-05-05 14:23:36 DEBUG   10.10.0.249     sql=SELECT a.id, a.id as ref, a.ref_ext, a.datep, a.datep2, a.durationp, a.datec, a.tms as datem, a.code, a.label, a.note, a.fk_soc, a.fk_project, a.fk_user_author, a.fk_user_mod, a.fk_user_action, a.fk_user_done, a.fk_contact, a.percent as percentage, a.fk_element, a.elementtype, a.priority, a.fulldayevent, a.location, a.punctual, a.transparency, c.id as type_id, c.code as type_code, c.libelle, s.nom as socname, u.firstname, u.lastname as lastname FROM llx_actioncomm as a  LEFT JOIN llx_c_actioncomm as c ON a.fk_action=c.id  LEFT JOIN llx_user as u on u.rowid = a.fk_user_author LEFT JOIN llx_societe as s on s.rowid = a.fk_soc WHERE  a.id=10
2017-05-05 14:23:36 DEBUG   10.10.0.249     ActionComm::fetch
2017-05-05 14:23:36 DEBUG   10.10.0.249     sql=SELECT a.id, a.id as ref, a.ref_ext, a.datep, a.datep2, a.durationp, a.datec, a.tms as datem, a.code, a.label, a.note, a.fk_soc, a.fk_project, a.fk_user_author, a.fk_user_mod, a.fk_user_action, a.fk_user_done, a.fk_contact, a.percent as percentage, a.fk_element, a.elementtype, a.priority, a.fulldayevent, a.location, a.punctual, a.transparency, c.id as type_id, c.code as type_code, c.libelle, s.nom as socname, u.firstname, u.lastname as lastname FROM llx_actioncomm as a  LEFT JOIN llx_c_actioncomm as c ON a.fk_action=c.id  LEFT JOIN llx_user as u on u.rowid = a.fk_user_author LEFT JOIN llx_societe as s on s.rowid = a.fk_soc WHERE  a.id=13
2017-05-05 14:23:36 DEBUG   10.10.0.249     --- End access to /dolibarr/compta/facture.php
2017-05-05 14:26:18 DEBUG   10.10.0.249     This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:26:18 DEBUG   10.10.0.249     User::fetch
2017-05-05 14:26:18 DEBUG   10.10.0.249     sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:26:18 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:26:18 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:26:18 DEBUG   10.10.0.249     sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:26:18 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:26:18 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:26:18 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:26:18 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:26:18 DEBUG   10.10.0.249     --- Access to /dolibarr/index.php
2017-05-05 14:26:18 DEBUG   10.10.0.249     sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:26:18 DEBUG   10.10.0.249     Menubase::menuLoad mymainmenu=home myleftmenu= type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:26:18 DEBUG   10.10.0.249     sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:26:18 DEBUG   10.10.0.249     sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:26:18 DEBUG   10.10.0.249     InfoBox::listBoxes get default box list for mode=activated userid=
2017-05-05 14:26:18 DEBUG   10.10.0.249     sql=SELECT b.rowid, b.position, b.box_order, b.fk_user, d.rowid as box_id, d.file, d.note, d.tms FROM llx_boxes as b, llx_boxes_def as d WHERE b.box_id = d.rowid AND b.entity IN (0,1) AND b.position = 0 AND b.fk_user = 0 ORDER BY b.box_order
2017-05-05 14:26:18 DEBUG   10.10.0.249     box_clients::loadBox
2017-05-05 14:26:18 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.code_client, s.client, s.code_fournisseur, s.fournisseur, s.logo, s.datec, s.tms, s.status FROM llx_societe as s WHERE s.client IN (1, 3) AND s.entity IN (1) ORDER BY s.tms DESC LIMIT 5
2017-05-05 14:26:18 DEBUG   10.10.0.249     box_clients::showBox
2017-05-05 14:26:18 DEBUG   10.10.0.249     box_comptes::loadBox
2017-05-05 14:26:18 DEBUG   10.10.0.249     sql=SELECT rowid, ref, label, bank, number, courant, clos, rappro, url, code_banque, code_guichet, cle_rib, bic, iban_prefix as iban, domiciliation, proprio, owner_address, account_number, currency_code, min_allowed, min_desired, comment FROM llx_bank_account WHERE entity = 1 AND clos = 0 ORDER BY label LIMIT 5
2017-05-05 14:26:18 DEBUG   10.10.0.249     sql=SELECT sum(amount) as amount FROM llx_bank WHERE fk_account = 1
2017-05-05 14:26:18 DEBUG   10.10.0.249     Translate::loadCacheCurrencies
2017-05-05 14:26:18 DEBUG   10.10.0.249     sql=SELECT code_iso, label, unicode FROM llx_c_currencies WHERE active = 1 AND code_iso = 'EUR'
2017-05-05 14:26:18 DEBUG   10.10.0.249     box_comptes::showBox
2017-05-05 14:26:18 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, c.rowid, c.ref, c.statut as contract_status, cd.rowid as cdid, cd.tms as datem, cd.statut, cd.label, cd.description, cd.product_type as type, p.rowid as product_id, p.ref as product_ref FROM (llx_societe as s, llx_contrat as c, llx_contratdet as cd LEFT JOIN llx_product as p ON cd.fk_product = p.rowid) WHERE c.entity = 1 AND s.rowid = c.fk_soc AND c.rowid = cd.fk_contrat ORDER BY c.tms DESC LIMIT 5
2017-05-05 14:26:18 DEBUG   10.10.0.249     box_services_contracts::showBox
2017-05-05 14:26:18 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.code_client, s.logo, c.ref, c.tms, c.rowid, c.date_commande, c.ref_client, c.fk_statut, c.fk_user_valid, c.facture, c.total_ht, c.tva as total_tva, c.total_ttc FROM llx_societe as s, llx_commande as c WHERE c.fk_soc = s.rowid AND c.entity = 1 ORDER BY c.tms DESC, c.ref DESC  LIMIT 5
2017-05-05 14:26:18 DEBUG   10.10.0.249     box_commandes::showBox
2017-05-05 14:26:18 DEBUG   10.10.0.249     CommandeStats::getAmountByMonthWithPrevYear read data from cache file c:/dolibarr/dolibarr_documents/users/temp/CommandeStats_getAmountByMonthWithPrevYear_customer_es_ES_entity.1_user1.cache 1493994180.
2017-05-05 14:26:18 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=
2017-05-05 14:26:18 DEBUG   10.10.0.249     box_graph_orders_permonth::showBox
2017-05-05 14:26:18 DEBUG   10.10.0.249     FactureStats::getAmountByMonthWithPrevYear read data from cache file c:/dolibarr/dolibarr_documents/users/temp/FactureStats_getAmountByMonthWithPrevYear_supplier_es_ES_entity.1_user1.cache 1493994180.
2017-05-05 14:26:18 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=
2017-05-05 14:26:18 DEBUG   10.10.0.249     box_graph_invoices_supplier_permonth::showBox
2017-05-05 14:26:18 DEBUG   10.10.0.249     CommandeStats::getAmountByMonthWithPrevYear read data from cache file c:/dolibarr/dolibarr_documents/users/temp/CommandeStats_getAmountByMonthWithPrevYear_supplier_es_ES_entity.1_user1.cache 1493994180.
2017-05-05 14:26:18 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=
2017-05-05 14:26:18 DEBUG   10.10.0.249     box_graph_orders_supplier_permonth::showBox
2017-05-05 14:26:18 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.datec, s.tms, s.status, s.code_fournisseur, s.logo FROM llx_societe as s WHERE s.fournisseur = 1 AND s.entity IN (1) ORDER BY s.tms DESC  LIMIT 5
2017-05-05 14:26:18 DEBUG   10.10.0.249     box_fournisseurs::showBox
2017-05-05 14:26:18 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, f.rowid as facid, f.ref, f.ref_supplier, f.date_lim_reglement as datelimite, f.amount, f.datef as df, f.total_ht as total_ht, f.tva as total_tva, f.total_ttc, f.paye, f.fk_statut, f.type FROM llx_societe as s,llx_facture_fourn as f WHERE f.fk_soc = s.rowid AND f.entity = 1 AND f.paye=0 AND fk_statut = 1 ORDER BY datelimite DESC, f.ref_supplier DESC  LIMIT 5
2017-05-05 14:26:18 DEBUG   10.10.0.249     box_factures_fourn_imp::showBox
2017-05-05 14:26:18 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.code_fournisseur, s.logo, f.rowid as facid, f.ref, f.ref_supplier, f.total_ht, f.total_tva, f.total_ttc, f.paye, f.fk_statut, f.datef as df, f.datec as datec, f.date_lim_reglement as datelimite, f.tms, f.type FROM llx_societe as s, llx_facture_fourn as f WHERE f.fk_soc = s.rowid AND f.entity = 1 ORDER BY f.tms DESC, f.ref DESC  LIMIT 5
2017-05-05 14:26:18 DEBUG   10.10.0.249     FactureFournisseur::fetch
2017-05-05 14:26:18 DEBUG   10.10.0.249     sql=SELECT t.rowid, t.ref, t.ref_supplier, t.entity, t.type, t.fk_soc, t.datec, t.datef, t.tms, t.libelle, t.paye, t.amount, t.remise, t.close_code, t.close_note, t.tva, t.localtax1, t.localtax2, t.total, t.total_ht, t.total_tva, t.total_ttc, t.fk_statut, t.fk_user_author, t.fk_user_valid, t.fk_facture_source, t.fk_projet, t.fk_cond_reglement, t.fk_account, t.fk_mode_reglement, t.date_lim_reglement, t.note_private, t.note_public, t.model_pdf, t.import_key, t.extraparams, cr.code as cond_reglement_code, cr.libelle as cond_reglement_libelle, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, s.nom as socnom, s.rowid as socid, t.fk_incoterms, t.location_incoterms, i.libelle as libelle_incoterms, t.fk_multicurrency, t.multicurrency_code, t.multicurrency_tx, t.multicurrency_total_ht, t.multicurrency_total_tva, t.multicurrency_total_ttc FROM llx_facture_fourn as t LEFT JOIN llx_societe as s ON (t.fk_soc = s.rowid) LEFT JOIN llx_c_payment_term as cr ON (t.fk_cond_reglement = cr.rowid) LEFT JOIN llx_c_paiement as p ON (t.fk_mode_reglement = p.id) LEFT JOIN llx_c_incoterms as i ON t.fk_incoterms = i.rowid WHERE t.rowid=1
2017-05-05 14:26:18 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture_fourn' ORDER BY pos
2017-05-05 14:26:19 DEBUG   10.10.0.249     FactureFournisseur::fetch_lines
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT f.rowid, f.ref as ref_supplier, f.description, f.pu_ht, f.pu_ttc, f.qty, f.remise_percent, f.tva_tx, f.localtax1_tx, f.localtax2_tx, f.total_localtax1, f.total_localtax2 , f.total_ht, f.tva as total_tva, f.total_ttc, f.fk_product, f.product_type, f.info_bits, f.rang, f.special_code, f.fk_parent_line, f.fk_unit, p.rowid as product_id, p.ref as product_ref, p.label as label, p.description as product_desc, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_subprice, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc FROM llx_facture_fourn_det as f LEFT JOIN llx_product as p ON f.fk_product = p.rowid WHERE fk_facture_fourn=1 ORDER BY f.rang, f.rowid
2017-05-05 14:26:19 DEBUG   10.10.0.249     FactureFournisseur::getSommePaiement
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiementfourn_facturefourn WHERE fk_facturefourn = 1
2017-05-05 14:26:19 DEBUG   10.10.0.249     box_factures_fourn::showBox
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.code_client, s.code_fournisseur, s.logo, c.ref, c.tms, c.rowid, c.date_commande, c.total_ht, c.tva as total_tva, c.total_ttc, c.fk_statut FROM llx_societe as s, llx_commande_fournisseur as c WHERE c.fk_soc = s.rowid AND c.entity = 1 ORDER BY c.tms DESC, c.ref DESC  LIMIT 5
2017-05-05 14:26:19 DEBUG   10.10.0.249     box_supplier_orders::showBox
2017-05-05 14:26:19 DEBUG   10.10.0.249     Box_actions::loadBox
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT a.id, a.label, a.datep as dp, a.percent as percentage, ta.code, ta.libelle as type_label, s.nom as name, s.rowid as socid, s.code_client FROM (llx_c_actioncomm AS ta, llx_actioncomm AS a) LEFT JOIN llx_societe as s ON a.fk_soc = s.rowid WHERE a.fk_action = ta.id AND a.entity = 1 AND a.percent >= 0 AND a.percent < 100 ORDER BY a.datec DESC LIMIT 5
2017-05-05 14:26:19 DEBUG   10.10.0.249     box_actions::showBox
2017-05-05 14:26:19 DEBUG   10.10.0.249     FactureStats::getAmountByMonthWithPrevYear read data from cache file c:/dolibarr/dolibarr_documents/users/temp/FactureStats_getAmountByMonthWithPrevYear_customer_es_ES_entity.1_user1.cache 1493994180.
2017-05-05 14:26:19 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=
2017-05-05 14:26:19 DEBUG   10.10.0.249     box_graph_invoices_permonth::showBox
2017-05-05 14:26:19 DEBUG   10.10.0.249     ModeleBoxes::showBox
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT f.rowid as facid, f.facnumber, f.type, f.total as total_ht, f.tva as total_tva, f.total_ttc, f.datef as df, f.paye, f.fk_statut, f.datec, f.tms, s.nom as name, s.rowid as socid, s.code_client, f.date_lim_reglement as datelimite FROM (llx_societe as s,llx_facture as f) WHERE f.fk_soc = s.rowid AND f.entity = 1 ORDER BY f.tms DESC, f.facnumber DESC  LIMIT 5
2017-05-05 14:26:19 DEBUG   10.10.0.249     box_factures::showBox
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.code_client, s.logo, f.facnumber, f.date_lim_reglement as datelimite, f.type, f.amount, f.datef as df, f.total as total_ht, f.tva as total_tva, f.total_ttc, f.paye, f.fk_statut, f.rowid as facid, sum(pf.amount) as am FROM llx_societe as s,llx_facture as f LEFT JOIN llx_paiement_facture as pf ON f.rowid=pf.fk_facture  WHERE f.fk_soc = s.rowid AND f.entity = 1 AND f.paye = 0 AND fk_statut = 1 GROUP BY s.nom, s.rowid, s.code_client, s.logo, f.facnumber, f.date_lim_reglement, f.type, f.amount, f.datef, f.total, f.tva, f.total_ttc, f.paye, f.fk_statut, f.rowid ORDER BY datelimite ASC, f.facnumber ASC  LIMIT 5
2017-05-05 14:26:19 DEBUG   10.10.0.249     box_factures_imp::showBox
2017-05-05 14:26:19 DEBUG   10.10.0.249     box_prospect::loadBox
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.code_client, s.client, s.code_fournisseur, s.fournisseur, s.logo, s.fk_stcomm, s.datec, s.tms, s.status FROM llx_societe as s WHERE s.client IN (2, 3) AND s.entity IN (1) ORDER BY s.tms DESC LIMIT 5
2017-05-05 14:26:19 DEBUG   10.10.0.249     box_prospect::showBox
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT sp.rowid as id, sp.lastname, sp.firstname, sp.civility as civility_id, sp.datec, sp.tms, sp.fk_soc, sp.statut as status, sp.address, sp.zip, sp.town, sp.phone, sp.phone_perso, sp.phone_mobile, s.nom as socname, s.name_alias, s.client, s.fournisseur, s.code_client, s.code_fournisseur FROM llx_socpeople as sp LEFT JOIN llx_societe as s ON sp.fk_soc = s.rowid WHERE sp.entity IN (1) ORDER BY sp.tms DESC LIMIT 5
2017-05-05 14:26:19 DEBUG   10.10.0.249     box_contacts::showBox
2017-05-05 14:26:19 DEBUG   10.10.0.249     FactureStats::getAllByProductEntry read data from cache file c:/dolibarr/dolibarr_documents/users/temp/FactureStats_getAllByProductEntry_customer_es_ES_entity.1_user1.cache 1493994181.
2017-05-05 14:26:19 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=pie
2017-05-05 14:26:19 DEBUG   10.10.0.249     PropaleStats::getAllByProductEntry read data from cache file c:/dolibarr/dolibarr_documents/users/temp/PropaleStats_getAllByProductEntry_es_ES_entity.1_user1.cache 1493994181.
2017-05-05 14:26:19 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=pie
2017-05-05 14:26:19 DEBUG   10.10.0.249     CommandeStats::getAllByProductEntry read data from cache file c:/dolibarr/dolibarr_documents/users/temp/CommandeStats_getAllByProductEntry_customer_es_ES_entity.1_user1.cache 1493994181.
2017-05-05 14:26:19 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=pie
2017-05-05 14:26:19 DEBUG   10.10.0.249     box_graph_product_distribution::showBox
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT a.rowid, a.lastname, a.firstname, a.societe as company, a.fk_soc, a.datec, a.tms, a.statut as status, a.datefin as date_end_subscription, t.cotisation FROM llx_adherent as a, llx_adherent_type as t WHERE a.entity = 1 AND a.fk_adherent_type = t.rowid ORDER BY a.tms DESC LIMIT 5
2017-05-05 14:26:19 DEBUG   10.10.0.249     box_members::showBox
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, c.rowid, c.ref, c.statut as fk_statut, c.date_contrat, c.datec, c.fin_validite, c.date_cloture FROM llx_societe as s, llx_contrat as c WHERE c.fk_soc = s.rowid AND c.entity = 1 ORDER BY c.tms DESC, c.ref DESC  LIMIT 5
2017-05-05 14:26:19 DEBUG   10.10.0.249     box_contracts::showBox
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT  c.rowid, c.ref, c.statut as fk_statut, c.date_contrat, s.nom as name, s.rowid as socid, MIN(cd.date_fin_validite) as date_line, COUNT(cd.rowid) as nb_services FROM llx_contrat as c, llx_societe s, llx_contratdet as cd WHERE cd.statut = 4 AND cd.date_fin_validite <= '20170505142619' AND c.entity = 1 AND c.fk_soc=s.rowid AND cd.fk_contrat=c.rowid AND c.statut > 0 GROUP BY c.rowid, c.ref, c.statut, c.date_contrat, s.nom, s.rowid ORDER BY date_line ASC LIMIT 5
2017-05-05 14:26:19 DEBUG   10.10.0.249     box_services_expired::showBox
2017-05-05 14:26:19 DEBUG   10.10.0.249     box_ficheinter::loadBox
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT f.rowid, f.ref, f.fk_soc, f.fk_statut, f.datec, f.date_valid as datev, f.tms as datem, s.nom as name, s.rowid as socid, s.client FROM llx_societe as s, llx_fichinter as f WHERE f.fk_soc = s.rowid  AND f.entity = 1 ORDER BY f.tms DESC LIMIT 5
2017-05-05 14:26:19 DEBUG   10.10.0.249     box_ficheinter::showBox
2017-05-05 14:26:19 DEBUG   10.10.0.249     PropaleStats::getAmountByMonthWithPrevYear read data from cache file c:/dolibarr/dolibarr_documents/users/temp/PropaleStats_getAmountByMonthWithPrevYear_es_ES_entity.1_user1.cache 1493994181.
2017-05-05 14:26:19 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=bars,bars
2017-05-05 14:26:19 DEBUG   10.10.0.249     box_graph_propales_permonth::showBox
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.code_client, s.logo, p.rowid, p.ref, p.fk_statut, p.datep as dp, p.datec, p.fin_validite, p.date_cloture, p.total_ht, p.tva as total_tva, p.total as total_ttc, p.tms FROM llx_societe as s, llx_propal as p WHERE p.fk_soc = s.rowid AND p.entity = 1 ORDER BY p.tms DESC, p.ref DESC  LIMIT 5
2017-05-05 14:26:19 DEBUG   10.10.0.249     box_propales::showBox
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT b.title, b.url, b.target, b.favicon FROM llx_bookmark as b WHERE fk_user = 1 AND b.entity = 1 ORDER BY position ASC LIMIT 5
2017-05-05 14:26:19 DEBUG   10.10.0.249     box_bookmarks::showBox
2017-05-05 14:26:19 DEBUG   10.10.0.249     ModeleBoxes::showBox
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT count(u.rowid) as nb FROM llx_user as u WHERE u.statut > 0 AND u.entity IN (0,1)
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT count(s.rowid) as nb, s.client FROM llx_societe as s WHERE s.client IN (1,2,3) AND s.entity IN (1) GROUP BY s.client
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT count(s.rowid) as nb FROM llx_societe as s WHERE s.fournisseur = 1 AND s.entity IN (1)
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT count(sp.rowid) as nb FROM llx_socpeople as sp LEFT JOIN llx_societe as s ON (sp.fk_soc = s.rowid) WHERE s.entity IN (1)
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT count(a.rowid) as nb FROM llx_adherent as a WHERE a.statut > 0 AND a.entity IN (1)
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT count(p.rowid) as nb FROM llx_product as p WHERE p.entity IN (1) AND p.fk_product_type = 1
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT count(p.rowid) as nb FROM llx_propal as p LEFT JOIN llx_societe as s ON p.fk_soc = s.rowid WHERE p.entity IN (1)
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT count(co.rowid) as nb FROM llx_commande as co LEFT JOIN llx_societe as s ON co.fk_soc = s.rowid WHERE co.entity IN (1)
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT count(f.rowid) as nb FROM llx_facture as f LEFT JOIN llx_societe as s ON f.fk_soc = s.rowid WHERE f.entity = 1
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT count(c.rowid) as nb FROM llx_contrat as c LEFT JOIN llx_societe as s ON c.fk_soc = s.rowid WHERE c.entity = 1
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT count(fi.rowid) as nb FROM llx_fichinter as fi LEFT JOIN llx_societe as s ON fi.fk_soc = s.rowid WHERE fi.entity IN (1)
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT count(co.rowid) as nb FROM llx_commande_fournisseur as co LEFT JOIN llx_societe as s ON co.fk_soc = s.rowid WHERE co.entity = 1
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT count(f.rowid) as nb FROM llx_facture_fourn as f LEFT JOIN llx_societe as s ON f.fk_soc = s.rowid WHERE f.entity = 1
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT count(p.rowid) as nb FROM llx_supplier_proposal as p LEFT JOIN llx_societe as s ON p.fk_soc = s.rowid WHERE p.entity = 1
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT count(ex.rowid) as nb FROM llx_expensereport as ex WHERE ex.fk_statut > 0 AND ex.entity IN (1)
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT a.id, a.datep as dp FROM (llx_actioncomm as a) LEFT JOIN llx_societe as s ON a.fk_soc = s.rowid WHERE a.percent >= 0 AND a.percent < 100 AND a.entity IN (1)
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT p.rowid, p.ref, p.datec as datec, p.fin_validite as datefin FROM llx_propal as p WHERE p.entity IN (1) AND p.fk_statut = 1
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT p.rowid, p.ref, p.datec as datec, p.fin_validite as datefin FROM llx_propal as p WHERE p.entity IN (1) AND p.fk_statut = 2
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT p.rowid, p.ref, p.datec as datec FROM llx_supplier_proposal as p WHERE p.entity = 1 AND p.fk_statut = 1
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT p.rowid, p.ref, p.datec as datec FROM llx_supplier_proposal as p WHERE p.entity = 1 AND p.fk_statut = 2
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT c.rowid, c.date_creation as datec, c.date_commande, c.date_livraison as delivery_date, c.fk_statut FROM llx_commande as c WHERE c.entity IN (1) AND ((c.fk_statut IN (1,2)) OR (c.fk_statut = 3 AND c.facture = 0))
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT c.rowid, c.date_creation as datec, c.date_commande, c.fk_statut, c.date_livraison as delivery_date FROM llx_commande_fournisseur as c WHERE c.entity = 1 AND (c.fk_statut BETWEEN 1 AND 2)
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT cd.rowid, cd.date_ouverture_prevue as datefin FROM llx_contrat as c, llx_contratdet as cd, llx_societe as s WHERE c.statut = 1 AND c.rowid = cd.fk_contrat AND cd.statut = 0 AND c.fk_soc = s.rowid AND c.entity = 1
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT cd.rowid, cd.date_fin_validite as datefin FROM llx_contrat as c, llx_contratdet as cd, llx_societe as s WHERE c.statut = 1 AND c.rowid = cd.fk_contrat AND cd.statut = 4 AND cd.date_fin_validite < '20170505142619' AND c.fk_soc = s.rowid AND c.entity = 1
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT f.rowid, f.date_lim_reglement as datefin,f.fk_statut FROM llx_facture as f WHERE f.paye=0 AND f.entity = 1 AND f.fk_statut = 1
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT ff.rowid, ff.date_lim_reglement as datefin, ff.fk_statut FROM llx_facture_fourn as ff WHERE ff.paye=0 AND ff.fk_statut > 0 AND ff.entity = 1
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT COUNT(ba.rowid) as nb FROM llx_bank_account as ba WHERE ba.rappro > 0 and ba.clos = 0 AND ba.entity IN (1) AND ba.courant != 2
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT b.rowid, b.datev as datefin FROM llx_bank as b, llx_bank_account as ba WHERE b.rappro=0 AND b.fk_account = ba.rowid AND ba.entity IN (1) AND (ba.rappro = 1 AND ba.courant != 2) AND clos = 0
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT b.rowid, b.datev as datefin FROM llx_bank as b, llx_bank_account as ba WHERE b.fk_account = ba.rowid AND ba.entity IN (1) AND b.fk_type = 'CHQ' AND b.fk_bordereau = 0 AND b.amount > 0
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT a.rowid, a.datefin, a.statut FROM llx_adherent as a WHERE a.statut = 1 AND a.entity IN (1) AND (a.datefin IS NULL or a.datefin < '20170505142619')
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT ex.rowid, ex.date_valid FROM llx_expensereport as ex WHERE ex.fk_statut = 2 AND ex.entity IN (1)
2017-05-05 14:26:19 DEBUG   10.10.0.249     sql=SELECT ex.rowid, ex.date_valid FROM llx_expensereport as ex WHERE ex.fk_statut = 5 AND ex.entity IN (1)
2017-05-05 14:26:19 DEBUG   10.10.0.249     --- End access to /dolibarr/index.php
2017-05-05 14:26:27 DEBUG   10.10.0.249     This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:26:27 DEBUG   10.10.0.249     User::fetch
2017-05-05 14:26:27 DEBUG   10.10.0.249     sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:26:27 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:26:27 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:26:27 DEBUG   10.10.0.249     sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:26:27 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:26:27 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:26:27 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:26:27 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:26:27 DEBUG   10.10.0.249     --- Access to /dolibarr/admin/index.php
2017-05-05 14:26:27 DEBUG   10.10.0.249     sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:26:27 DEBUG   10.10.0.249     Menubase::menuLoad mymainmenu=home myleftmenu=setup type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:26:27 DEBUG   10.10.0.249     sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:26:27 DEBUG   10.10.0.249     sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:26:27 DEBUG   10.10.0.249     --- End access to /dolibarr/admin/index.php
2017-05-05 14:26:34 DEBUG   10.10.0.249     This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:26:34 DEBUG   10.10.0.249     User::fetch
2017-05-05 14:26:34 DEBUG   10.10.0.249     sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:26:34 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:26:34 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:26:34 DEBUG   10.10.0.249     sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:26:34 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:26:34 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:26:34 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:26:34 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:26:34 DEBUG   10.10.0.249     --- Access to /dolibarr/admin/company.php
2017-05-05 14:26:34 DEBUG   10.10.0.249     sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:26:34 DEBUG   10.10.0.249     Menubase::menuLoad mymainmenu=home myleftmenu=setup type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:26:34 DEBUG   10.10.0.249     sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:26:34 DEBUG   10.10.0.249     sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:26:34 DEBUG   10.10.0.249     Company.lib::getCountry
2017-05-05 14:26:34 DEBUG   10.10.0.249     sql=SELECT rowid, code, label FROM llx_c_country WHERE code='ES'
2017-05-05 14:26:34 DEBUG   10.10.0.249     Company.lib::getState
2017-05-05 14:26:34 DEBUG   10.10.0.249     sql=SELECT rowid, code_departement as code, nom as label FROM llx_c_departements WHERE rowid=524
2017-05-05 14:26:34 DEBUG   10.10.0.249     Translate::loadCacheCurrencies
2017-05-05 14:26:34 DEBUG   10.10.0.249     sql=SELECT code_iso, label, unicode FROM llx_c_currencies WHERE active = 1 AND code_iso = 'EUR'
2017-05-05 14:26:34 DEBUG   10.10.0.249     Company.lib::getFormeJuridiqueLabel
2017-05-05 14:26:34 DEBUG   10.10.0.249     sql=SELECT libelle FROM llx_c_forme_juridique WHERE code='415'
2017-05-05 14:26:34 DEBUG   10.10.0.249     useLocalTax
2017-05-05 14:26:34 DEBUG   10.10.0.249     sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax1_type <> '0'
2017-05-05 14:26:34 DEBUG   10.10.0.249     useLocalTax
2017-05-05 14:26:34 DEBUG   10.10.0.249     sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:26:34 DEBUG   10.10.0.249     --- End access to /dolibarr/admin/company.php
2017-05-05 14:27:01 DEBUG   10.10.0.249     This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:27:01 DEBUG   10.10.0.249     User::fetch
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:27:01 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:27:01 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:27:01 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:27:01 DEBUG   10.10.0.249     --- Access to /dolibarr/admin/company.php
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Menubase::menuLoad mymainmenu=home myleftmenu=setup type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:27:01 DEBUG   10.10.0.249     Form::select_country
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT rowid, code as code_iso, code_iso as code_iso3, label, favorite FROM llx_c_country WHERE active > 0
2017-05-05 14:27:01 DEBUG   10.10.0.249     FormCompany::select_departement selected=524, country_codeid=ES
2017-05-05 14:27:01 DEBUG   10.10.0.249     FormCompany::select_departement
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT d.rowid, d.code_departement as code, d.nom as name, d.active, c.label as country, c.code as country_code FROM llx_c_departements as d, llx_c_regions as r,llx_c_country as c WHERE d.fk_region=r.code_region and r.fk_pays=c.rowid AND d.active = 1 AND r.active = 1 AND c.active = 1 AND c.code = 'ES' ORDER BY c.code, d.code_departement
2017-05-05 14:27:01 DEBUG   10.10.0.249     FormCompany::select_departement num=52
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::loadCacheCurrencies
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT code_iso, label, unicode FROM llx_c_currencies WHERE active = 1
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'AED'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'AFN'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'ALL'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'ANG'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'ARS'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'AWG'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'AZN'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'BAM'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'BBD'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'BGN'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'BMD'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'BND'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'BOB'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'BRL'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'BSD'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'BWP'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'BYR'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'BZD'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'CLP'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'CNY'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'COP'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'CRC'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'CUP'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'CZK'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'DKK'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'DOP'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'DZD'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'EEK'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'EGP'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'FJD'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'FKP'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'GGP'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'GHC'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'GIP'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'GNF'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'GTQ'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'GYD'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'HKD'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'HNL'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'HRK'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'HUF'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'IDR'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'ILS'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'IMP'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'IRR'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'ISK'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'JEP'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'JMD'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'JPY'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'KES'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'KGS'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'KHR'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'KPW'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'KRW'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'KYD'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'KZT'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'LAK'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'LBP'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'LKR'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'LRD'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'LTL'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'LVL'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'MKD'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'MNT'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'MRO'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'MXN'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'MYR'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'MZN'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'NAD'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'NGN'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'NIO'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'NPR'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'NZD'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'OMR'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'PAB'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'PEN'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'PHP'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'PKR'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'PLN'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'PYG'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'QAR'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'RON'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'RSD'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'RUB'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'SAR'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'SBD'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'SCR'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'SEK'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'SGD'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'SHP'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'SOS'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'SRD'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'SVC'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'SYP'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'THB'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'TRL'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'TRY'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'TTD'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'TVD'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'TWD'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'UYU'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'UZS'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'VEF'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'VND'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'XCD'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'YER'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'ZAR'
2017-05-05 14:27:01 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT label as label FROM llx_c_currencies WHERE code_iso = 'ZWD'
2017-05-05 14:27:01 DEBUG   10.10.0.249     FormCompany::select_juridicalstatus
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT f.rowid, f.code as code , f.libelle as label, f.active, c.label as country, c.code as country_code FROM llx_c_forme_juridique as f, llx_c_country as c WHERE f.fk_pays=c.rowid AND f.active = 1 AND c.active = 1 AND c.code = 'ES' ORDER BY c.code
2017-05-05 14:27:01 DEBUG   10.10.0.249     useLocalTax
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax1_type <> '0'
2017-05-05 14:27:01 DEBUG   10.10.0.249     sql=SELECT t.localtax1, t.localtax2  FROM llx_c_tva as t inner join llx_c_country as c ON c.rowid=t.fk_pays WHERE c.code = 'ES' AND t.active = 1 AND t.taux=(  SELECT max(tt.taux) FROM llx_c_tva as tt inner join llx_c_country as c ON c.rowid=tt.fk_pays  WHERE c.code = 'ES' AND tt.active = 1  )
2017-05-05 14:27:02 DEBUG   10.10.0.249     useLocalTax
2017-05-05 14:27:02 DEBUG   10.10.0.249     sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:27:02 DEBUG   10.10.0.249     sql=SELECT t.localtax1, t.localtax2  FROM llx_c_tva as t inner join llx_c_country as c ON c.rowid=t.fk_pays WHERE c.code = 'ES' AND t.active = 1 AND t.taux=(  SELECT max(tt.taux) FROM llx_c_tva as tt inner join llx_c_country as c ON c.rowid=tt.fk_pays  WHERE c.code = 'ES' AND tt.active = 1  )
2017-05-05 14:27:02 DEBUG   10.10.0.249     sql=SELECT t.localtax1, t.localtax2  FROM llx_c_tva as t inner join llx_c_country as c ON c.rowid=t.fk_pays WHERE c.code = 'ES' AND t.active = 1 AND t.taux=(  SELECT max(tt.taux) FROM llx_c_tva as tt inner join llx_c_country as c ON c.rowid=tt.fk_pays  WHERE c.code = 'ES' AND tt.active = 1  )
2017-05-05 14:27:02 DEBUG   10.10.0.249     --- End access to /dolibarr/admin/company.php
2017-05-05 14:28:23 DEBUG   10.10.0.249     This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:28:23 DEBUG   10.10.0.249     User::fetch
2017-05-05 14:28:23 DEBUG   10.10.0.249     sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:28:23 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:28:23 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:28:23 DEBUG   10.10.0.249     sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:28:23 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:28:23 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:28:23 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:28:23 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:28:23 DEBUG   10.10.0.249     --- Access to /dolibarr/admin/company.php
2017-05-05 14:28:23 DEBUG   10.10.0.249     sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:28:23 DEBUG   10.10.0.249     Menubase::menuLoad mymainmenu=home myleftmenu=setup type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:28:23 DEBUG   10.10.0.249     sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:28:23 DEBUG   10.10.0.249     sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:28:23 DEBUG   10.10.0.249     Company.lib::getCountry
2017-05-05 14:28:23 DEBUG   10.10.0.249     sql=SELECT rowid, code, label FROM llx_c_country WHERE code='ES'
2017-05-05 14:28:23 DEBUG   10.10.0.249     Company.lib::getState
2017-05-05 14:28:23 DEBUG   10.10.0.249     sql=SELECT rowid, code_departement as code, nom as label FROM llx_c_departements WHERE rowid=524
2017-05-05 14:28:23 DEBUG   10.10.0.249     Translate::loadCacheCurrencies
2017-05-05 14:28:23 DEBUG   10.10.0.249     sql=SELECT code_iso, label, unicode FROM llx_c_currencies WHERE active = 1 AND code_iso = 'EUR'
2017-05-05 14:28:23 DEBUG   10.10.0.249     Company.lib::getFormeJuridiqueLabel
2017-05-05 14:28:23 DEBUG   10.10.0.249     sql=SELECT libelle FROM llx_c_forme_juridique WHERE code='415'
2017-05-05 14:28:23 DEBUG   10.10.0.249     useLocalTax
2017-05-05 14:28:23 DEBUG   10.10.0.249     sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax1_type <> '0'
2017-05-05 14:28:23 DEBUG   10.10.0.249     useLocalTax
2017-05-05 14:28:23 DEBUG   10.10.0.249     sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:28:23 DEBUG   10.10.0.249     --- End access to /dolibarr/admin/company.php
2017-05-05 14:30:56 DEBUG   10.10.0.249     This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:30:56 DEBUG   10.10.0.249     User::fetch
2017-05-05 14:30:56 DEBUG   10.10.0.249     sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:30:56 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:30:56 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:30:56 DEBUG   10.10.0.249     sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:30:56 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:30:56 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:30:56 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:30:56 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:30:56 DEBUG   10.10.0.249     --- Access to /dolibarr/admin/company.php
2017-05-05 14:30:56 DEBUG   10.10.0.249     sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:30:56 DEBUG   10.10.0.249     Menubase::menuLoad mymainmenu=home myleftmenu=setup type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:30:56 DEBUG   10.10.0.249     sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:30:56 DEBUG   10.10.0.249     sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:30:56 DEBUG   10.10.0.249     Company.lib::getCountry
2017-05-05 14:30:56 DEBUG   10.10.0.249     sql=SELECT rowid, code, label FROM llx_c_country WHERE code='ES'
2017-05-05 14:30:56 DEBUG   10.10.0.249     Company.lib::getState
2017-05-05 14:30:56 DEBUG   10.10.0.249     sql=SELECT rowid, code_departement as code, nom as label FROM llx_c_departements WHERE rowid=524
2017-05-05 14:30:56 DEBUG   10.10.0.249     Translate::loadCacheCurrencies
2017-05-05 14:30:56 DEBUG   10.10.0.249     sql=SELECT code_iso, label, unicode FROM llx_c_currencies WHERE active = 1 AND code_iso = 'EUR'
2017-05-05 14:30:56 DEBUG   10.10.0.249     Company.lib::getFormeJuridiqueLabel
2017-05-05 14:30:56 DEBUG   10.10.0.249     sql=SELECT libelle FROM llx_c_forme_juridique WHERE code='415'
2017-05-05 14:30:56 DEBUG   10.10.0.249     useLocalTax
2017-05-05 14:30:56 DEBUG   10.10.0.249     sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax1_type <> '0'
2017-05-05 14:30:56 DEBUG   10.10.0.249     useLocalTax
2017-05-05 14:30:56 DEBUG   10.10.0.249     sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:30:56 DEBUG   10.10.0.249     --- End access to /dolibarr/admin/company.php
2017-05-05 14:30:57 DEBUG   10.10.0.249     --- Access to /dolibarr/theme/eldy/style.css.php
2017-05-05 14:30:57 DEBUG   10.10.0.249     sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:30:57 DEBUG   10.10.0.249     Menubase::menuLoad mymainmenu=home myleftmenu=setup type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:30:57 DEBUG   10.10.0.249     sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:30:57 DEBUG   10.10.0.249     User::fetch
2017-05-05 14:30:57 DEBUG   10.10.0.249     sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:30:57 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:30:57 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:30:57 DEBUG   10.10.0.249     sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:30:57 DEBUG   10.10.0.249     --- End access to /dolibarr/theme/eldy/style.css.php
2017-05-05 14:30:59 DEBUG   10.10.0.249     --- Access to /dolibarr/core/js/lib_head.js.php
2017-05-05 14:30:59 DEBUG   10.10.0.249     sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:30:59 DEBUG   10.10.0.249     --- End access to /dolibarr/core/js/lib_head.js.php
2017-05-05 14:31:00 DEBUG   10.10.0.249     --- Access to /dolibarr/core/js/select2_locale.js.php
2017-05-05 14:31:00 DEBUG   10.10.0.249     sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:31:00 DEBUG   10.10.0.249     --- End access to /dolibarr/core/js/select2_locale.js.php
2017-05-05 14:31:01 DEBUG   10.10.0.249     --- Access to /dolibarr/core/js/datepicker.js.php
2017-05-05 14:31:01 DEBUG   10.10.0.249     sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:31:01 DEBUG   10.10.0.249     --- End access to /dolibarr/core/js/datepicker.js.php
2017-05-05 14:31:02 DEBUG   10.10.0.249     --- Access to /dolibarr/viewimage.php
2017-05-05 14:31:02 DEBUG   10.10.0.249     modulepart=companylogo original_file=thumbs/ajuntament_mini.png
2017-05-05 14:31:02 DEBUG   10.10.0.249     viewimage.php return file c:/dolibarr/dolibarr_documents/mycompany/logos/thumbs/ajuntament_mini.png content-type=image/png
2017-05-05 14:31:02 DEBUG   10.10.0.249     --- End access to /dolibarr/viewimage.php
2017-05-05 14:31:03 DEBUG   10.10.0.249     --- Access to /dolibarr/viewimage.php
2017-05-05 14:31:03 DEBUG   10.10.0.249     modulepart=companylogo original_file=/thumbs/ajuntament_mini.png
2017-05-05 14:31:03 DEBUG   10.10.0.249     viewimage.php return file c:/dolibarr/dolibarr_documents/mycompany/logos//thumbs/ajuntament_mini.png content-type=image/png
2017-05-05 14:31:03 DEBUG   10.10.0.249     --- End access to /dolibarr/viewimage.php
2017-05-05 14:31:31 DEBUG   10.10.0.249     This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:31:31 DEBUG   10.10.0.249     User::fetch
2017-05-05 14:31:31 DEBUG   10.10.0.249     sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:31:31 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:31:31 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:31:31 DEBUG   10.10.0.249     sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:31:31 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:31:31 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:31:31 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:31:31 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:31:31 DEBUG   10.10.0.249     --- Access to /dolibarr/user/logout.php
2017-05-05 14:31:31 DEBUG   10.10.0.249     sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:31:31 DEBUG   10.10.0.249     Interfaces::run_triggers action=USER_LOGOUT Triggers for file 'interface_20_modPaypal_PaypalWorkflow.class.php' need module to be enabled
2017-05-05 14:31:31 DEBUG   10.10.0.249     Interfaces::run_triggers action=USER_LOGOUT Launch runTrigger for file 'interface_20_all_Logevents.class.php'
2017-05-05 14:31:31 DEBUG   10.10.0.249     Interfaces::run_triggers action=USER_LOGOUT Launch runTrigger for file 'interface_20_modWorkflow_WorkflowManager.class.php'
2017-05-05 14:31:31 DEBUG   10.10.0.249     Interfaces::run_triggers action=USER_LOGOUT Launch runTrigger for file 'interface_50_modAgenda_ActionsAuto.class.php'
2017-05-05 14:31:31 DEBUG   10.10.0.249     Interfaces::run_triggers action=USER_LOGOUT Launch runTrigger for file 'interface_50_modLdap_Ldapsynchro.class.php'
2017-05-05 14:31:31 DEBUG   10.10.0.249     Interfaces::run_triggers action=USER_LOGOUT Launch runTrigger for file 'interface_50_modMailmanspip_Mailmanspipsynchro.class.php'
2017-05-05 14:31:31 DEBUG   10.10.0.249     Interfaces::run_triggers action=USER_LOGOUT Launch runTrigger for file 'interface_50_modNotification_Notification.class.php'
2017-05-05 14:31:31 DEBUG   10.10.0.249     Trigger 'Notification' for action 'USER_LOGOUT' launched by C:\dolibarr\www\dolibarr\htdocs\core\triggers\interface_50_modNotification_Notification.class.php. id=1
2017-05-05 14:31:31 DEBUG   10.10.0.249     Notify::send notifcode=USER_LOGOUT, object=1
2017-05-05 14:31:31 DEBUG   10.10.0.249     End of session DOLSESSID_661d1f4e5817ceb6b021b8974f732088
2017-05-05 14:31:31 DEBUG   10.10.0.249     --- End access to /dolibarr/user/logout.php
2017-05-05 14:31:32 DEBUG   10.10.0.249     --- Access to /dolibarr/index.php showing the login form and exit
2017-05-05 14:31:32 DEBUG   10.10.0.249     sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:31:32 DEBUG   10.10.0.249     --- End access to /dolibarr/index.php
2017-05-05 14:31:34 DEBUG   10.10.0.249     --- Access to /dolibarr/viewimage.php
2017-05-05 14:31:34 DEBUG   10.10.0.249     modulepart=companylogo original_file=thumbs/ajuntament_small.png
2017-05-05 14:31:34 DEBUG   10.10.0.249     viewimage.php return file c:/dolibarr/dolibarr_documents/mycompany/logos/thumbs/ajuntament_small.png content-type=image/png
2017-05-05 14:31:34 DEBUG   10.10.0.249     --- End access to /dolibarr/viewimage.php
2017-05-05 14:31:36 DEBUG   10.10.0.249     checkLoginPassEntity usertotest=apperture entitytotest=1 authmode=dolibarr
2017-05-05 14:31:36 DEBUG   10.10.0.249     functions_dolibarr::check_user_password_dolibarr usertotest=apperture passwordtotest=****** entitytotest=1
2017-05-05 14:31:36 DEBUG   10.10.0.249     sql=SELECT rowid, login, entity, pass, pass_crypted FROM llx_user WHERE (login = 'apperture') AND entity IN (0,1) AND statut = 1
2017-05-05 14:31:36 DEBUG   10.10.0.249     functions_dolibarr::check_user_password_dolibarr Authentification ok - md5 of pass is ok
2017-05-05 14:31:36 DEBUG   10.10.0.249     User::fetch
2017-05-05 14:31:36 DEBUG   10.10.0.249     sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IN (0, 1) AND u.login = 'apperture'
2017-05-05 14:31:36 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:31:36 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:31:36 DEBUG   10.10.0.249     sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:31:36 DEBUG   10.10.0.249     This is a new started user session. _SESSION['dol_login']=apperture Session id=9rv5i4hkpuniq4fn4bdg16kop3
2017-05-05 14:31:36 DEBUG   10.10.0.249     BEGIN Transaction
2017-05-05 14:31:36 DEBUG   10.10.0.249      User::update_last_login_date user->id=1 UPDATE llx_user SET datepreviouslogin = datelastlogin, datelastlogin = '20170505143136', tms = tms WHERE rowid = 1
2017-05-05 14:31:36 DEBUG   10.10.0.249      sql=UPDATE llx_user SET datepreviouslogin = datelastlogin, datelastlogin = '20170505143136', tms = tms WHERE rowid = 1
2017-05-05 14:31:36 DEBUG   10.10.0.249      Interfaces::run_triggers action=USER_LOGIN Triggers for file 'interface_20_modPaypal_PaypalWorkflow.class.php' need module to be enabled
2017-05-05 14:31:36 DEBUG   10.10.0.249      Interfaces::run_triggers action=USER_LOGIN Launch runTrigger for file 'interface_20_all_Logevents.class.php'
2017-05-05 14:31:36 DEBUG   10.10.0.249      Interfaces::run_triggers action=USER_LOGIN Launch runTrigger for file 'interface_20_modWorkflow_WorkflowManager.class.php'
2017-05-05 14:31:36 DEBUG   10.10.0.249      Interfaces::run_triggers action=USER_LOGIN Launch runTrigger for file 'interface_50_modAgenda_ActionsAuto.class.php'
2017-05-05 14:31:36 DEBUG   10.10.0.249      Interfaces::run_triggers action=USER_LOGIN Launch runTrigger for file 'interface_50_modLdap_Ldapsynchro.class.php'
2017-05-05 14:31:36 DEBUG   10.10.0.249      Interfaces::run_triggers action=USER_LOGIN Launch runTrigger for file 'interface_50_modMailmanspip_Mailmanspipsynchro.class.php'
2017-05-05 14:31:36 DEBUG   10.10.0.249      Interfaces::run_triggers action=USER_LOGIN Launch runTrigger for file 'interface_50_modNotification_Notification.class.php'
2017-05-05 14:31:36 DEBUG   10.10.0.249      Trigger 'Notification' for action 'USER_LOGIN' launched by C:\dolibarr\www\dolibarr\htdocs\core\triggers\interface_50_modNotification_Notification.class.php. id=1
2017-05-05 14:31:36 DEBUG   10.10.0.249      Notify::send notifcode=USER_LOGIN, object=1
2017-05-05 14:31:36 DEBUG   10.10.0.249      sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:31:36 DEBUG   10.10.0.249     COMMIT Transaction
2017-05-05 14:31:36 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:31:36 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:31:36 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:31:36 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:31:36 DEBUG   10.10.0.249     --- Access to /dolibarr/index.php
2017-05-05 14:31:36 DEBUG   10.10.0.249     Menubase::menuLoad mymainmenu=home myleftmenu= type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:31:36 DEBUG   10.10.0.249     sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:31:36 DEBUG   10.10.0.249     sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:31:36 DEBUG   10.10.0.249     InfoBox::listBoxes get default box list for mode=activated userid=
2017-05-05 14:31:36 DEBUG   10.10.0.249     sql=SELECT b.rowid, b.position, b.box_order, b.fk_user, d.rowid as box_id, d.file, d.note, d.tms FROM llx_boxes as b, llx_boxes_def as d WHERE b.box_id = d.rowid AND b.entity IN (0,1) AND b.position = 0 AND b.fk_user = 0 ORDER BY b.box_order
2017-05-05 14:31:37 DEBUG   10.10.0.249     box_clients::loadBox
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.code_client, s.client, s.code_fournisseur, s.fournisseur, s.logo, s.datec, s.tms, s.status FROM llx_societe as s WHERE s.client IN (1, 3) AND s.entity IN (1) ORDER BY s.tms DESC LIMIT 5
2017-05-05 14:31:37 DEBUG   10.10.0.249     box_clients::showBox
2017-05-05 14:31:37 DEBUG   10.10.0.249     box_comptes::loadBox
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT rowid, ref, label, bank, number, courant, clos, rappro, url, code_banque, code_guichet, cle_rib, bic, iban_prefix as iban, domiciliation, proprio, owner_address, account_number, currency_code, min_allowed, min_desired, comment FROM llx_bank_account WHERE entity = 1 AND clos = 0 ORDER BY label LIMIT 5
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT sum(amount) as amount FROM llx_bank WHERE fk_account = 1
2017-05-05 14:31:37 DEBUG   10.10.0.249     Translate::loadCacheCurrencies
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT code_iso, label, unicode FROM llx_c_currencies WHERE active = 1 AND code_iso = 'EUR'
2017-05-05 14:31:37 DEBUG   10.10.0.249     box_comptes::showBox
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, c.rowid, c.ref, c.statut as contract_status, cd.rowid as cdid, cd.tms as datem, cd.statut, cd.label, cd.description, cd.product_type as type, p.rowid as product_id, p.ref as product_ref FROM (llx_societe as s, llx_contrat as c, llx_contratdet as cd LEFT JOIN llx_product as p ON cd.fk_product = p.rowid) WHERE c.entity = 1 AND s.rowid = c.fk_soc AND c.rowid = cd.fk_contrat ORDER BY c.tms DESC LIMIT 5
2017-05-05 14:31:37 DEBUG   10.10.0.249     box_services_contracts::showBox
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.code_client, s.logo, c.ref, c.tms, c.rowid, c.date_commande, c.ref_client, c.fk_statut, c.fk_user_valid, c.facture, c.total_ht, c.tva as total_tva, c.total_ttc FROM llx_societe as s, llx_commande as c WHERE c.fk_soc = s.rowid AND c.entity = 1 ORDER BY c.tms DESC, c.ref DESC  LIMIT 5
2017-05-05 14:31:37 DEBUG   10.10.0.249     box_commandes::showBox
2017-05-05 14:31:37 DEBUG   10.10.0.249     CommandeStats::getAmountByMonthWithPrevYear read data from cache file c:/dolibarr/dolibarr_documents/users/temp/CommandeStats_getAmountByMonthWithPrevYear_customer_es_ES_entity.1_user1.cache 1493994180.
2017-05-05 14:31:37 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=
2017-05-05 14:31:37 DEBUG   10.10.0.249     box_graph_orders_permonth::showBox
2017-05-05 14:31:37 DEBUG   10.10.0.249     FactureStats::getAmountByMonthWithPrevYear read data from cache file c:/dolibarr/dolibarr_documents/users/temp/FactureStats_getAmountByMonthWithPrevYear_supplier_es_ES_entity.1_user1.cache 1493994180.
2017-05-05 14:31:37 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=
2017-05-05 14:31:37 DEBUG   10.10.0.249     box_graph_invoices_supplier_permonth::showBox
2017-05-05 14:31:37 DEBUG   10.10.0.249     CommandeStats::getAmountByMonthWithPrevYear read data from cache file c:/dolibarr/dolibarr_documents/users/temp/CommandeStats_getAmountByMonthWithPrevYear_supplier_es_ES_entity.1_user1.cache 1493994180.
2017-05-05 14:31:37 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=
2017-05-05 14:31:37 DEBUG   10.10.0.249     box_graph_orders_supplier_permonth::showBox
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.datec, s.tms, s.status, s.code_fournisseur, s.logo FROM llx_societe as s WHERE s.fournisseur = 1 AND s.entity IN (1) ORDER BY s.tms DESC  LIMIT 5
2017-05-05 14:31:37 DEBUG   10.10.0.249     box_fournisseurs::showBox
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, f.rowid as facid, f.ref, f.ref_supplier, f.date_lim_reglement as datelimite, f.amount, f.datef as df, f.total_ht as total_ht, f.tva as total_tva, f.total_ttc, f.paye, f.fk_statut, f.type FROM llx_societe as s,llx_facture_fourn as f WHERE f.fk_soc = s.rowid AND f.entity = 1 AND f.paye=0 AND fk_statut = 1 ORDER BY datelimite DESC, f.ref_supplier DESC  LIMIT 5
2017-05-05 14:31:37 DEBUG   10.10.0.249     box_factures_fourn_imp::showBox
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.code_fournisseur, s.logo, f.rowid as facid, f.ref, f.ref_supplier, f.total_ht, f.total_tva, f.total_ttc, f.paye, f.fk_statut, f.datef as df, f.datec as datec, f.date_lim_reglement as datelimite, f.tms, f.type FROM llx_societe as s, llx_facture_fourn as f WHERE f.fk_soc = s.rowid AND f.entity = 1 ORDER BY f.tms DESC, f.ref DESC  LIMIT 5
2017-05-05 14:31:37 DEBUG   10.10.0.249     FactureFournisseur::fetch
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT t.rowid, t.ref, t.ref_supplier, t.entity, t.type, t.fk_soc, t.datec, t.datef, t.tms, t.libelle, t.paye, t.amount, t.remise, t.close_code, t.close_note, t.tva, t.localtax1, t.localtax2, t.total, t.total_ht, t.total_tva, t.total_ttc, t.fk_statut, t.fk_user_author, t.fk_user_valid, t.fk_facture_source, t.fk_projet, t.fk_cond_reglement, t.fk_account, t.fk_mode_reglement, t.date_lim_reglement, t.note_private, t.note_public, t.model_pdf, t.import_key, t.extraparams, cr.code as cond_reglement_code, cr.libelle as cond_reglement_libelle, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, s.nom as socnom, s.rowid as socid, t.fk_incoterms, t.location_incoterms, i.libelle as libelle_incoterms, t.fk_multicurrency, t.multicurrency_code, t.multicurrency_tx, t.multicurrency_total_ht, t.multicurrency_total_tva, t.multicurrency_total_ttc FROM llx_facture_fourn as t LEFT JOIN llx_societe as s ON (t.fk_soc = s.rowid) LEFT JOIN llx_c_payment_term as cr ON (t.fk_cond_reglement = cr.rowid) LEFT JOIN llx_c_paiement as p ON (t.fk_mode_reglement = p.id) LEFT JOIN llx_c_incoterms as i ON t.fk_incoterms = i.rowid WHERE t.rowid=1
2017-05-05 14:31:37 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture_fourn' ORDER BY pos
2017-05-05 14:31:37 DEBUG   10.10.0.249     FactureFournisseur::fetch_lines
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT f.rowid, f.ref as ref_supplier, f.description, f.pu_ht, f.pu_ttc, f.qty, f.remise_percent, f.tva_tx, f.localtax1_tx, f.localtax2_tx, f.total_localtax1, f.total_localtax2 , f.total_ht, f.tva as total_tva, f.total_ttc, f.fk_product, f.product_type, f.info_bits, f.rang, f.special_code, f.fk_parent_line, f.fk_unit, p.rowid as product_id, p.ref as product_ref, p.label as label, p.description as product_desc, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_subprice, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc FROM llx_facture_fourn_det as f LEFT JOIN llx_product as p ON f.fk_product = p.rowid WHERE fk_facture_fourn=1 ORDER BY f.rang, f.rowid
2017-05-05 14:31:37 DEBUG   10.10.0.249     FactureFournisseur::getSommePaiement
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiementfourn_facturefourn WHERE fk_facturefourn = 1
2017-05-05 14:31:37 DEBUG   10.10.0.249     box_factures_fourn::showBox
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.code_client, s.code_fournisseur, s.logo, c.ref, c.tms, c.rowid, c.date_commande, c.total_ht, c.tva as total_tva, c.total_ttc, c.fk_statut FROM llx_societe as s, llx_commande_fournisseur as c WHERE c.fk_soc = s.rowid AND c.entity = 1 ORDER BY c.tms DESC, c.ref DESC  LIMIT 5
2017-05-05 14:31:37 DEBUG   10.10.0.249     box_supplier_orders::showBox
2017-05-05 14:31:37 DEBUG   10.10.0.249     Box_actions::loadBox
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT a.id, a.label, a.datep as dp, a.percent as percentage, ta.code, ta.libelle as type_label, s.nom as name, s.rowid as socid, s.code_client FROM (llx_c_actioncomm AS ta, llx_actioncomm AS a) LEFT JOIN llx_societe as s ON a.fk_soc = s.rowid WHERE a.fk_action = ta.id AND a.entity = 1 AND a.percent >= 0 AND a.percent < 100 ORDER BY a.datec DESC LIMIT 5
2017-05-05 14:31:37 DEBUG   10.10.0.249     box_actions::showBox
2017-05-05 14:31:37 DEBUG   10.10.0.249     FactureStats::getAmountByMonthWithPrevYear read data from cache file c:/dolibarr/dolibarr_documents/users/temp/FactureStats_getAmountByMonthWithPrevYear_customer_es_ES_entity.1_user1.cache 1493994180.
2017-05-05 14:31:37 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=
2017-05-05 14:31:37 DEBUG   10.10.0.249     box_graph_invoices_permonth::showBox
2017-05-05 14:31:37 DEBUG   10.10.0.249     ModeleBoxes::showBox
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT f.rowid as facid, f.facnumber, f.type, f.total as total_ht, f.tva as total_tva, f.total_ttc, f.datef as df, f.paye, f.fk_statut, f.datec, f.tms, s.nom as name, s.rowid as socid, s.code_client, f.date_lim_reglement as datelimite FROM (llx_societe as s,llx_facture as f) WHERE f.fk_soc = s.rowid AND f.entity = 1 ORDER BY f.tms DESC, f.facnumber DESC  LIMIT 5
2017-05-05 14:31:37 DEBUG   10.10.0.249     box_factures::showBox
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.code_client, s.logo, f.facnumber, f.date_lim_reglement as datelimite, f.type, f.amount, f.datef as df, f.total as total_ht, f.tva as total_tva, f.total_ttc, f.paye, f.fk_statut, f.rowid as facid, sum(pf.amount) as am FROM llx_societe as s,llx_facture as f LEFT JOIN llx_paiement_facture as pf ON f.rowid=pf.fk_facture  WHERE f.fk_soc = s.rowid AND f.entity = 1 AND f.paye = 0 AND fk_statut = 1 GROUP BY s.nom, s.rowid, s.code_client, s.logo, f.facnumber, f.date_lim_reglement, f.type, f.amount, f.datef, f.total, f.tva, f.total_ttc, f.paye, f.fk_statut, f.rowid ORDER BY datelimite ASC, f.facnumber ASC  LIMIT 5
2017-05-05 14:31:37 DEBUG   10.10.0.249     box_factures_imp::showBox
2017-05-05 14:31:37 DEBUG   10.10.0.249     box_prospect::loadBox
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.code_client, s.client, s.code_fournisseur, s.fournisseur, s.logo, s.fk_stcomm, s.datec, s.tms, s.status FROM llx_societe as s WHERE s.client IN (2, 3) AND s.entity IN (1) ORDER BY s.tms DESC LIMIT 5
2017-05-05 14:31:37 DEBUG   10.10.0.249     box_prospect::showBox
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT sp.rowid as id, sp.lastname, sp.firstname, sp.civility as civility_id, sp.datec, sp.tms, sp.fk_soc, sp.statut as status, sp.address, sp.zip, sp.town, sp.phone, sp.phone_perso, sp.phone_mobile, s.nom as socname, s.name_alias, s.client, s.fournisseur, s.code_client, s.code_fournisseur FROM llx_socpeople as sp LEFT JOIN llx_societe as s ON sp.fk_soc = s.rowid WHERE sp.entity IN (1) ORDER BY sp.tms DESC LIMIT 5
2017-05-05 14:31:37 DEBUG   10.10.0.249     box_contacts::showBox
2017-05-05 14:31:37 DEBUG   10.10.0.249     FactureStats::getAllByProductEntry read data from cache file c:/dolibarr/dolibarr_documents/users/temp/FactureStats_getAllByProductEntry_customer_es_ES_entity.1_user1.cache 1493994181.
2017-05-05 14:31:37 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=pie
2017-05-05 14:31:37 DEBUG   10.10.0.249     PropaleStats::getAllByProductEntry read data from cache file c:/dolibarr/dolibarr_documents/users/temp/PropaleStats_getAllByProductEntry_es_ES_entity.1_user1.cache 1493994181.
2017-05-05 14:31:37 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=pie
2017-05-05 14:31:37 DEBUG   10.10.0.249     CommandeStats::getAllByProductEntry read data from cache file c:/dolibarr/dolibarr_documents/users/temp/CommandeStats_getAllByProductEntry_customer_es_ES_entity.1_user1.cache 1493994181.
2017-05-05 14:31:37 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=pie
2017-05-05 14:31:37 DEBUG   10.10.0.249     box_graph_product_distribution::showBox
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT a.rowid, a.lastname, a.firstname, a.societe as company, a.fk_soc, a.datec, a.tms, a.statut as status, a.datefin as date_end_subscription, t.cotisation FROM llx_adherent as a, llx_adherent_type as t WHERE a.entity = 1 AND a.fk_adherent_type = t.rowid ORDER BY a.tms DESC LIMIT 5
2017-05-05 14:31:37 DEBUG   10.10.0.249     box_members::showBox
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, c.rowid, c.ref, c.statut as fk_statut, c.date_contrat, c.datec, c.fin_validite, c.date_cloture FROM llx_societe as s, llx_contrat as c WHERE c.fk_soc = s.rowid AND c.entity = 1 ORDER BY c.tms DESC, c.ref DESC  LIMIT 5
2017-05-05 14:31:37 DEBUG   10.10.0.249     box_contracts::showBox
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT  c.rowid, c.ref, c.statut as fk_statut, c.date_contrat, s.nom as name, s.rowid as socid, MIN(cd.date_fin_validite) as date_line, COUNT(cd.rowid) as nb_services FROM llx_contrat as c, llx_societe s, llx_contratdet as cd WHERE cd.statut = 4 AND cd.date_fin_validite <= '20170505143137' AND c.entity = 1 AND c.fk_soc=s.rowid AND cd.fk_contrat=c.rowid AND c.statut > 0 GROUP BY c.rowid, c.ref, c.statut, c.date_contrat, s.nom, s.rowid ORDER BY date_line ASC LIMIT 5
2017-05-05 14:31:37 DEBUG   10.10.0.249     box_services_expired::showBox
2017-05-05 14:31:37 DEBUG   10.10.0.249     box_ficheinter::loadBox
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT f.rowid, f.ref, f.fk_soc, f.fk_statut, f.datec, f.date_valid as datev, f.tms as datem, s.nom as name, s.rowid as socid, s.client FROM llx_societe as s, llx_fichinter as f WHERE f.fk_soc = s.rowid  AND f.entity = 1 ORDER BY f.tms DESC LIMIT 5
2017-05-05 14:31:37 DEBUG   10.10.0.249     box_ficheinter::showBox
2017-05-05 14:31:37 DEBUG   10.10.0.249     PropaleStats::getAmountByMonthWithPrevYear read data from cache file c:/dolibarr/dolibarr_documents/users/temp/PropaleStats_getAmountByMonthWithPrevYear_es_ES_entity.1_user1.cache 1493994181.
2017-05-05 14:31:37 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=bars,bars
2017-05-05 14:31:37 DEBUG   10.10.0.249     box_graph_propales_permonth::showBox
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.code_client, s.logo, p.rowid, p.ref, p.fk_statut, p.datep as dp, p.datec, p.fin_validite, p.date_cloture, p.total_ht, p.tva as total_tva, p.total as total_ttc, p.tms FROM llx_societe as s, llx_propal as p WHERE p.fk_soc = s.rowid AND p.entity = 1 ORDER BY p.tms DESC, p.ref DESC  LIMIT 5
2017-05-05 14:31:37 DEBUG   10.10.0.249     box_propales::showBox
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT b.title, b.url, b.target, b.favicon FROM llx_bookmark as b WHERE fk_user = 1 AND b.entity = 1 ORDER BY position ASC LIMIT 5
2017-05-05 14:31:37 DEBUG   10.10.0.249     box_bookmarks::showBox
2017-05-05 14:31:37 DEBUG   10.10.0.249     ModeleBoxes::showBox
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT count(u.rowid) as nb FROM llx_user as u WHERE u.statut > 0 AND u.entity IN (0,1)
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT count(s.rowid) as nb, s.client FROM llx_societe as s WHERE s.client IN (1,2,3) AND s.entity IN (1) GROUP BY s.client
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT count(s.rowid) as nb FROM llx_societe as s WHERE s.fournisseur = 1 AND s.entity IN (1)
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT count(sp.rowid) as nb FROM llx_socpeople as sp LEFT JOIN llx_societe as s ON (sp.fk_soc = s.rowid) WHERE s.entity IN (1)
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT count(a.rowid) as nb FROM llx_adherent as a WHERE a.statut > 0 AND a.entity IN (1)
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT count(p.rowid) as nb FROM llx_product as p WHERE p.entity IN (1) AND p.fk_product_type = 1
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT count(p.rowid) as nb FROM llx_propal as p LEFT JOIN llx_societe as s ON p.fk_soc = s.rowid WHERE p.entity IN (1)
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT count(co.rowid) as nb FROM llx_commande as co LEFT JOIN llx_societe as s ON co.fk_soc = s.rowid WHERE co.entity IN (1)
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT count(f.rowid) as nb FROM llx_facture as f LEFT JOIN llx_societe as s ON f.fk_soc = s.rowid WHERE f.entity = 1
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT count(c.rowid) as nb FROM llx_contrat as c LEFT JOIN llx_societe as s ON c.fk_soc = s.rowid WHERE c.entity = 1
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT count(fi.rowid) as nb FROM llx_fichinter as fi LEFT JOIN llx_societe as s ON fi.fk_soc = s.rowid WHERE fi.entity IN (1)
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT count(co.rowid) as nb FROM llx_commande_fournisseur as co LEFT JOIN llx_societe as s ON co.fk_soc = s.rowid WHERE co.entity = 1
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT count(f.rowid) as nb FROM llx_facture_fourn as f LEFT JOIN llx_societe as s ON f.fk_soc = s.rowid WHERE f.entity = 1
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT count(p.rowid) as nb FROM llx_supplier_proposal as p LEFT JOIN llx_societe as s ON p.fk_soc = s.rowid WHERE p.entity = 1
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT count(ex.rowid) as nb FROM llx_expensereport as ex WHERE ex.fk_statut > 0 AND ex.entity IN (1)
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT a.id, a.datep as dp FROM (llx_actioncomm as a) LEFT JOIN llx_societe as s ON a.fk_soc = s.rowid WHERE a.percent >= 0 AND a.percent < 100 AND a.entity IN (1)
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT p.rowid, p.ref, p.datec as datec, p.fin_validite as datefin FROM llx_propal as p WHERE p.entity IN (1) AND p.fk_statut = 1
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT p.rowid, p.ref, p.datec as datec, p.fin_validite as datefin FROM llx_propal as p WHERE p.entity IN (1) AND p.fk_statut = 2
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT p.rowid, p.ref, p.datec as datec FROM llx_supplier_proposal as p WHERE p.entity = 1 AND p.fk_statut = 1
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT p.rowid, p.ref, p.datec as datec FROM llx_supplier_proposal as p WHERE p.entity = 1 AND p.fk_statut = 2
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT c.rowid, c.date_creation as datec, c.date_commande, c.date_livraison as delivery_date, c.fk_statut FROM llx_commande as c WHERE c.entity IN (1) AND ((c.fk_statut IN (1,2)) OR (c.fk_statut = 3 AND c.facture = 0))
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT c.rowid, c.date_creation as datec, c.date_commande, c.fk_statut, c.date_livraison as delivery_date FROM llx_commande_fournisseur as c WHERE c.entity = 1 AND (c.fk_statut BETWEEN 1 AND 2)
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT cd.rowid, cd.date_ouverture_prevue as datefin FROM llx_contrat as c, llx_contratdet as cd, llx_societe as s WHERE c.statut = 1 AND c.rowid = cd.fk_contrat AND cd.statut = 0 AND c.fk_soc = s.rowid AND c.entity = 1
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT cd.rowid, cd.date_fin_validite as datefin FROM llx_contrat as c, llx_contratdet as cd, llx_societe as s WHERE c.statut = 1 AND c.rowid = cd.fk_contrat AND cd.statut = 4 AND cd.date_fin_validite < '20170505143137' AND c.fk_soc = s.rowid AND c.entity = 1
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT f.rowid, f.date_lim_reglement as datefin,f.fk_statut FROM llx_facture as f WHERE f.paye=0 AND f.entity = 1 AND f.fk_statut = 1
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT ff.rowid, ff.date_lim_reglement as datefin, ff.fk_statut FROM llx_facture_fourn as ff WHERE ff.paye=0 AND ff.fk_statut > 0 AND ff.entity = 1
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT COUNT(ba.rowid) as nb FROM llx_bank_account as ba WHERE ba.rappro > 0 and ba.clos = 0 AND ba.entity IN (1) AND ba.courant != 2
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT b.rowid, b.datev as datefin FROM llx_bank as b, llx_bank_account as ba WHERE b.rappro=0 AND b.fk_account = ba.rowid AND ba.entity IN (1) AND (ba.rappro = 1 AND ba.courant != 2) AND clos = 0
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT b.rowid, b.datev as datefin FROM llx_bank as b, llx_bank_account as ba WHERE b.fk_account = ba.rowid AND ba.entity IN (1) AND b.fk_type = 'CHQ' AND b.fk_bordereau = 0 AND b.amount > 0
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT a.rowid, a.datefin, a.statut FROM llx_adherent as a WHERE a.statut = 1 AND a.entity IN (1) AND (a.datefin IS NULL or a.datefin < '20170505143137')
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT ex.rowid, ex.date_valid FROM llx_expensereport as ex WHERE ex.fk_statut = 2 AND ex.entity IN (1)
2017-05-05 14:31:37 DEBUG   10.10.0.249     sql=SELECT ex.rowid, ex.date_valid FROM llx_expensereport as ex WHERE ex.fk_statut = 5 AND ex.entity IN (1)
2017-05-05 14:31:37 DEBUG   10.10.0.249     --- End access to /dolibarr/index.php
2017-05-05 14:33:17 DEBUG   10.10.0.249     This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:33:17 DEBUG   10.10.0.249     User::fetch
2017-05-05 14:33:17 DEBUG   10.10.0.249     sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:33:17 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:33:17 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:33:17 DEBUG   10.10.0.249     sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:33:17 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:33:17 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:33:17 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:33:17 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:33:17 DEBUG   10.10.0.249     --- Access to /dolibarr/ecm/index.php
2017-05-05 14:33:17 DEBUG   10.10.0.249     sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:33:17 DEBUG   10.10.0.249     Menubase::menuLoad mymainmenu=ecm myleftmenu= type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:33:17 DEBUG   10.10.0.249     sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:33:18 DEBUG   10.10.0.249     sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:33:18 DEBUG   10.10.0.249     EcmDirectory::load_motherof
2017-05-05 14:33:18 DEBUG   10.10.0.249     sql=SELECT fk_parent as id_parent, rowid as id_son FROM llx_ecm_directories WHERE fk_parent != 0 AND entity = 1
2017-05-05 14:33:18 DEBUG   10.10.0.249     EcmDirectory::get_full_arbo
2017-05-05 14:33:18 DEBUG   10.10.0.249     sql=SELECT c.rowid as rowid, c.label as label, c.description as description, c.cachenbofdoc, c.fk_user_c, c.date_c, u.login as login_c, ca.rowid as rowid_fille FROM llx_user as u, llx_ecm_directories as c LEFT JOIN llx_ecm_directories as ca ON c.rowid = ca.fk_parent WHERE c.fk_user_c = u.rowid AND c.entity = 1 ORDER BY c.label, c.rowid
2017-05-05 14:33:18 DEBUG   10.10.0.249     files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/ecm/ types=files recursive=0 filter= excludefilter=["^\\.","(\\.meta|_preview\\.png)$","^temp$","^CVS$"]
2017-05-05 14:33:18 DEBUG   10.10.0.249     --- End access to /dolibarr/ecm/index.php
2017-05-05 14:33:19 DEBUG   10.10.0.249     This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:33:19 DEBUG   10.10.0.249     User::fetch
2017-05-05 14:33:19 DEBUG   10.10.0.249     sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:33:19 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:33:19 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:33:19 DEBUG   10.10.0.249     sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:33:19 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:33:19 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:33:19 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:33:19 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:33:19 DEBUG   10.10.0.249     --- Access to /dolibarr/core/ajax/ajaxdirtree.php
2017-05-05 14:33:19 DEBUG   10.10.0.249     sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:33:19 DEBUG   10.10.0.249     EcmDirectory::load_motherof
2017-05-05 14:33:19 DEBUG   10.10.0.249     sql=SELECT fk_parent as id_parent, rowid as id_son FROM llx_ecm_directories WHERE fk_parent != 0 AND entity = 1
2017-05-05 14:33:19 DEBUG   10.10.0.249     EcmDirectory::get_full_arbo
2017-05-05 14:33:19 DEBUG   10.10.0.249     sql=SELECT c.rowid as rowid, c.label as label, c.description as description, c.cachenbofdoc, c.fk_user_c, c.date_c, u.login as login_c, ca.rowid as rowid_fille FROM llx_user as u, llx_ecm_directories as c LEFT JOIN llx_ecm_directories as ca ON c.rowid = ca.fk_parent WHERE c.fk_user_c = u.rowid AND c.entity = 1 ORDER BY c.label, c.rowid
2017-05-05 14:33:19 DEBUG   10.10.0.249     --- End access to /dolibarr/core/ajax/ajaxdirtree.php
2017-05-05 14:33:20 DEBUG   10.10.0.249     This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:33:20 DEBUG   10.10.0.249     User::fetch
2017-05-05 14:33:20 DEBUG   10.10.0.249     sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:33:20 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:33:20 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:33:20 DEBUG   10.10.0.249     sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:33:20 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:33:20 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:33:20 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:33:20 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:33:20 DEBUG   10.10.0.249     --- Access to /dolibarr/core/tools.php
2017-05-05 14:33:20 DEBUG   10.10.0.249     sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:33:21 DEBUG   10.10.0.249     Menubase::menuLoad mymainmenu=tools myleftmenu= type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:33:21 DEBUG   10.10.0.249     sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:33:21 DEBUG   10.10.0.249     sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:33:21 DEBUG   10.10.0.249     --- End access to /dolibarr/core/tools.php
2017-05-05 14:33:22 DEBUG   10.10.0.249     This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:33:22 DEBUG   10.10.0.249     User::fetch
2017-05-05 14:33:22 DEBUG   10.10.0.249     sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:33:22 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:33:22 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:33:22 DEBUG   10.10.0.249     sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:33:22 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:33:22 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:33:22 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:33:22 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:33:22 DEBUG   10.10.0.249     --- Access to /dolibarr/hrm/hrm.php
2017-05-05 14:33:22 DEBUG   10.10.0.249     sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:33:22 DEBUG   10.10.0.249     Menubase::menuLoad mymainmenu=hrm myleftmenu= type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:33:22 DEBUG   10.10.0.249     sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:33:22 DEBUG   10.10.0.249     User::load_parentof
2017-05-05 14:33:22 DEBUG   10.10.0.249     sql=SELECT fk_user as id_parent, rowid as id_son FROM llx_user WHERE fk_user <> 0 AND entity IN (0,1)
2017-05-05 14:33:22 DEBUG   10.10.0.249     User::get_full_tree get user list
2017-05-05 14:33:22 DEBUG   10.10.0.249     sql=SELECT DISTINCT u.rowid, u.firstname, u.lastname, u.fk_user, u.fk_soc, u.login, u.email, u.gender, u.admin, u.statut, u.photo, u.entity FROM llx_user as u WHERE u.entity IN (0,1)
2017-05-05 14:33:22 DEBUG   10.10.0.249     User::get_full_tree call to build_path_from_id_user
2017-05-05 14:33:22 DEBUG   10.10.0.249     User::build_path_from_id_user id_user=1 protection=0
2017-05-05 14:33:22 DEBUG   10.10.0.249     User::build_path_from_id_user id_user=2 protection=0
2017-05-05 14:33:22 DEBUG   10.10.0.249     User::get_full_tree dol_sort_array
2017-05-05 14:33:22 DEBUG   10.10.0.249     Build childid for id = 1
2017-05-05 14:33:22 DEBUG   10.10.0.249     sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:33:22 DEBUG   10.10.0.249     sql=SELECT rowid, code, label, affect, delay, newByMonth FROM llx_c_holiday_types WHERE (fk_country IS NULL OR fk_country = 4) AND active = 1 AND affect = 1
2017-05-05 14:33:22 DEBUG   10.10.0.249     sql=SELECT u.rowid as uid, u.lastname, u.firstname, x.rowid, x.rowid as ref, x.fk_type, x.date_debut as date_start, x.date_fin as date_end, x.halfday, x.tms as dm, x.statut as status FROM llx_holiday as x, llx_user as u WHERE u.rowid = x.fk_user AND x.entity = 1 ORDER BY x.tms DESC LIMIT 10
2017-05-05 14:33:22 DEBUG   10.10.0.249     sql=SELECT rowid, code, label, affect, delay, newByMonth FROM llx_c_holiday_types WHERE (fk_country IS NULL OR fk_country = 4) AND active = 1
2017-05-05 14:33:22 DEBUG   10.10.0.249     sql=SELECT u.rowid as uid, u.lastname, u.firstname, x.rowid, x.ref, x.date_debut as date, x.tms as dm, x.total_ttc, x.fk_statut as status FROM llx_expensereport as x, llx_user as u WHERE u.rowid = x.fk_user_author AND x.entity = 1 ORDER BY x.tms DESC LIMIT 10
2017-05-05 14:33:22 DEBUG   10.10.0.249     --- End access to /dolibarr/hrm/hrm.php
2017-05-05 14:33:26 DEBUG   10.10.0.249     This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:33:26 DEBUG   10.10.0.249     User::fetch
2017-05-05 14:33:26 DEBUG   10.10.0.249     sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:33:26 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:33:26 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:33:26 DEBUG   10.10.0.249     sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:33:26 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:33:26 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:33:26 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:33:26 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:33:26 DEBUG   10.10.0.249     --- Access to /dolibarr/product/index.php
2017-05-05 14:33:26 DEBUG   10.10.0.249     sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:33:26 DEBUG   10.10.0.249     Menubase::menuLoad mymainmenu=products myleftmenu= type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:33:26 DEBUG   10.10.0.249     sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:33:26 DEBUG   10.10.0.249     sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:33:27 DEBUG   10.10.0.249     sql=SELECT COUNT(p.rowid) as total, p.fk_product_type, p.tosell, p.tobuy FROM llx_product as p WHERE p.entity IN (1) GROUP BY p.fk_product_type, p.tosell, p.tobuy
2017-05-05 14:33:27 DEBUG   10.10.0.249     sql=SELECT p.rowid, p.label, p.price, p.ref, p.fk_product_type, p.tosell, p.tobuy, p.fk_price_expression, p.entity, p.tms as datem FROM llx_product as p WHERE p.entity IN (1) AND p.fk_product_type = 1 ORDER BY p.tms DESC LIMIT 15
2017-05-05 14:33:27 DEBUG   10.10.0.249     --- End access to /dolibarr/product/index.php
2017-05-05 14:33:29 DEBUG   10.10.0.249     This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:33:29 DEBUG   10.10.0.249     User::fetch
2017-05-05 14:33:29 DEBUG   10.10.0.249     sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:33:29 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:33:29 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:33:29 DEBUG   10.10.0.249     sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:33:29 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:33:29 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:33:29 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:33:29 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:33:29 DEBUG   10.10.0.249     --- Access to /dolibarr/societe/index.php
2017-05-05 14:33:29 DEBUG   10.10.0.249     sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:33:29 DEBUG   10.10.0.249     Menubase::menuLoad mymainmenu=companies myleftmenu= type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:33:29 DEBUG   10.10.0.249     sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:33:29 DEBUG   10.10.0.249     sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:33:29 DEBUG   10.10.0.249     sql=SELECT s.rowid, s.client, s.fournisseur FROM llx_societe as s WHERE s.entity IN (1)
2017-05-05 14:33:29 WARNING 10.10.0.249     dol_print_graph is deprecated
2017-05-05 14:33:29 DEBUG   10.10.0.249     sql=SELECT s.rowid, s.nom as name, s.client, s.fournisseur, s.code_client, s.code_fournisseur, s.logo, s.canvas, s.tms as datem, s.status as status FROM llx_societe as s WHERE s.entity IN (1) ORDER BY s.tms DESC LIMIT 15
2017-05-05 14:33:29 DEBUG   10.10.0.249     --- End access to /dolibarr/societe/index.php
2017-05-05 14:33:35 DEBUG   10.10.0.249     This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:33:35 DEBUG   10.10.0.249     User::fetch
2017-05-05 14:33:35 DEBUG   10.10.0.249     sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:33:35 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:33:35 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:33:35 DEBUG   10.10.0.249     sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:33:35 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:33:35 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:33:35 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:33:35 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:33:35 DEBUG   10.10.0.249     --- Access to /dolibarr/index.php
2017-05-05 14:33:35 DEBUG   10.10.0.249     sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:33:35 DEBUG   10.10.0.249     Menubase::menuLoad mymainmenu=home myleftmenu= type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:33:35 DEBUG   10.10.0.249     sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:33:35 DEBUG   10.10.0.249     sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:33:35 DEBUG   10.10.0.249     InfoBox::listBoxes get default box list for mode=activated userid=
2017-05-05 14:33:35 DEBUG   10.10.0.249     sql=SELECT b.rowid, b.position, b.box_order, b.fk_user, d.rowid as box_id, d.file, d.note, d.tms FROM llx_boxes as b, llx_boxes_def as d WHERE b.box_id = d.rowid AND b.entity IN (0,1) AND b.position = 0 AND b.fk_user = 0 ORDER BY b.box_order
2017-05-05 14:33:35 DEBUG   10.10.0.249     box_clients::loadBox
2017-05-05 14:33:35 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.code_client, s.client, s.code_fournisseur, s.fournisseur, s.logo, s.datec, s.tms, s.status FROM llx_societe as s WHERE s.client IN (1, 3) AND s.entity IN (1) ORDER BY s.tms DESC LIMIT 5
2017-05-05 14:33:35 DEBUG   10.10.0.249     box_clients::showBox
2017-05-05 14:33:35 DEBUG   10.10.0.249     box_comptes::loadBox
2017-05-05 14:33:35 DEBUG   10.10.0.249     sql=SELECT rowid, ref, label, bank, number, courant, clos, rappro, url, code_banque, code_guichet, cle_rib, bic, iban_prefix as iban, domiciliation, proprio, owner_address, account_number, currency_code, min_allowed, min_desired, comment FROM llx_bank_account WHERE entity = 1 AND clos = 0 ORDER BY label LIMIT 5
2017-05-05 14:33:35 DEBUG   10.10.0.249     sql=SELECT sum(amount) as amount FROM llx_bank WHERE fk_account = 1
2017-05-05 14:33:35 DEBUG   10.10.0.249     Translate::loadCacheCurrencies
2017-05-05 14:33:35 DEBUG   10.10.0.249     sql=SELECT code_iso, label, unicode FROM llx_c_currencies WHERE active = 1 AND code_iso = 'EUR'
2017-05-05 14:33:35 DEBUG   10.10.0.249     box_comptes::showBox
2017-05-05 14:33:35 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, c.rowid, c.ref, c.statut as contract_status, cd.rowid as cdid, cd.tms as datem, cd.statut, cd.label, cd.description, cd.product_type as type, p.rowid as product_id, p.ref as product_ref FROM (llx_societe as s, llx_contrat as c, llx_contratdet as cd LEFT JOIN llx_product as p ON cd.fk_product = p.rowid) WHERE c.entity = 1 AND s.rowid = c.fk_soc AND c.rowid = cd.fk_contrat ORDER BY c.tms DESC LIMIT 5
2017-05-05 14:33:35 DEBUG   10.10.0.249     box_services_contracts::showBox
2017-05-05 14:33:35 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.code_client, s.logo, c.ref, c.tms, c.rowid, c.date_commande, c.ref_client, c.fk_statut, c.fk_user_valid, c.facture, c.total_ht, c.tva as total_tva, c.total_ttc FROM llx_societe as s, llx_commande as c WHERE c.fk_soc = s.rowid AND c.entity = 1 ORDER BY c.tms DESC, c.ref DESC  LIMIT 5
2017-05-05 14:33:35 DEBUG   10.10.0.249     box_commandes::showBox
2017-05-05 14:33:35 DEBUG   10.10.0.249     CommandeStats::getAmountByMonthWithPrevYear read data from cache file c:/dolibarr/dolibarr_documents/users/temp/CommandeStats_getAmountByMonthWithPrevYear_customer_es_ES_entity.1_user1.cache 1493994180.
2017-05-05 14:33:35 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=
2017-05-05 14:33:35 DEBUG   10.10.0.249     box_graph_orders_permonth::showBox
2017-05-05 14:33:35 DEBUG   10.10.0.249     FactureStats::getAmountByMonthWithPrevYear read data from cache file c:/dolibarr/dolibarr_documents/users/temp/FactureStats_getAmountByMonthWithPrevYear_supplier_es_ES_entity.1_user1.cache 1493994180.
2017-05-05 14:33:35 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=
2017-05-05 14:33:35 DEBUG   10.10.0.249     box_graph_invoices_supplier_permonth::showBox
2017-05-05 14:33:35 DEBUG   10.10.0.249     CommandeStats::getAmountByMonthWithPrevYear read data from cache file c:/dolibarr/dolibarr_documents/users/temp/CommandeStats_getAmountByMonthWithPrevYear_supplier_es_ES_entity.1_user1.cache 1493994180.
2017-05-05 14:33:35 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=
2017-05-05 14:33:35 DEBUG   10.10.0.249     box_graph_orders_supplier_permonth::showBox
2017-05-05 14:33:35 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.datec, s.tms, s.status, s.code_fournisseur, s.logo FROM llx_societe as s WHERE s.fournisseur = 1 AND s.entity IN (1) ORDER BY s.tms DESC  LIMIT 5
2017-05-05 14:33:35 DEBUG   10.10.0.249     box_fournisseurs::showBox
2017-05-05 14:33:35 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, f.rowid as facid, f.ref, f.ref_supplier, f.date_lim_reglement as datelimite, f.amount, f.datef as df, f.total_ht as total_ht, f.tva as total_tva, f.total_ttc, f.paye, f.fk_statut, f.type FROM llx_societe as s,llx_facture_fourn as f WHERE f.fk_soc = s.rowid AND f.entity = 1 AND f.paye=0 AND fk_statut = 1 ORDER BY datelimite DESC, f.ref_supplier DESC  LIMIT 5
2017-05-05 14:33:35 DEBUG   10.10.0.249     box_factures_fourn_imp::showBox
2017-05-05 14:33:35 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.code_fournisseur, s.logo, f.rowid as facid, f.ref, f.ref_supplier, f.total_ht, f.total_tva, f.total_ttc, f.paye, f.fk_statut, f.datef as df, f.datec as datec, f.date_lim_reglement as datelimite, f.tms, f.type FROM llx_societe as s, llx_facture_fourn as f WHERE f.fk_soc = s.rowid AND f.entity = 1 ORDER BY f.tms DESC, f.ref DESC  LIMIT 5
2017-05-05 14:33:35 DEBUG   10.10.0.249     FactureFournisseur::fetch
2017-05-05 14:33:35 DEBUG   10.10.0.249     sql=SELECT t.rowid, t.ref, t.ref_supplier, t.entity, t.type, t.fk_soc, t.datec, t.datef, t.tms, t.libelle, t.paye, t.amount, t.remise, t.close_code, t.close_note, t.tva, t.localtax1, t.localtax2, t.total, t.total_ht, t.total_tva, t.total_ttc, t.fk_statut, t.fk_user_author, t.fk_user_valid, t.fk_facture_source, t.fk_projet, t.fk_cond_reglement, t.fk_account, t.fk_mode_reglement, t.date_lim_reglement, t.note_private, t.note_public, t.model_pdf, t.import_key, t.extraparams, cr.code as cond_reglement_code, cr.libelle as cond_reglement_libelle, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, s.nom as socnom, s.rowid as socid, t.fk_incoterms, t.location_incoterms, i.libelle as libelle_incoterms, t.fk_multicurrency, t.multicurrency_code, t.multicurrency_tx, t.multicurrency_total_ht, t.multicurrency_total_tva, t.multicurrency_total_ttc FROM llx_facture_fourn as t LEFT JOIN llx_societe as s ON (t.fk_soc = s.rowid) LEFT JOIN llx_c_payment_term as cr ON (t.fk_cond_reglement = cr.rowid) LEFT JOIN llx_c_paiement as p ON (t.fk_mode_reglement = p.id) LEFT JOIN llx_c_incoterms as i ON t.fk_incoterms = i.rowid WHERE t.rowid=1
2017-05-05 14:33:35 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:33:35 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture_fourn' ORDER BY pos
2017-05-05 14:33:35 DEBUG   10.10.0.249     FactureFournisseur::fetch_lines
2017-05-05 14:33:35 DEBUG   10.10.0.249     sql=SELECT f.rowid, f.ref as ref_supplier, f.description, f.pu_ht, f.pu_ttc, f.qty, f.remise_percent, f.tva_tx, f.localtax1_tx, f.localtax2_tx, f.total_localtax1, f.total_localtax2 , f.total_ht, f.tva as total_tva, f.total_ttc, f.fk_product, f.product_type, f.info_bits, f.rang, f.special_code, f.fk_parent_line, f.fk_unit, p.rowid as product_id, p.ref as product_ref, p.label as label, p.description as product_desc, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_subprice, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc FROM llx_facture_fourn_det as f LEFT JOIN llx_product as p ON f.fk_product = p.rowid WHERE fk_facture_fourn=1 ORDER BY f.rang, f.rowid
2017-05-05 14:33:35 DEBUG   10.10.0.249     FactureFournisseur::getSommePaiement
2017-05-05 14:33:35 DEBUG   10.10.0.249     sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiementfourn_facturefourn WHERE fk_facturefourn = 1
2017-05-05 14:33:35 DEBUG   10.10.0.249     box_factures_fourn::showBox
2017-05-05 14:33:35 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.code_client, s.code_fournisseur, s.logo, c.ref, c.tms, c.rowid, c.date_commande, c.total_ht, c.tva as total_tva, c.total_ttc, c.fk_statut FROM llx_societe as s, llx_commande_fournisseur as c WHERE c.fk_soc = s.rowid AND c.entity = 1 ORDER BY c.tms DESC, c.ref DESC  LIMIT 5
2017-05-05 14:33:35 DEBUG   10.10.0.249     box_supplier_orders::showBox
2017-05-05 14:33:35 DEBUG   10.10.0.249     Box_actions::loadBox
2017-05-05 14:33:35 DEBUG   10.10.0.249     sql=SELECT a.id, a.label, a.datep as dp, a.percent as percentage, ta.code, ta.libelle as type_label, s.nom as name, s.rowid as socid, s.code_client FROM (llx_c_actioncomm AS ta, llx_actioncomm AS a) LEFT JOIN llx_societe as s ON a.fk_soc = s.rowid WHERE a.fk_action = ta.id AND a.entity = 1 AND a.percent >= 0 AND a.percent < 100 ORDER BY a.datec DESC LIMIT 5
2017-05-05 14:33:35 DEBUG   10.10.0.249     box_actions::showBox
2017-05-05 14:33:35 DEBUG   10.10.0.249     FactureStats::getAmountByMonthWithPrevYear read data from cache file c:/dolibarr/dolibarr_documents/users/temp/FactureStats_getAmountByMonthWithPrevYear_customer_es_ES_entity.1_user1.cache 1493994180.
2017-05-05 14:33:35 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=
2017-05-05 14:33:35 DEBUG   10.10.0.249     box_graph_invoices_permonth::showBox
2017-05-05 14:33:35 DEBUG   10.10.0.249     ModeleBoxes::showBox
2017-05-05 14:33:35 DEBUG   10.10.0.249     sql=SELECT f.rowid as facid, f.facnumber, f.type, f.total as total_ht, f.tva as total_tva, f.total_ttc, f.datef as df, f.paye, f.fk_statut, f.datec, f.tms, s.nom as name, s.rowid as socid, s.code_client, f.date_lim_reglement as datelimite FROM (llx_societe as s,llx_facture as f) WHERE f.fk_soc = s.rowid AND f.entity = 1 ORDER BY f.tms DESC, f.facnumber DESC  LIMIT 5
2017-05-05 14:33:35 DEBUG   10.10.0.249     box_factures::showBox
2017-05-05 14:33:35 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.code_client, s.logo, f.facnumber, f.date_lim_reglement as datelimite, f.type, f.amount, f.datef as df, f.total as total_ht, f.tva as total_tva, f.total_ttc, f.paye, f.fk_statut, f.rowid as facid, sum(pf.amount) as am FROM llx_societe as s,llx_facture as f LEFT JOIN llx_paiement_facture as pf ON f.rowid=pf.fk_facture  WHERE f.fk_soc = s.rowid AND f.entity = 1 AND f.paye = 0 AND fk_statut = 1 GROUP BY s.nom, s.rowid, s.code_client, s.logo, f.facnumber, f.date_lim_reglement, f.type, f.amount, f.datef, f.total, f.tva, f.total_ttc, f.paye, f.fk_statut, f.rowid ORDER BY datelimite ASC, f.facnumber ASC  LIMIT 5
2017-05-05 14:33:35 DEBUG   10.10.0.249     box_factures_imp::showBox
2017-05-05 14:33:35 DEBUG   10.10.0.249     box_prospect::loadBox
2017-05-05 14:33:35 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.code_client, s.client, s.code_fournisseur, s.fournisseur, s.logo, s.fk_stcomm, s.datec, s.tms, s.status FROM llx_societe as s WHERE s.client IN (2, 3) AND s.entity IN (1) ORDER BY s.tms DESC LIMIT 5
2017-05-05 14:33:35 DEBUG   10.10.0.249     box_prospect::showBox
2017-05-05 14:33:35 DEBUG   10.10.0.249     sql=SELECT sp.rowid as id, sp.lastname, sp.firstname, sp.civility as civility_id, sp.datec, sp.tms, sp.fk_soc, sp.statut as status, sp.address, sp.zip, sp.town, sp.phone, sp.phone_perso, sp.phone_mobile, s.nom as socname, s.name_alias, s.client, s.fournisseur, s.code_client, s.code_fournisseur FROM llx_socpeople as sp LEFT JOIN llx_societe as s ON sp.fk_soc = s.rowid WHERE sp.entity IN (1) ORDER BY sp.tms DESC LIMIT 5
2017-05-05 14:33:35 DEBUG   10.10.0.249     box_contacts::showBox
2017-05-05 14:33:35 DEBUG   10.10.0.249     FactureStats::getAllByProductEntry read data from cache file c:/dolibarr/dolibarr_documents/users/temp/FactureStats_getAllByProductEntry_customer_es_ES_entity.1_user1.cache 1493994181.
2017-05-05 14:33:35 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=pie
2017-05-05 14:33:35 DEBUG   10.10.0.249     PropaleStats::getAllByProductEntry read data from cache file c:/dolibarr/dolibarr_documents/users/temp/PropaleStats_getAllByProductEntry_es_ES_entity.1_user1.cache 1493994181.
2017-05-05 14:33:35 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=pie
2017-05-05 14:33:35 DEBUG   10.10.0.249     CommandeStats::getAllByProductEntry read data from cache file c:/dolibarr/dolibarr_documents/users/temp/CommandeStats_getAllByProductEntry_customer_es_ES_entity.1_user1.cache 1493994181.
2017-05-05 14:33:35 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=pie
2017-05-05 14:33:35 DEBUG   10.10.0.249     box_graph_product_distribution::showBox
2017-05-05 14:33:35 DEBUG   10.10.0.249     sql=SELECT a.rowid, a.lastname, a.firstname, a.societe as company, a.fk_soc, a.datec, a.tms, a.statut as status, a.datefin as date_end_subscription, t.cotisation FROM llx_adherent as a, llx_adherent_type as t WHERE a.entity = 1 AND a.fk_adherent_type = t.rowid ORDER BY a.tms DESC LIMIT 5
2017-05-05 14:33:35 DEBUG   10.10.0.249     box_members::showBox
2017-05-05 14:33:35 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, c.rowid, c.ref, c.statut as fk_statut, c.date_contrat, c.datec, c.fin_validite, c.date_cloture FROM llx_societe as s, llx_contrat as c WHERE c.fk_soc = s.rowid AND c.entity = 1 ORDER BY c.tms DESC, c.ref DESC  LIMIT 5
2017-05-05 14:33:36 DEBUG   10.10.0.249     box_contracts::showBox
2017-05-05 14:33:36 DEBUG   10.10.0.249     sql=SELECT  c.rowid, c.ref, c.statut as fk_statut, c.date_contrat, s.nom as name, s.rowid as socid, MIN(cd.date_fin_validite) as date_line, COUNT(cd.rowid) as nb_services FROM llx_contrat as c, llx_societe s, llx_contratdet as cd WHERE cd.statut = 4 AND cd.date_fin_validite <= '20170505143336' AND c.entity = 1 AND c.fk_soc=s.rowid AND cd.fk_contrat=c.rowid AND c.statut > 0 GROUP BY c.rowid, c.ref, c.statut, c.date_contrat, s.nom, s.rowid ORDER BY date_line ASC LIMIT 5
2017-05-05 14:33:36 DEBUG   10.10.0.249     box_services_expired::showBox
2017-05-05 14:33:36 DEBUG   10.10.0.249     box_ficheinter::loadBox
2017-05-05 14:33:36 DEBUG   10.10.0.249     sql=SELECT f.rowid, f.ref, f.fk_soc, f.fk_statut, f.datec, f.date_valid as datev, f.tms as datem, s.nom as name, s.rowid as socid, s.client FROM llx_societe as s, llx_fichinter as f WHERE f.fk_soc = s.rowid  AND f.entity = 1 ORDER BY f.tms DESC LIMIT 5
2017-05-05 14:33:36 DEBUG   10.10.0.249     box_ficheinter::showBox
2017-05-05 14:33:36 DEBUG   10.10.0.249     PropaleStats::getAmountByMonthWithPrevYear read data from cache file c:/dolibarr/dolibarr_documents/users/temp/PropaleStats_getAmountByMonthWithPrevYear_es_ES_entity.1_user1.cache 1493994181.
2017-05-05 14:33:36 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=bars,bars
2017-05-05 14:33:36 DEBUG   10.10.0.249     box_graph_propales_permonth::showBox
2017-05-05 14:33:36 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.code_client, s.logo, p.rowid, p.ref, p.fk_statut, p.datep as dp, p.datec, p.fin_validite, p.date_cloture, p.total_ht, p.tva as total_tva, p.total as total_ttc, p.tms FROM llx_societe as s, llx_propal as p WHERE p.fk_soc = s.rowid AND p.entity = 1 ORDER BY p.tms DESC, p.ref DESC  LIMIT 5
2017-05-05 14:33:36 DEBUG   10.10.0.249     box_propales::showBox
2017-05-05 14:33:36 DEBUG   10.10.0.249     sql=SELECT b.title, b.url, b.target, b.favicon FROM llx_bookmark as b WHERE fk_user = 1 AND b.entity = 1 ORDER BY position ASC LIMIT 5
2017-05-05 14:33:36 DEBUG   10.10.0.249     box_bookmarks::showBox
2017-05-05 14:33:36 DEBUG   10.10.0.249     ModeleBoxes::showBox
2017-05-05 14:33:36 DEBUG   10.10.0.249     sql=SELECT count(u.rowid) as nb FROM llx_user as u WHERE u.statut > 0 AND u.entity IN (0,1)
2017-05-05 14:33:36 DEBUG   10.10.0.249     sql=SELECT count(s.rowid) as nb, s.client FROM llx_societe as s WHERE s.client IN (1,2,3) AND s.entity IN (1) GROUP BY s.client
2017-05-05 14:33:36 DEBUG   10.10.0.249     sql=SELECT count(s.rowid) as nb FROM llx_societe as s WHERE s.fournisseur = 1 AND s.entity IN (1)
2017-05-05 14:33:36 DEBUG   10.10.0.249     sql=SELECT count(sp.rowid) as nb FROM llx_socpeople as sp LEFT JOIN llx_societe as s ON (sp.fk_soc = s.rowid) WHERE s.entity IN (1)
2017-05-05 14:33:36 DEBUG   10.10.0.249     sql=SELECT count(a.rowid) as nb FROM llx_adherent as a WHERE a.statut > 0 AND a.entity IN (1)
2017-05-05 14:33:36 DEBUG   10.10.0.249     sql=SELECT count(p.rowid) as nb FROM llx_product as p WHERE p.entity IN (1) AND p.fk_product_type = 1
2017-05-05 14:33:36 DEBUG   10.10.0.249     sql=SELECT count(p.rowid) as nb FROM llx_propal as p LEFT JOIN llx_societe as s ON p.fk_soc = s.rowid WHERE p.entity IN (1)
2017-05-05 14:33:36 DEBUG   10.10.0.249     sql=SELECT count(co.rowid) as nb FROM llx_commande as co LEFT JOIN llx_societe as s ON co.fk_soc = s.rowid WHERE co.entity IN (1)
2017-05-05 14:33:36 DEBUG   10.10.0.249     sql=SELECT count(f.rowid) as nb FROM llx_facture as f LEFT JOIN llx_societe as s ON f.fk_soc = s.rowid WHERE f.entity = 1
2017-05-05 14:33:36 DEBUG   10.10.0.249     sql=SELECT count(c.rowid) as nb FROM llx_contrat as c LEFT JOIN llx_societe as s ON c.fk_soc = s.rowid WHERE c.entity = 1
2017-05-05 14:33:36 DEBUG   10.10.0.249     sql=SELECT count(fi.rowid) as nb FROM llx_fichinter as fi LEFT JOIN llx_societe as s ON fi.fk_soc = s.rowid WHERE fi.entity IN (1)
2017-05-05 14:33:36 DEBUG   10.10.0.249     sql=SELECT count(co.rowid) as nb FROM llx_commande_fournisseur as co LEFT JOIN llx_societe as s ON co.fk_soc = s.rowid WHERE co.entity = 1
2017-05-05 14:33:36 DEBUG   10.10.0.249     sql=SELECT count(f.rowid) as nb FROM llx_facture_fourn as f LEFT JOIN llx_societe as s ON f.fk_soc = s.rowid WHERE f.entity = 1
2017-05-05 14:33:36 DEBUG   10.10.0.249     sql=SELECT count(p.rowid) as nb FROM llx_supplier_proposal as p LEFT JOIN llx_societe as s ON p.fk_soc = s.rowid WHERE p.entity = 1
2017-05-05 14:33:36 DEBUG   10.10.0.249     sql=SELECT count(ex.rowid) as nb FROM llx_expensereport as ex WHERE ex.fk_statut > 0 AND ex.entity IN (1)
2017-05-05 14:33:36 DEBUG   10.10.0.249     sql=SELECT a.id, a.datep as dp FROM (llx_actioncomm as a) LEFT JOIN llx_societe as s ON a.fk_soc = s.rowid WHERE a.percent >= 0 AND a.percent < 100 AND a.entity IN (1)
2017-05-05 14:33:36 DEBUG   10.10.0.249     sql=SELECT p.rowid, p.ref, p.datec as datec, p.fin_validite as datefin FROM llx_propal as p WHERE p.entity IN (1) AND p.fk_statut = 1
2017-05-05 14:33:36 DEBUG   10.10.0.249     sql=SELECT p.rowid, p.ref, p.datec as datec, p.fin_validite as datefin FROM llx_propal as p WHERE p.entity IN (1) AND p.fk_statut = 2
2017-05-05 14:33:36 DEBUG   10.10.0.249     sql=SELECT p.rowid, p.ref, p.datec as datec FROM llx_supplier_proposal as p WHERE p.entity = 1 AND p.fk_statut = 1
2017-05-05 14:33:36 DEBUG   10.10.0.249     sql=SELECT p.rowid, p.ref, p.datec as datec FROM llx_supplier_proposal as p WHERE p.entity = 1 AND p.fk_statut = 2
2017-05-05 14:33:36 DEBUG   10.10.0.249     sql=SELECT c.rowid, c.date_creation as datec, c.date_commande, c.date_livraison as delivery_date, c.fk_statut FROM llx_commande as c WHERE c.entity IN (1) AND ((c.fk_statut IN (1,2)) OR (c.fk_statut = 3 AND c.facture = 0))
2017-05-05 14:33:36 DEBUG   10.10.0.249     sql=SELECT c.rowid, c.date_creation as datec, c.date_commande, c.fk_statut, c.date_livraison as delivery_date FROM llx_commande_fournisseur as c WHERE c.entity = 1 AND (c.fk_statut BETWEEN 1 AND 2)
2017-05-05 14:33:36 DEBUG   10.10.0.249     sql=SELECT cd.rowid, cd.date_ouverture_prevue as datefin FROM llx_contrat as c, llx_contratdet as cd, llx_societe as s WHERE c.statut = 1 AND c.rowid = cd.fk_contrat AND cd.statut = 0 AND c.fk_soc = s.rowid AND c.entity = 1
2017-05-05 14:33:36 DEBUG   10.10.0.249     sql=SELECT cd.rowid, cd.date_fin_validite as datefin FROM llx_contrat as c, llx_contratdet as cd, llx_societe as s WHERE c.statut = 1 AND c.rowid = cd.fk_contrat AND cd.statut = 4 AND cd.date_fin_validite < '20170505143336' AND c.fk_soc = s.rowid AND c.entity = 1
2017-05-05 14:33:36 DEBUG   10.10.0.249     sql=SELECT f.rowid, f.date_lim_reglement as datefin,f.fk_statut FROM llx_facture as f WHERE f.paye=0 AND f.entity = 1 AND f.fk_statut = 1
2017-05-05 14:33:36 DEBUG   10.10.0.249     sql=SELECT ff.rowid, ff.date_lim_reglement as datefin, ff.fk_statut FROM llx_facture_fourn as ff WHERE ff.paye=0 AND ff.fk_statut > 0 AND ff.entity = 1
2017-05-05 14:33:36 DEBUG   10.10.0.249     sql=SELECT COUNT(ba.rowid) as nb FROM llx_bank_account as ba WHERE ba.rappro > 0 and ba.clos = 0 AND ba.entity IN (1) AND ba.courant != 2
2017-05-05 14:33:36 DEBUG   10.10.0.249     sql=SELECT b.rowid, b.datev as datefin FROM llx_bank as b, llx_bank_account as ba WHERE b.rappro=0 AND b.fk_account = ba.rowid AND ba.entity IN (1) AND (ba.rappro = 1 AND ba.courant != 2) AND clos = 0
2017-05-05 14:33:36 DEBUG   10.10.0.249     sql=SELECT b.rowid, b.datev as datefin FROM llx_bank as b, llx_bank_account as ba WHERE b.fk_account = ba.rowid AND ba.entity IN (1) AND b.fk_type = 'CHQ' AND b.fk_bordereau = 0 AND b.amount > 0
2017-05-05 14:33:36 DEBUG   10.10.0.249     sql=SELECT a.rowid, a.datefin, a.statut FROM llx_adherent as a WHERE a.statut = 1 AND a.entity IN (1) AND (a.datefin IS NULL or a.datefin < '20170505143336')
2017-05-05 14:33:36 DEBUG   10.10.0.249     sql=SELECT ex.rowid, ex.date_valid FROM llx_expensereport as ex WHERE ex.fk_statut = 2 AND ex.entity IN (1)
2017-05-05 14:33:36 DEBUG   10.10.0.249     sql=SELECT ex.rowid, ex.date_valid FROM llx_expensereport as ex WHERE ex.fk_statut = 5 AND ex.entity IN (1)
2017-05-05 14:33:36 DEBUG   10.10.0.249     --- End access to /dolibarr/index.php
2017-05-05 14:34:04 DEBUG   10.10.0.249     This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:34:04 DEBUG   10.10.0.249     User::fetch
2017-05-05 14:34:04 DEBUG   10.10.0.249     sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:34:04 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:34:04 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:34:04 DEBUG   10.10.0.249     sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:34:04 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:34:04 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:34:04 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:34:04 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:34:04 DEBUG   10.10.0.249     --- Access to /dolibarr/index.php
2017-05-05 14:34:04 DEBUG   10.10.0.249     sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:34:04 DEBUG   10.10.0.249     Menubase::menuLoad mymainmenu=home myleftmenu= type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:34:04 DEBUG   10.10.0.249     sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:34:04 DEBUG   10.10.0.249     sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:34:04 DEBUG   10.10.0.249     InfoBox::listBoxes get default box list for mode=activated userid=
2017-05-05 14:34:04 DEBUG   10.10.0.249     sql=SELECT b.rowid, b.position, b.box_order, b.fk_user, d.rowid as box_id, d.file, d.note, d.tms FROM llx_boxes as b, llx_boxes_def as d WHERE b.box_id = d.rowid AND b.entity IN (0,1) AND b.position = 0 AND b.fk_user = 0 ORDER BY b.box_order
2017-05-05 14:34:05 DEBUG   10.10.0.249     box_clients::loadBox
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.code_client, s.client, s.code_fournisseur, s.fournisseur, s.logo, s.datec, s.tms, s.status FROM llx_societe as s WHERE s.client IN (1, 3) AND s.entity IN (1) ORDER BY s.tms DESC LIMIT 5
2017-05-05 14:34:05 DEBUG   10.10.0.249     box_clients::showBox
2017-05-05 14:34:05 DEBUG   10.10.0.249     box_comptes::loadBox
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT rowid, ref, label, bank, number, courant, clos, rappro, url, code_banque, code_guichet, cle_rib, bic, iban_prefix as iban, domiciliation, proprio, owner_address, account_number, currency_code, min_allowed, min_desired, comment FROM llx_bank_account WHERE entity = 1 AND clos = 0 ORDER BY label LIMIT 5
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT sum(amount) as amount FROM llx_bank WHERE fk_account = 1
2017-05-05 14:34:05 DEBUG   10.10.0.249     Translate::loadCacheCurrencies
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT code_iso, label, unicode FROM llx_c_currencies WHERE active = 1 AND code_iso = 'EUR'
2017-05-05 14:34:05 DEBUG   10.10.0.249     box_comptes::showBox
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, c.rowid, c.ref, c.statut as contract_status, cd.rowid as cdid, cd.tms as datem, cd.statut, cd.label, cd.description, cd.product_type as type, p.rowid as product_id, p.ref as product_ref FROM (llx_societe as s, llx_contrat as c, llx_contratdet as cd LEFT JOIN llx_product as p ON cd.fk_product = p.rowid) WHERE c.entity = 1 AND s.rowid = c.fk_soc AND c.rowid = cd.fk_contrat ORDER BY c.tms DESC LIMIT 5
2017-05-05 14:34:05 DEBUG   10.10.0.249     box_services_contracts::showBox
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.code_client, s.logo, c.ref, c.tms, c.rowid, c.date_commande, c.ref_client, c.fk_statut, c.fk_user_valid, c.facture, c.total_ht, c.tva as total_tva, c.total_ttc FROM llx_societe as s, llx_commande as c WHERE c.fk_soc = s.rowid AND c.entity = 1 ORDER BY c.tms DESC, c.ref DESC  LIMIT 5
2017-05-05 14:34:05 DEBUG   10.10.0.249     box_commandes::showBox
2017-05-05 14:34:05 DEBUG   10.10.0.249     CommandeStats::getAmountByMonthWithPrevYear read data from cache file c:/dolibarr/dolibarr_documents/users/temp/CommandeStats_getAmountByMonthWithPrevYear_customer_es_ES_entity.1_user1.cache 1493994180.
2017-05-05 14:34:05 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=
2017-05-05 14:34:05 DEBUG   10.10.0.249     box_graph_orders_permonth::showBox
2017-05-05 14:34:05 DEBUG   10.10.0.249     FactureStats::getAmountByMonthWithPrevYear read data from cache file c:/dolibarr/dolibarr_documents/users/temp/FactureStats_getAmountByMonthWithPrevYear_supplier_es_ES_entity.1_user1.cache 1493994180.
2017-05-05 14:34:05 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=
2017-05-05 14:34:05 DEBUG   10.10.0.249     box_graph_invoices_supplier_permonth::showBox
2017-05-05 14:34:05 DEBUG   10.10.0.249     CommandeStats::getAmountByMonthWithPrevYear read data from cache file c:/dolibarr/dolibarr_documents/users/temp/CommandeStats_getAmountByMonthWithPrevYear_supplier_es_ES_entity.1_user1.cache 1493994180.
2017-05-05 14:34:05 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=
2017-05-05 14:34:05 DEBUG   10.10.0.249     box_graph_orders_supplier_permonth::showBox
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.datec, s.tms, s.status, s.code_fournisseur, s.logo FROM llx_societe as s WHERE s.fournisseur = 1 AND s.entity IN (1) ORDER BY s.tms DESC  LIMIT 5
2017-05-05 14:34:05 DEBUG   10.10.0.249     box_fournisseurs::showBox
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, f.rowid as facid, f.ref, f.ref_supplier, f.date_lim_reglement as datelimite, f.amount, f.datef as df, f.total_ht as total_ht, f.tva as total_tva, f.total_ttc, f.paye, f.fk_statut, f.type FROM llx_societe as s,llx_facture_fourn as f WHERE f.fk_soc = s.rowid AND f.entity = 1 AND f.paye=0 AND fk_statut = 1 ORDER BY datelimite DESC, f.ref_supplier DESC  LIMIT 5
2017-05-05 14:34:05 DEBUG   10.10.0.249     box_factures_fourn_imp::showBox
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.code_fournisseur, s.logo, f.rowid as facid, f.ref, f.ref_supplier, f.total_ht, f.total_tva, f.total_ttc, f.paye, f.fk_statut, f.datef as df, f.datec as datec, f.date_lim_reglement as datelimite, f.tms, f.type FROM llx_societe as s, llx_facture_fourn as f WHERE f.fk_soc = s.rowid AND f.entity = 1 ORDER BY f.tms DESC, f.ref DESC  LIMIT 5
2017-05-05 14:34:05 DEBUG   10.10.0.249     FactureFournisseur::fetch
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT t.rowid, t.ref, t.ref_supplier, t.entity, t.type, t.fk_soc, t.datec, t.datef, t.tms, t.libelle, t.paye, t.amount, t.remise, t.close_code, t.close_note, t.tva, t.localtax1, t.localtax2, t.total, t.total_ht, t.total_tva, t.total_ttc, t.fk_statut, t.fk_user_author, t.fk_user_valid, t.fk_facture_source, t.fk_projet, t.fk_cond_reglement, t.fk_account, t.fk_mode_reglement, t.date_lim_reglement, t.note_private, t.note_public, t.model_pdf, t.import_key, t.extraparams, cr.code as cond_reglement_code, cr.libelle as cond_reglement_libelle, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, s.nom as socnom, s.rowid as socid, t.fk_incoterms, t.location_incoterms, i.libelle as libelle_incoterms, t.fk_multicurrency, t.multicurrency_code, t.multicurrency_tx, t.multicurrency_total_ht, t.multicurrency_total_tva, t.multicurrency_total_ttc FROM llx_facture_fourn as t LEFT JOIN llx_societe as s ON (t.fk_soc = s.rowid) LEFT JOIN llx_c_payment_term as cr ON (t.fk_cond_reglement = cr.rowid) LEFT JOIN llx_c_paiement as p ON (t.fk_mode_reglement = p.id) LEFT JOIN llx_c_incoterms as i ON t.fk_incoterms = i.rowid WHERE t.rowid=1
2017-05-05 14:34:05 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture_fourn' ORDER BY pos
2017-05-05 14:34:05 DEBUG   10.10.0.249     FactureFournisseur::fetch_lines
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT f.rowid, f.ref as ref_supplier, f.description, f.pu_ht, f.pu_ttc, f.qty, f.remise_percent, f.tva_tx, f.localtax1_tx, f.localtax2_tx, f.total_localtax1, f.total_localtax2 , f.total_ht, f.tva as total_tva, f.total_ttc, f.fk_product, f.product_type, f.info_bits, f.rang, f.special_code, f.fk_parent_line, f.fk_unit, p.rowid as product_id, p.ref as product_ref, p.label as label, p.description as product_desc, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_subprice, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc FROM llx_facture_fourn_det as f LEFT JOIN llx_product as p ON f.fk_product = p.rowid WHERE fk_facture_fourn=1 ORDER BY f.rang, f.rowid
2017-05-05 14:34:05 DEBUG   10.10.0.249     FactureFournisseur::getSommePaiement
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiementfourn_facturefourn WHERE fk_facturefourn = 1
2017-05-05 14:34:05 DEBUG   10.10.0.249     box_factures_fourn::showBox
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.code_client, s.code_fournisseur, s.logo, c.ref, c.tms, c.rowid, c.date_commande, c.total_ht, c.tva as total_tva, c.total_ttc, c.fk_statut FROM llx_societe as s, llx_commande_fournisseur as c WHERE c.fk_soc = s.rowid AND c.entity = 1 ORDER BY c.tms DESC, c.ref DESC  LIMIT 5
2017-05-05 14:34:05 DEBUG   10.10.0.249     box_supplier_orders::showBox
2017-05-05 14:34:05 DEBUG   10.10.0.249     Box_actions::loadBox
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT a.id, a.label, a.datep as dp, a.percent as percentage, ta.code, ta.libelle as type_label, s.nom as name, s.rowid as socid, s.code_client FROM (llx_c_actioncomm AS ta, llx_actioncomm AS a) LEFT JOIN llx_societe as s ON a.fk_soc = s.rowid WHERE a.fk_action = ta.id AND a.entity = 1 AND a.percent >= 0 AND a.percent < 100 ORDER BY a.datec DESC LIMIT 5
2017-05-05 14:34:05 DEBUG   10.10.0.249     box_actions::showBox
2017-05-05 14:34:05 DEBUG   10.10.0.249     FactureStats::getAmountByMonthWithPrevYear read data from cache file c:/dolibarr/dolibarr_documents/users/temp/FactureStats_getAmountByMonthWithPrevYear_customer_es_ES_entity.1_user1.cache 1493994180.
2017-05-05 14:34:05 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=
2017-05-05 14:34:05 DEBUG   10.10.0.249     box_graph_invoices_permonth::showBox
2017-05-05 14:34:05 DEBUG   10.10.0.249     ModeleBoxes::showBox
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT f.rowid as facid, f.facnumber, f.type, f.total as total_ht, f.tva as total_tva, f.total_ttc, f.datef as df, f.paye, f.fk_statut, f.datec, f.tms, s.nom as name, s.rowid as socid, s.code_client, f.date_lim_reglement as datelimite FROM (llx_societe as s,llx_facture as f) WHERE f.fk_soc = s.rowid AND f.entity = 1 ORDER BY f.tms DESC, f.facnumber DESC  LIMIT 5
2017-05-05 14:34:05 DEBUG   10.10.0.249     box_factures::showBox
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.code_client, s.logo, f.facnumber, f.date_lim_reglement as datelimite, f.type, f.amount, f.datef as df, f.total as total_ht, f.tva as total_tva, f.total_ttc, f.paye, f.fk_statut, f.rowid as facid, sum(pf.amount) as am FROM llx_societe as s,llx_facture as f LEFT JOIN llx_paiement_facture as pf ON f.rowid=pf.fk_facture  WHERE f.fk_soc = s.rowid AND f.entity = 1 AND f.paye = 0 AND fk_statut = 1 GROUP BY s.nom, s.rowid, s.code_client, s.logo, f.facnumber, f.date_lim_reglement, f.type, f.amount, f.datef, f.total, f.tva, f.total_ttc, f.paye, f.fk_statut, f.rowid ORDER BY datelimite ASC, f.facnumber ASC  LIMIT 5
2017-05-05 14:34:05 DEBUG   10.10.0.249     box_factures_imp::showBox
2017-05-05 14:34:05 DEBUG   10.10.0.249     box_prospect::loadBox
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.code_client, s.client, s.code_fournisseur, s.fournisseur, s.logo, s.fk_stcomm, s.datec, s.tms, s.status FROM llx_societe as s WHERE s.client IN (2, 3) AND s.entity IN (1) ORDER BY s.tms DESC LIMIT 5
2017-05-05 14:34:05 DEBUG   10.10.0.249     box_prospect::showBox
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT sp.rowid as id, sp.lastname, sp.firstname, sp.civility as civility_id, sp.datec, sp.tms, sp.fk_soc, sp.statut as status, sp.address, sp.zip, sp.town, sp.phone, sp.phone_perso, sp.phone_mobile, s.nom as socname, s.name_alias, s.client, s.fournisseur, s.code_client, s.code_fournisseur FROM llx_socpeople as sp LEFT JOIN llx_societe as s ON sp.fk_soc = s.rowid WHERE sp.entity IN (1) ORDER BY sp.tms DESC LIMIT 5
2017-05-05 14:34:05 DEBUG   10.10.0.249     box_contacts::showBox
2017-05-05 14:34:05 DEBUG   10.10.0.249     FactureStats::getAllByProductEntry read data from cache file c:/dolibarr/dolibarr_documents/users/temp/FactureStats_getAllByProductEntry_customer_es_ES_entity.1_user1.cache 1493994181.
2017-05-05 14:34:05 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=pie
2017-05-05 14:34:05 DEBUG   10.10.0.249     PropaleStats::getAllByProductEntry read data from cache file c:/dolibarr/dolibarr_documents/users/temp/PropaleStats_getAllByProductEntry_es_ES_entity.1_user1.cache 1493994181.
2017-05-05 14:34:05 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=pie
2017-05-05 14:34:05 DEBUG   10.10.0.249     CommandeStats::getAllByProductEntry read data from cache file c:/dolibarr/dolibarr_documents/users/temp/CommandeStats_getAllByProductEntry_customer_es_ES_entity.1_user1.cache 1493994181.
2017-05-05 14:34:05 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=pie
2017-05-05 14:34:05 DEBUG   10.10.0.249     box_graph_product_distribution::showBox
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT a.rowid, a.lastname, a.firstname, a.societe as company, a.fk_soc, a.datec, a.tms, a.statut as status, a.datefin as date_end_subscription, t.cotisation FROM llx_adherent as a, llx_adherent_type as t WHERE a.entity = 1 AND a.fk_adherent_type = t.rowid ORDER BY a.tms DESC LIMIT 5
2017-05-05 14:34:05 DEBUG   10.10.0.249     box_members::showBox
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, c.rowid, c.ref, c.statut as fk_statut, c.date_contrat, c.datec, c.fin_validite, c.date_cloture FROM llx_societe as s, llx_contrat as c WHERE c.fk_soc = s.rowid AND c.entity = 1 ORDER BY c.tms DESC, c.ref DESC  LIMIT 5
2017-05-05 14:34:05 DEBUG   10.10.0.249     box_contracts::showBox
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT  c.rowid, c.ref, c.statut as fk_statut, c.date_contrat, s.nom as name, s.rowid as socid, MIN(cd.date_fin_validite) as date_line, COUNT(cd.rowid) as nb_services FROM llx_contrat as c, llx_societe s, llx_contratdet as cd WHERE cd.statut = 4 AND cd.date_fin_validite <= '20170505143405' AND c.entity = 1 AND c.fk_soc=s.rowid AND cd.fk_contrat=c.rowid AND c.statut > 0 GROUP BY c.rowid, c.ref, c.statut, c.date_contrat, s.nom, s.rowid ORDER BY date_line ASC LIMIT 5
2017-05-05 14:34:05 DEBUG   10.10.0.249     box_services_expired::showBox
2017-05-05 14:34:05 DEBUG   10.10.0.249     box_ficheinter::loadBox
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT f.rowid, f.ref, f.fk_soc, f.fk_statut, f.datec, f.date_valid as datev, f.tms as datem, s.nom as name, s.rowid as socid, s.client FROM llx_societe as s, llx_fichinter as f WHERE f.fk_soc = s.rowid  AND f.entity = 1 ORDER BY f.tms DESC LIMIT 5
2017-05-05 14:34:05 DEBUG   10.10.0.249     box_ficheinter::showBox
2017-05-05 14:34:05 DEBUG   10.10.0.249     PropaleStats::getAmountByMonthWithPrevYear read data from cache file c:/dolibarr/dolibarr_documents/users/temp/PropaleStats_getAmountByMonthWithPrevYear_es_ES_entity.1_user1.cache 1493994181.
2017-05-05 14:34:05 DEBUG   10.10.0.249     DolGraph::draw_jflot this->type=bars,bars
2017-05-05 14:34:05 DEBUG   10.10.0.249     box_graph_propales_permonth::showBox
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT s.nom as name, s.rowid as socid, s.code_client, s.logo, p.rowid, p.ref, p.fk_statut, p.datep as dp, p.datec, p.fin_validite, p.date_cloture, p.total_ht, p.tva as total_tva, p.total as total_ttc, p.tms FROM llx_societe as s, llx_propal as p WHERE p.fk_soc = s.rowid AND p.entity = 1 ORDER BY p.tms DESC, p.ref DESC  LIMIT 5
2017-05-05 14:34:05 DEBUG   10.10.0.249     box_propales::showBox
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT b.title, b.url, b.target, b.favicon FROM llx_bookmark as b WHERE fk_user = 1 AND b.entity = 1 ORDER BY position ASC LIMIT 5
2017-05-05 14:34:05 DEBUG   10.10.0.249     box_bookmarks::showBox
2017-05-05 14:34:05 DEBUG   10.10.0.249     ModeleBoxes::showBox
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT count(u.rowid) as nb FROM llx_user as u WHERE u.statut > 0 AND u.entity IN (0,1)
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT count(s.rowid) as nb, s.client FROM llx_societe as s WHERE s.client IN (1,2,3) AND s.entity IN (1) GROUP BY s.client
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT count(s.rowid) as nb FROM llx_societe as s WHERE s.fournisseur = 1 AND s.entity IN (1)
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT count(sp.rowid) as nb FROM llx_socpeople as sp LEFT JOIN llx_societe as s ON (sp.fk_soc = s.rowid) WHERE s.entity IN (1)
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT count(a.rowid) as nb FROM llx_adherent as a WHERE a.statut > 0 AND a.entity IN (1)
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT count(p.rowid) as nb FROM llx_product as p WHERE p.entity IN (1) AND p.fk_product_type = 1
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT count(p.rowid) as nb FROM llx_propal as p LEFT JOIN llx_societe as s ON p.fk_soc = s.rowid WHERE p.entity IN (1)
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT count(co.rowid) as nb FROM llx_commande as co LEFT JOIN llx_societe as s ON co.fk_soc = s.rowid WHERE co.entity IN (1)
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT count(f.rowid) as nb FROM llx_facture as f LEFT JOIN llx_societe as s ON f.fk_soc = s.rowid WHERE f.entity = 1
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT count(c.rowid) as nb FROM llx_contrat as c LEFT JOIN llx_societe as s ON c.fk_soc = s.rowid WHERE c.entity = 1
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT count(fi.rowid) as nb FROM llx_fichinter as fi LEFT JOIN llx_societe as s ON fi.fk_soc = s.rowid WHERE fi.entity IN (1)
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT count(co.rowid) as nb FROM llx_commande_fournisseur as co LEFT JOIN llx_societe as s ON co.fk_soc = s.rowid WHERE co.entity = 1
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT count(f.rowid) as nb FROM llx_facture_fourn as f LEFT JOIN llx_societe as s ON f.fk_soc = s.rowid WHERE f.entity = 1
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT count(p.rowid) as nb FROM llx_supplier_proposal as p LEFT JOIN llx_societe as s ON p.fk_soc = s.rowid WHERE p.entity = 1
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT count(ex.rowid) as nb FROM llx_expensereport as ex WHERE ex.fk_statut > 0 AND ex.entity IN (1)
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT a.id, a.datep as dp FROM (llx_actioncomm as a) LEFT JOIN llx_societe as s ON a.fk_soc = s.rowid WHERE a.percent >= 0 AND a.percent < 100 AND a.entity IN (1)
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT p.rowid, p.ref, p.datec as datec, p.fin_validite as datefin FROM llx_propal as p WHERE p.entity IN (1) AND p.fk_statut = 1
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT p.rowid, p.ref, p.datec as datec, p.fin_validite as datefin FROM llx_propal as p WHERE p.entity IN (1) AND p.fk_statut = 2
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT p.rowid, p.ref, p.datec as datec FROM llx_supplier_proposal as p WHERE p.entity = 1 AND p.fk_statut = 1
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT p.rowid, p.ref, p.datec as datec FROM llx_supplier_proposal as p WHERE p.entity = 1 AND p.fk_statut = 2
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT c.rowid, c.date_creation as datec, c.date_commande, c.date_livraison as delivery_date, c.fk_statut FROM llx_commande as c WHERE c.entity IN (1) AND ((c.fk_statut IN (1,2)) OR (c.fk_statut = 3 AND c.facture = 0))
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT c.rowid, c.date_creation as datec, c.date_commande, c.fk_statut, c.date_livraison as delivery_date FROM llx_commande_fournisseur as c WHERE c.entity = 1 AND (c.fk_statut BETWEEN 1 AND 2)
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT cd.rowid, cd.date_ouverture_prevue as datefin FROM llx_contrat as c, llx_contratdet as cd, llx_societe as s WHERE c.statut = 1 AND c.rowid = cd.fk_contrat AND cd.statut = 0 AND c.fk_soc = s.rowid AND c.entity = 1
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT cd.rowid, cd.date_fin_validite as datefin FROM llx_contrat as c, llx_contratdet as cd, llx_societe as s WHERE c.statut = 1 AND c.rowid = cd.fk_contrat AND cd.statut = 4 AND cd.date_fin_validite < '20170505143405' AND c.fk_soc = s.rowid AND c.entity = 1
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT f.rowid, f.date_lim_reglement as datefin,f.fk_statut FROM llx_facture as f WHERE f.paye=0 AND f.entity = 1 AND f.fk_statut = 1
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT ff.rowid, ff.date_lim_reglement as datefin, ff.fk_statut FROM llx_facture_fourn as ff WHERE ff.paye=0 AND ff.fk_statut > 0 AND ff.entity = 1
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT COUNT(ba.rowid) as nb FROM llx_bank_account as ba WHERE ba.rappro > 0 and ba.clos = 0 AND ba.entity IN (1) AND ba.courant != 2
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT b.rowid, b.datev as datefin FROM llx_bank as b, llx_bank_account as ba WHERE b.rappro=0 AND b.fk_account = ba.rowid AND ba.entity IN (1) AND (ba.rappro = 1 AND ba.courant != 2) AND clos = 0
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT b.rowid, b.datev as datefin FROM llx_bank as b, llx_bank_account as ba WHERE b.fk_account = ba.rowid AND ba.entity IN (1) AND b.fk_type = 'CHQ' AND b.fk_bordereau = 0 AND b.amount > 0
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT a.rowid, a.datefin, a.statut FROM llx_adherent as a WHERE a.statut = 1 AND a.entity IN (1) AND (a.datefin IS NULL or a.datefin < '20170505143405')
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT ex.rowid, ex.date_valid FROM llx_expensereport as ex WHERE ex.fk_statut = 2 AND ex.entity IN (1)
2017-05-05 14:34:05 DEBUG   10.10.0.249     sql=SELECT ex.rowid, ex.date_valid FROM llx_expensereport as ex WHERE ex.fk_statut = 5 AND ex.entity IN (1)
2017-05-05 14:34:05 DEBUG   10.10.0.249     --- End access to /dolibarr/index.php
2017-05-05 14:35:56 DEBUG   10.10.0.249     This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:35:56 DEBUG   10.10.0.249     User::fetch
2017-05-05 14:35:56 DEBUG   10.10.0.249     sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:35:56 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:35:56 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:35:56 DEBUG   10.10.0.249     sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:35:56 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:35:56 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:35:56 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:35:56 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:35:56 DEBUG   10.10.0.249     --- Access to /dolibarr/compta/facture.php
2017-05-05 14:35:56 DEBUG   10.10.0.249     sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:35:56 DEBUG   10.10.0.249     Menubase::menuLoad mymainmenu=home myleftmenu= type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:35:56 DEBUG   10.10.0.249     sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:35:57 DEBUG   10.10.0.249     Facture::fetch
2017-05-05 14:35:57 DEBUG   10.10.0.249     sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=6
2017-05-05 14:35:57 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:35:57 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:35:57 DEBUG   10.10.0.249     Facture::fetch_lines
2017-05-05 14:35:57 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 6 ORDER BY l.rang, l.rowid
2017-05-05 14:35:57 DEBUG   10.10.0.249     sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:35:57 DEBUG   10.10.0.249     Facture::fetch
2017-05-05 14:35:57 DEBUG   10.10.0.249     sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=6
2017-05-05 14:35:57 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:35:57 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:35:57 DEBUG   10.10.0.249     Facture::fetch_lines
2017-05-05 14:35:57 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 6 ORDER BY l.rang, l.rowid
2017-05-05 14:35:57 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:35:57 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:35:57 DEBUG   10.10.0.249     sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:35:57 DEBUG   10.10.0.249     Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:35:57 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:35:57 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:35:57 DEBUG   10.10.0.249     sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:35:57 DEBUG   10.10.0.249     Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:35:57 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:35:57 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:35:57 DEBUG   10.10.0.249     useRevenueStamp
2017-05-05 14:35:57 DEBUG   10.10.0.249     sql=SELECT COUNT(*) as nb FROM llx_c_revenuestamp as r, llx_c_country as c WHERE r.fk_pays = c.rowid AND c.code = 'ES' AND r.active = 1
2017-05-05 14:35:57 DEBUG   10.10.0.249     Facture::getSommePaiement
2017-05-05 14:35:57 DEBUG   10.10.0.249     sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 6
2017-05-05 14:35:57 DEBUG   10.10.0.249     DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:35:57 DEBUG   10.10.0.249     sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 2
2017-05-05 14:35:57 DEBUG   10.10.0.249     DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:35:57 DEBUG   10.10.0.249     sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 3
2017-05-05 14:35:57 DEBUG   10.10.0.249     DiscountAbsolute::getAvailableDiscounts
2017-05-05 14:35:57 DEBUG   10.10.0.249     sql=SELECT SUM(rc.amount_ttc) as amount FROM llx_societe_remise_except as rc WHERE (rc.fk_facture IS NULL AND rc.fk_facture_line IS NULL) AND rc.fk_soc = 3 AND (fk_facture_source IS NULL OR (fk_facture_source IS NOT NULL AND description LIKE '(DEPOSIT)%'))
2017-05-05 14:35:57 DEBUG   10.10.0.249     DiscountAbsolute::getAvailableDiscounts
2017-05-05 14:35:57 DEBUG   10.10.0.249     sql=SELECT SUM(rc.amount_ttc) as amount FROM llx_societe_remise_except as rc WHERE (rc.fk_facture IS NULL AND rc.fk_facture_line IS NULL) AND rc.fk_soc = 3 AND (fk_facture_source IS NOT NULL AND description NOT LIKE '(DEPOSIT)%')
2017-05-05 14:35:57 DEBUG   10.10.0.249     User::fetch
2017-05-05 14:35:57 DEBUG   10.10.0.249     sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.rowid = 1
2017-05-05 14:35:57 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:35:57 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:35:57 DEBUG   10.10.0.249     sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:35:57 DEBUG   10.10.0.249     sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 6 AND type < 2 ORDER BY fk_statut DESC
2017-05-05 14:35:57 DEBUG   10.10.0.249     Facture::liste_contact
2017-05-05 14:35:57 DEBUG   10.10.0.249     sql=SELECT ec.rowid, ec.statut as statuslink, ec.fk_socpeople as id, ec.fk_c_type_contact, '-1' as socid, t.statut as statuscontact, t.civility as civility, t.lastname as lastname, t.firstname, t.email, tc.source, tc.element, tc.code, tc.libelle FROM llx_c_type_contact tc, llx_element_contact ec LEFT JOIN llx_user t on ec.fk_socpeople = t.rowid WHERE ec.element_id =6 AND ec.fk_c_type_contact=tc.rowid AND tc.element='facture' AND tc.source = 'internal' AND tc.active=1 ORDER BY t.lastname ASC
2017-05-05 14:35:57 DEBUG   10.10.0.249     Facture::liste_contact
2017-05-05 14:35:57 DEBUG   10.10.0.249     sql=SELECT ec.rowid, ec.statut as statuslink, ec.fk_socpeople as id, ec.fk_c_type_contact, t.fk_soc as socid, t.statut as statuscontact, t.civility as civility, t.lastname as lastname, t.firstname, t.email, tc.source, tc.element, tc.code, tc.libelle FROM llx_c_type_contact tc, llx_element_contact ec LEFT JOIN llx_socpeople t on ec.fk_socpeople = t.rowid WHERE ec.element_id =6 AND ec.fk_c_type_contact=tc.rowid AND tc.element='facture' AND tc.source = 'external' AND tc.active=1 ORDER BY t.lastname ASC
2017-05-05 14:35:57 DEBUG   10.10.0.249     sql=SELECT COUNT(pfd.rowid) as nb FROM llx_prelevement_facture_demande as pfd WHERE pfd.fk_facture = 6
2017-05-05 14:35:57 DEBUG   10.10.0.249     files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1704-0004 types=files recursive=0 filter= excludefilter="(\\.meta|_preview\\.png)$"
2017-05-05 14:35:57 DEBUG   10.10.0.249     sql=SELECT COUNT(rowid) as nb FROM llx_links WHERE objecttype = 'facture' AND objectid = 6 AND entity = 1
2017-05-05 14:35:57 DEBUG   10.10.0.249     --- End access to /dolibarr/compta/facture.php
2017-05-05 14:35:58 DEBUG   10.10.0.249     This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:35:58 DEBUG   10.10.0.249     User::fetch
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:35:58 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:35:58 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:35:58 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:35:58 DEBUG   10.10.0.249     --- Access to /dolibarr/compta/facture.php
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:35:58 DEBUG   10.10.0.249     Menubase::menuLoad mymainmenu=home myleftmenu= type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:35:58 DEBUG   10.10.0.249     Facture::fetch
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=6
2017-05-05 14:35:58 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:35:58 DEBUG   10.10.0.249     Facture::fetch_lines
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 6 ORDER BY l.rang, l.rowid
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:35:58 DEBUG   10.10.0.249     Facture::fetch
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=6
2017-05-05 14:35:58 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:35:58 DEBUG   10.10.0.249     Facture::fetch_lines
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 6 ORDER BY l.rang, l.rowid
2017-05-05 14:35:58 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:35:58 DEBUG   10.10.0.249     Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:35:58 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:35:58 DEBUG   10.10.0.249     Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:35:58 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:35:58 DEBUG   10.10.0.249     useRevenueStamp
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT COUNT(*) as nb FROM llx_c_revenuestamp as r, llx_c_country as c WHERE r.fk_pays = c.rowid AND c.code = 'ES' AND r.active = 1
2017-05-05 14:35:58 DEBUG   10.10.0.249     Facture::getSommePaiement
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 6
2017-05-05 14:35:58 DEBUG   10.10.0.249     DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 2
2017-05-05 14:35:58 DEBUG   10.10.0.249     DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 3
2017-05-05 14:35:58 DEBUG   10.10.0.249     DiscountAbsolute::getAvailableDiscounts
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT SUM(rc.amount_ttc) as amount FROM llx_societe_remise_except as rc WHERE (rc.fk_facture IS NULL AND rc.fk_facture_line IS NULL) AND rc.fk_soc = 3 AND (fk_facture_source IS NULL OR (fk_facture_source IS NOT NULL AND description LIKE '(DEPOSIT)%'))
2017-05-05 14:35:58 DEBUG   10.10.0.249     DiscountAbsolute::getAvailableDiscounts
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT SUM(rc.amount_ttc) as amount FROM llx_societe_remise_except as rc WHERE (rc.fk_facture IS NULL AND rc.fk_facture_line IS NULL) AND rc.fk_soc = 3 AND (fk_facture_source IS NOT NULL AND description NOT LIKE '(DEPOSIT)%')
2017-05-05 14:35:58 DEBUG   10.10.0.249     User::fetch
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.rowid = 1
2017-05-05 14:35:58 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 6 AND type < 2 ORDER BY fk_statut DESC
2017-05-05 14:35:58 DEBUG   10.10.0.249     Facture::liste_contact
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT ec.rowid, ec.statut as statuslink, ec.fk_socpeople as id, ec.fk_c_type_contact, '-1' as socid, t.statut as statuscontact, t.civility as civility, t.lastname as lastname, t.firstname, t.email, tc.source, tc.element, tc.code, tc.libelle FROM llx_c_type_contact tc, llx_element_contact ec LEFT JOIN llx_user t on ec.fk_socpeople = t.rowid WHERE ec.element_id =6 AND ec.fk_c_type_contact=tc.rowid AND tc.element='facture' AND tc.source = 'internal' AND tc.active=1 ORDER BY t.lastname ASC
2017-05-05 14:35:58 DEBUG   10.10.0.249     Facture::liste_contact
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT ec.rowid, ec.statut as statuslink, ec.fk_socpeople as id, ec.fk_c_type_contact, t.fk_soc as socid, t.statut as statuscontact, t.civility as civility, t.lastname as lastname, t.firstname, t.email, tc.source, tc.element, tc.code, tc.libelle FROM llx_c_type_contact tc, llx_element_contact ec LEFT JOIN llx_socpeople t on ec.fk_socpeople = t.rowid WHERE ec.element_id =6 AND ec.fk_c_type_contact=tc.rowid AND tc.element='facture' AND tc.source = 'external' AND tc.active=1 ORDER BY t.lastname ASC
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT COUNT(pfd.rowid) as nb FROM llx_prelevement_facture_demande as pfd WHERE pfd.fk_facture = 6
2017-05-05 14:35:58 DEBUG   10.10.0.249     files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1704-0004 types=files recursive=0 filter= excludefilter="(\\.meta|_preview\\.png)$"
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT COUNT(rowid) as nb FROM llx_links WHERE objecttype = 'facture' AND objectid = 6 AND entity = 1
2017-05-05 14:35:58 DEBUG   10.10.0.249     DiscountAbsolute::fetch
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT sr.rowid, sr.fk_soc, sr.fk_user, sr.amount_ht, sr.amount_tva, sr.amount_ttc, sr.tva_tx, sr.fk_facture_line, sr.fk_facture, sr.fk_facture_source, sr.description, sr.datec, f.facnumber as ref_facture_source FROM llx_societe_remise_except as sr LEFT JOIN llx_facture as f ON sr.fk_facture_source = f.rowid WHERE sr.fk_facture_source=6
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT MAX(te.facnumber) FROM llx_facture as te WHERE te.facnumber < 'FA1704-0004' AND te.entity IN (1)
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT MIN(te.facnumber) FROM llx_facture as te WHERE te.facnumber > 'FA1704-0004' AND te.entity IN (1)
2017-05-05 14:35:58 DEBUG   10.10.0.249     get_OutstandingBill
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT rowid, total_ttc FROM llx_facture as f WHERE fk_soc = 3 AND paye = 0 AND fk_statut <> 0 AND fk_statut <> 3 AND fk_statut <> 2
2017-05-05 14:35:58 DEBUG   10.10.0.249     Facture::getSommePaiement
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 3
2017-05-05 14:35:58 DEBUG   10.10.0.249     DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 2
2017-05-05 14:35:58 DEBUG   10.10.0.249     DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 3
2017-05-05 14:35:58 DEBUG   10.10.0.249     Facture::getSommePaiement
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 4
2017-05-05 14:35:58 DEBUG   10.10.0.249     DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 4 AND f.type = 2
2017-05-05 14:35:58 DEBUG   10.10.0.249     DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 4 AND f.type = 3
2017-05-05 14:35:58 DEBUG   10.10.0.249     Translate::loadCacheCurrencies
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT code_iso, label, unicode FROM llx_c_currencies WHERE active = 1 AND code_iso = 'EUR'
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 6 AND type = 2
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT p.datep as dp, p.ref, p.num_paiement, p.rowid, p.fk_bank, c.code as payment_code, c.libelle as payment_label, pf.amount, ba.rowid as baid, ba.ref as baref, ba.label FROM llx_c_paiement as c, llx_paiement_facture as pf, llx_paiement as p LEFT JOIN llx_bank as b ON p.fk_bank = b.rowid LEFT JOIN llx_bank_account as ba ON b.fk_account = ba.rowid WHERE pf.fk_facture = 6 AND p.fk_paiement = c.id AND pf.fk_paiement = p.rowid ORDER BY p.datep, p.tms
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT fk_facture FROM llx_paiement_facture as pf, llx_facture as f WHERE pf.fk_facture = f.rowid AND fk_paiement = 1
2017-05-05 14:35:58 DEBUG   10.10.0.249     Facture::fetch
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=2
2017-05-05 14:35:58 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:35:58 DEBUG   10.10.0.249     Facture::fetch_lines
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 2 ORDER BY l.rang, l.rowid
2017-05-05 14:35:58 DEBUG   10.10.0.249     Facture::fetch
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=3
2017-05-05 14:35:58 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:35:58 DEBUG   10.10.0.249     Facture::fetch_lines
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 3 ORDER BY l.rang, l.rowid
2017-05-05 14:35:58 DEBUG   10.10.0.249     Facture::fetch
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=5
2017-05-05 14:35:58 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:35:58 DEBUG   10.10.0.249     Facture::fetch_lines
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 5 ORDER BY l.rang, l.rowid
2017-05-05 14:35:58 DEBUG   10.10.0.249     Facture::fetch
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=6
2017-05-05 14:35:58 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:35:58 DEBUG   10.10.0.249     Facture::fetch_lines
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 6 ORDER BY l.rang, l.rowid
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT re.rowid, re.amount_ht, re.amount_tva, re.amount_ttc, re.description, re.fk_facture_source FROM llx_societe_remise_except as re WHERE fk_facture = 6
2017-05-05 14:35:58 DEBUG   10.10.0.249     Form::load_cache_conditions_paiements
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT rowid, code, libelle as label FROM llx_c_payment_term WHERE active > 0 ORDER BY sortorder
2017-05-05 14:35:58 DEBUG   10.10.0.249     Form::load_cache_types_paiements
2017-05-05 14:35:58 DEBUG   10.10.0.249     sql=SELECT id, code, libelle as label, type, active FROM llx_c_paiement
2017-05-05 14:35:59 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:35:59 DEBUG   10.10.0.249     sql=SELECT libelle as label FROM llx_c_paiement WHERE code = 'LCR'
2017-05-05 14:35:59 DEBUG   10.10.0.249     Account::fetch
2017-05-05 14:35:59 DEBUG   10.10.0.249     sql=SELECT ba.rowid, ba.ref, ba.label, ba.bank, ba.number, ba.courant, ba.clos, ba.rappro, ba.url, ba.code_banque, ba.code_guichet, ba.cle_rib, ba.bic, ba.iban_prefix as iban, ba.domiciliation, ba.proprio, ba.owner_address, ba.state_id, ba.fk_pays as country_id, ba.account_number, ba.accountancy_journal, ba.currency_code, ba.min_allowed, ba.min_desired, ba.comment, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_bank_account as ba LEFT JOIN llx_c_country as c ON ba.fk_pays = c.rowid LEFT JOIN llx_c_departements as d ON ba.state_id = d.rowid WHERE entity IN (1) AND ba.rowid  = 1
2017-05-05 14:35:59 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:35:59 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'bank_account' ORDER BY pos
2017-05-05 14:35:59 DEBUG   10.10.0.249     useLocalTax
2017-05-05 14:35:59 DEBUG   10.10.0.249     sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:35:59 DEBUG   10.10.0.249     Facture::fetch_lines
2017-05-05 14:35:59 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 6 ORDER BY l.rang, l.rowid
2017-05-05 14:35:59 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:35:59 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facturedet' ORDER BY pos
2017-05-05 14:35:59 DEBUG   10.10.0.249     Product::fetch id=1 ref= ref_ext=
2017-05-05 14:35:59 DEBUG   10.10.0.249     sql=SELECT rowid, ref, ref_ext, label, description, url, note, customcode, fk_country, price, price_ttc, price_min, price_min_ttc, price_base_type, cost_price, default_vat_code, tva_tx, recuperableonly as tva_npr, localtax1_tx, localtax2_tx, localtax1_type, localtax2_type, tosell, tobuy, fk_product_type, duration, seuil_stock_alerte, canvas, weight, weight_units, length, length_units, surface, surface_units, volume, volume_units, barcode, fk_barcode_type, finished, accountancy_code_buy, accountancy_code_sell, stock, pmp, datec, tms, import_key, entity, desiredstock, tobatch, fk_unit, fk_price_expression, price_autogen FROM llx_product WHERE rowid = 1
2017-05-05 14:35:59 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:35:59 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'product' ORDER BY pos
2017-05-05 14:35:59 DEBUG   10.10.0.249     sql=SELECT MAX(CAST(SUBSTRING(facnumber FROM 8) AS SIGNED)) as max FROM llx_facture WHERE facnumber LIKE 'FA____-%' AND entity IN (1)
2017-05-05 14:35:59 DEBUG   10.10.0.249     mod_facture_terre::getNextValue
2017-05-05 14:35:59 DEBUG   10.10.0.249     mod_facture_terre::getNextValue
2017-05-05 14:35:59 DEBUG   10.10.0.249     sql=SELECT facnumber as ref FROM llx_facture WHERE facnumber LIKE 'FA____-0004' AND entity IN (1)
2017-05-05 14:35:59 DEBUG   10.10.0.249     Facture::getSommePaiement
2017-05-05 14:35:59 DEBUG   10.10.0.249     sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 6
2017-05-05 14:35:59 DEBUG   10.10.0.249     /core/lib/function2.lib.php::getListOfModels
2017-05-05 14:35:59 DEBUG   10.10.0.249     sql=SELECT nom as id, nom as lib, libelle as label, description as description FROM llx_document_model WHERE type = 'invoice' AND entity IN (0,1) ORDER BY description DESC
2017-05-05 14:35:59 DEBUG   10.10.0.249     files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1704-0004 types=files recursive=0 filter= excludefilter="(\\.meta|_preview\\.png)$"
2017-05-05 14:35:59 DEBUG   10.10.0.249     Facture::fetchObjectLink
2017-05-05 14:35:59 DEBUG   10.10.0.249     sql=SELECT rowid, fk_source, sourcetype, fk_target, targettype FROM llx_element_element WHERE (fk_source = '6' AND sourcetype = 'facture') OR (fk_target = '6' AND targettype = 'facture') ORDER BY sourcetype
2017-05-05 14:35:59 DEBUG   10.10.0.249     Commande::fetch
2017-05-05 14:35:59 DEBUG   10.10.0.249     sql=SELECT c.rowid, c.date_creation, c.ref, c.fk_soc, c.fk_user_author, c.fk_statut, c.amount_ht, c.total_ht, c.total_ttc, c.tva as total_tva, c.localtax1 as total_localtax1, c.localtax2 as total_localtax2, c.fk_cond_reglement, c.fk_mode_reglement, c.fk_availability, c.fk_input_reason, c.fk_account, c.date_commande, c.date_livraison, c.fk_shipping_method, c.fk_warehouse, c.fk_projet, c.remise_percent, c.remise, c.remise_absolue, c.source, c.facture as billed, c.note_private, c.note_public, c.ref_client, c.ref_ext, c.ref_int, c.model_pdf, c.fk_delivery_address, c.extraparams, c.fk_incoterms, c.location_incoterms, c.fk_multicurrency, c.multicurrency_code, c.multicurrency_tx, c.multicurrency_total_ht, c.multicurrency_total_tva, c.multicurrency_total_ttc, i.libelle as libelle_incoterms, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, cr.code as cond_reglement_code, cr.libelle as cond_reglement_libelle, cr.libelle_facture as cond_reglement_libelle_doc, ca.code as availability_code, ca.label as availability_label, dr.code as demand_reason_code FROM llx_commande as c LEFT JOIN llx_c_payment_term as cr ON (c.fk_cond_reglement = cr.rowid) LEFT JOIN llx_c_paiement as p ON (c.fk_mode_reglement = p.id) LEFT JOIN llx_c_availability as ca ON (c.fk_availability = ca.rowid) LEFT JOIN llx_c_input_reason as dr ON (c.fk_input_reason = ca.rowid) LEFT JOIN llx_c_incoterms as i ON c.fk_incoterms = i.rowid WHERE c.entity IN (1) AND c.rowid=1
2017-05-05 14:35:59 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:35:59 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'commande' ORDER BY pos
2017-05-05 14:35:59 DEBUG   10.10.0.249     Commande::fetch_lines
2017-05-05 14:35:59 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.product_type, l.fk_commande, l.label as custom_label, l.description, l.price, l.qty, l.tva_tx, l.localtax1_tx, l.localtax2_tx, l.fk_remise_except, l.remise_percent, l.subprice, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.rang, l.info_bits, l.special_code, l.total_ht, l.total_ttc, l.total_tva, l.total_localtax1, l.total_localtax2, l.date_start, l.date_end, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.description as product_desc, p.fk_product_type, p.label as product_label, p.weight, p.weight_units, p.volume, p.volume_units FROM llx_commandedet as l LEFT JOIN llx_product as p ON (p.rowid = l.fk_product) WHERE l.fk_commande = 1 ORDER BY l.rang, l.rowid
2017-05-05 14:35:59 DEBUG   10.10.0.249     sql=SELECT s.rowid as socid, s.nom as name, s.client, c.rowid, c.ref, c.ref_client, c.total_ht FROM llx_societe as s, llx_commande as c WHERE c.fk_soc = s.rowid AND c.fk_soc = 3
2017-05-05 14:35:59 DEBUG   10.10.0.249     ActionComm::getActions
2017-05-05 14:35:59 DEBUG   10.10.0.249     sql=SELECT a.id FROM llx_actioncomm as a WHERE a.entity IN (1) AND a.fk_element = 6 AND a.elementtype = 'invoice'
2017-05-05 14:35:59 DEBUG   10.10.0.249     ActionComm::fetch
2017-05-05 14:35:59 DEBUG   10.10.0.249     sql=SELECT a.id, a.id as ref, a.ref_ext, a.datep, a.datep2, a.durationp, a.datec, a.tms as datem, a.code, a.label, a.note, a.fk_soc, a.fk_project, a.fk_user_author, a.fk_user_mod, a.fk_user_action, a.fk_user_done, a.fk_contact, a.percent as percentage, a.fk_element, a.elementtype, a.priority, a.fulldayevent, a.location, a.punctual, a.transparency, c.id as type_id, c.code as type_code, c.libelle, s.nom as socname, u.firstname, u.lastname as lastname FROM llx_actioncomm as a  LEFT JOIN llx_c_actioncomm as c ON a.fk_action=c.id  LEFT JOIN llx_user as u on u.rowid = a.fk_user_author LEFT JOIN llx_societe as s on s.rowid = a.fk_soc WHERE  a.id=11
2017-05-05 14:35:59 DEBUG   10.10.0.249     ActionComm::fetch
2017-05-05 14:35:59 DEBUG   10.10.0.249     sql=SELECT a.id, a.id as ref, a.ref_ext, a.datep, a.datep2, a.durationp, a.datec, a.tms as datem, a.code, a.label, a.note, a.fk_soc, a.fk_project, a.fk_user_author, a.fk_user_mod, a.fk_user_action, a.fk_user_done, a.fk_contact, a.percent as percentage, a.fk_element, a.elementtype, a.priority, a.fulldayevent, a.location, a.punctual, a.transparency, c.id as type_id, c.code as type_code, c.libelle, s.nom as socname, u.firstname, u.lastname as lastname FROM llx_actioncomm as a  LEFT JOIN llx_c_actioncomm as c ON a.fk_action=c.id  LEFT JOIN llx_user as u on u.rowid = a.fk_user_author LEFT JOIN llx_societe as s on s.rowid = a.fk_soc WHERE  a.id=14
2017-05-05 14:35:59 DEBUG   10.10.0.249     --- End access to /dolibarr/compta/facture.php
2017-05-05 14:36:16 DEBUG   10.10.0.249     This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:36:16 DEBUG   10.10.0.249     User::fetch
2017-05-05 14:36:16 DEBUG   10.10.0.249     sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:36:16 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:16 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:36:16 DEBUG   10.10.0.249     sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:36:16 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:36:16 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:36:16 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:36:16 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:36:16 DEBUG   10.10.0.249     --- Access to /dolibarr/compta/facture.php
2017-05-05 14:36:16 DEBUG   10.10.0.249     sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:36:16 DEBUG   10.10.0.249     Menubase::menuLoad mymainmenu=home myleftmenu= type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:36:16 DEBUG   10.10.0.249     sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:36:16 DEBUG   10.10.0.249     Facture::fetch
2017-05-05 14:36:16 DEBUG   10.10.0.249     sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=6
2017-05-05 14:36:16 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:16 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:36:16 DEBUG   10.10.0.249     Facture::fetch_lines
2017-05-05 14:36:16 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 6 ORDER BY l.rang, l.rowid
2017-05-05 14:36:16 DEBUG   10.10.0.249     Facture::fetch
2017-05-05 14:36:16 DEBUG   10.10.0.249     sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=6
2017-05-05 14:36:16 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:16 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:36:16 DEBUG   10.10.0.249     Facture::fetch_lines
2017-05-05 14:36:16 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 6 ORDER BY l.rang, l.rowid
2017-05-05 14:36:16 DEBUG   10.10.0.249     BEGIN Transaction
2017-05-05 14:36:16 DEBUG   10.10.0.249      Facture::set_unpaid
2017-05-05 14:36:16 DEBUG   10.10.0.249      sql=UPDATE llx_facture SET paye=0, fk_statut=1, close_code=null, close_note=null WHERE rowid = 6
2017-05-05 14:36:16 DEBUG   10.10.0.249      Interfaces::run_triggers action=BILL_UNPAYED Triggers for file 'interface_20_modPaypal_PaypalWorkflow.class.php' need module to be enabled
2017-05-05 14:36:16 DEBUG   10.10.0.249      Interfaces::run_triggers action=BILL_UNPAYED Launch runTrigger for file 'interface_20_all_Logevents.class.php'
2017-05-05 14:36:16 DEBUG   10.10.0.249      Interfaces::run_triggers action=BILL_UNPAYED Launch runTrigger for file 'interface_20_modWorkflow_WorkflowManager.class.php'
2017-05-05 14:36:16 DEBUG   10.10.0.249      Interfaces::run_triggers action=BILL_UNPAYED Launch runTrigger for file 'interface_50_modAgenda_ActionsAuto.class.php'
2017-05-05 14:36:16 DEBUG   10.10.0.249      Interfaces::run_triggers action=BILL_UNPAYED Launch runTrigger for file 'interface_50_modLdap_Ldapsynchro.class.php'
2017-05-05 14:36:16 DEBUG   10.10.0.249      Interfaces::run_triggers action=BILL_UNPAYED Launch runTrigger for file 'interface_50_modMailmanspip_Mailmanspipsynchro.class.php'
2017-05-05 14:36:16 DEBUG   10.10.0.249      Interfaces::run_triggers action=BILL_UNPAYED Launch runTrigger for file 'interface_50_modNotification_Notification.class.php'
2017-05-05 14:36:16 DEBUG   10.10.0.249      Trigger 'Notification' for action 'BILL_UNPAYED' launched by C:\dolibarr\www\dolibarr\htdocs\core\triggers\interface_50_modNotification_Notification.class.php. id=6
2017-05-05 14:36:16 DEBUG   10.10.0.249      Notify::send notifcode=BILL_UNPAYED, object=6
2017-05-05 14:36:16 DEBUG   10.10.0.249     COMMIT Transaction
2017-05-05 14:36:16 DEBUG   10.10.0.249     --- End access to /dolibarr/compta/facture.php
2017-05-05 14:36:17 DEBUG   10.10.0.249     This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:36:17 DEBUG   10.10.0.249     User::fetch
2017-05-05 14:36:17 DEBUG   10.10.0.249     sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:36:17 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:17 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:36:17 DEBUG   10.10.0.249     sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:36:17 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:36:17 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:36:17 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:36:17 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:36:17 DEBUG   10.10.0.249     --- Access to /dolibarr/compta/facture.php
2017-05-05 14:36:17 DEBUG   10.10.0.249     sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:36:17 DEBUG   10.10.0.249     Menubase::menuLoad mymainmenu=home myleftmenu= type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:36:17 DEBUG   10.10.0.249     sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:36:18 DEBUG   10.10.0.249     Facture::fetch
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=6
2017-05-05 14:36:18 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:36:18 DEBUG   10.10.0.249     Facture::fetch_lines
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 6 ORDER BY l.rang, l.rowid
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:36:18 DEBUG   10.10.0.249     Facture::fetch
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=6
2017-05-05 14:36:18 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:36:18 DEBUG   10.10.0.249     Facture::fetch_lines
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 6 ORDER BY l.rang, l.rowid
2017-05-05 14:36:18 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:36:18 DEBUG   10.10.0.249     Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:36:18 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:36:18 DEBUG   10.10.0.249     Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:36:18 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:36:18 DEBUG   10.10.0.249     useRevenueStamp
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT COUNT(*) as nb FROM llx_c_revenuestamp as r, llx_c_country as c WHERE r.fk_pays = c.rowid AND c.code = 'ES' AND r.active = 1
2017-05-05 14:36:18 DEBUG   10.10.0.249     Facture::getSommePaiement
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 6
2017-05-05 14:36:18 DEBUG   10.10.0.249     DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 2
2017-05-05 14:36:18 DEBUG   10.10.0.249     DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 3
2017-05-05 14:36:18 DEBUG   10.10.0.249     DiscountAbsolute::getAvailableDiscounts
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT SUM(rc.amount_ttc) as amount FROM llx_societe_remise_except as rc WHERE (rc.fk_facture IS NULL AND rc.fk_facture_line IS NULL) AND rc.fk_soc = 3 AND (fk_facture_source IS NULL OR (fk_facture_source IS NOT NULL AND description LIKE '(DEPOSIT)%'))
2017-05-05 14:36:18 DEBUG   10.10.0.249     DiscountAbsolute::getAvailableDiscounts
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT SUM(rc.amount_ttc) as amount FROM llx_societe_remise_except as rc WHERE (rc.fk_facture IS NULL AND rc.fk_facture_line IS NULL) AND rc.fk_soc = 3 AND (fk_facture_source IS NOT NULL AND description NOT LIKE '(DEPOSIT)%')
2017-05-05 14:36:18 DEBUG   10.10.0.249     User::fetch
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.rowid = 1
2017-05-05 14:36:18 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 6 AND type < 2 ORDER BY fk_statut DESC
2017-05-05 14:36:18 DEBUG   10.10.0.249     Facture::liste_contact
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT ec.rowid, ec.statut as statuslink, ec.fk_socpeople as id, ec.fk_c_type_contact, '-1' as socid, t.statut as statuscontact, t.civility as civility, t.lastname as lastname, t.firstname, t.email, tc.source, tc.element, tc.code, tc.libelle FROM llx_c_type_contact tc, llx_element_contact ec LEFT JOIN llx_user t on ec.fk_socpeople = t.rowid WHERE ec.element_id =6 AND ec.fk_c_type_contact=tc.rowid AND tc.element='facture' AND tc.source = 'internal' AND tc.active=1 ORDER BY t.lastname ASC
2017-05-05 14:36:18 DEBUG   10.10.0.249     Facture::liste_contact
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT ec.rowid, ec.statut as statuslink, ec.fk_socpeople as id, ec.fk_c_type_contact, t.fk_soc as socid, t.statut as statuscontact, t.civility as civility, t.lastname as lastname, t.firstname, t.email, tc.source, tc.element, tc.code, tc.libelle FROM llx_c_type_contact tc, llx_element_contact ec LEFT JOIN llx_socpeople t on ec.fk_socpeople = t.rowid WHERE ec.element_id =6 AND ec.fk_c_type_contact=tc.rowid AND tc.element='facture' AND tc.source = 'external' AND tc.active=1 ORDER BY t.lastname ASC
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT COUNT(pfd.rowid) as nb FROM llx_prelevement_facture_demande as pfd WHERE pfd.fk_facture = 6
2017-05-05 14:36:18 DEBUG   10.10.0.249     files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1704-0004 types=files recursive=0 filter= excludefilter="(\\.meta|_preview\\.png)$"
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT COUNT(rowid) as nb FROM llx_links WHERE objecttype = 'facture' AND objectid = 6 AND entity = 1
2017-05-05 14:36:18 DEBUG   10.10.0.249     DiscountAbsolute::fetch
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT sr.rowid, sr.fk_soc, sr.fk_user, sr.amount_ht, sr.amount_tva, sr.amount_ttc, sr.tva_tx, sr.fk_facture_line, sr.fk_facture, sr.fk_facture_source, sr.description, sr.datec, f.facnumber as ref_facture_source FROM llx_societe_remise_except as sr LEFT JOIN llx_facture as f ON sr.fk_facture_source = f.rowid WHERE sr.fk_facture_source=6
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT MAX(te.facnumber) FROM llx_facture as te WHERE te.facnumber < 'FA1704-0004' AND te.entity IN (1)
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT MIN(te.facnumber) FROM llx_facture as te WHERE te.facnumber > 'FA1704-0004' AND te.entity IN (1)
2017-05-05 14:36:18 DEBUG   10.10.0.249     get_OutstandingBill
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT rowid, total_ttc FROM llx_facture as f WHERE fk_soc = 3 AND paye = 0 AND fk_statut <> 0 AND fk_statut <> 3 AND fk_statut <> 2
2017-05-05 14:36:18 DEBUG   10.10.0.249     Facture::getSommePaiement
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 3
2017-05-05 14:36:18 DEBUG   10.10.0.249     DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 2
2017-05-05 14:36:18 DEBUG   10.10.0.249     DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 3
2017-05-05 14:36:18 DEBUG   10.10.0.249     Facture::getSommePaiement
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 4
2017-05-05 14:36:18 DEBUG   10.10.0.249     DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 4 AND f.type = 2
2017-05-05 14:36:18 DEBUG   10.10.0.249     DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 4 AND f.type = 3
2017-05-05 14:36:18 DEBUG   10.10.0.249     Facture::getSommePaiement
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 6
2017-05-05 14:36:18 DEBUG   10.10.0.249     DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 2
2017-05-05 14:36:18 DEBUG   10.10.0.249     DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 3
2017-05-05 14:36:18 DEBUG   10.10.0.249     Translate::loadCacheCurrencies
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT code_iso, label, unicode FROM llx_c_currencies WHERE active = 1 AND code_iso = 'EUR'
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 6 AND type = 2
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT p.datep as dp, p.ref, p.num_paiement, p.rowid, p.fk_bank, c.code as payment_code, c.libelle as payment_label, pf.amount, ba.rowid as baid, ba.ref as baref, ba.label FROM llx_c_paiement as c, llx_paiement_facture as pf, llx_paiement as p LEFT JOIN llx_bank as b ON p.fk_bank = b.rowid LEFT JOIN llx_bank_account as ba ON b.fk_account = ba.rowid WHERE pf.fk_facture = 6 AND p.fk_paiement = c.id AND pf.fk_paiement = p.rowid ORDER BY p.datep, p.tms
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT fk_facture FROM llx_paiement_facture as pf, llx_facture as f WHERE pf.fk_facture = f.rowid AND fk_paiement = 1
2017-05-05 14:36:18 DEBUG   10.10.0.249     Facture::fetch
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=2
2017-05-05 14:36:18 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:36:18 DEBUG   10.10.0.249     Facture::fetch_lines
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 2 ORDER BY l.rang, l.rowid
2017-05-05 14:36:18 DEBUG   10.10.0.249     Facture::fetch
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=3
2017-05-05 14:36:18 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:36:18 DEBUG   10.10.0.249     Facture::fetch_lines
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 3 ORDER BY l.rang, l.rowid
2017-05-05 14:36:18 DEBUG   10.10.0.249     Facture::fetch
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=5
2017-05-05 14:36:18 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:36:18 DEBUG   10.10.0.249     Facture::fetch_lines
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 5 ORDER BY l.rang, l.rowid
2017-05-05 14:36:18 DEBUG   10.10.0.249     Facture::fetch
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=6
2017-05-05 14:36:18 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:36:18 DEBUG   10.10.0.249     Facture::fetch_lines
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 6 ORDER BY l.rang, l.rowid
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT re.rowid, re.amount_ht, re.amount_tva, re.amount_ttc, re.description, re.fk_facture_source FROM llx_societe_remise_except as re WHERE fk_facture = 6
2017-05-05 14:36:18 DEBUG   10.10.0.249     Form::load_cache_conditions_paiements
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT rowid, code, libelle as label FROM llx_c_payment_term WHERE active > 0 ORDER BY sortorder
2017-05-05 14:36:18 DEBUG   10.10.0.249     Form::load_cache_types_paiements
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT id, code, libelle as label, type, active FROM llx_c_paiement
2017-05-05 14:36:18 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT libelle as label FROM llx_c_paiement WHERE code = 'LCR'
2017-05-05 14:36:18 DEBUG   10.10.0.249     Account::fetch
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT ba.rowid, ba.ref, ba.label, ba.bank, ba.number, ba.courant, ba.clos, ba.rappro, ba.url, ba.code_banque, ba.code_guichet, ba.cle_rib, ba.bic, ba.iban_prefix as iban, ba.domiciliation, ba.proprio, ba.owner_address, ba.state_id, ba.fk_pays as country_id, ba.account_number, ba.accountancy_journal, ba.currency_code, ba.min_allowed, ba.min_desired, ba.comment, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_bank_account as ba LEFT JOIN llx_c_country as c ON ba.fk_pays = c.rowid LEFT JOIN llx_c_departements as d ON ba.state_id = d.rowid WHERE entity IN (1) AND ba.rowid  = 1
2017-05-05 14:36:18 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'bank_account' ORDER BY pos
2017-05-05 14:36:18 DEBUG   10.10.0.249     useLocalTax
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:36:18 DEBUG   10.10.0.249     Facture::fetch_lines
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 6 ORDER BY l.rang, l.rowid
2017-05-05 14:36:18 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facturedet' ORDER BY pos
2017-05-05 14:36:18 DEBUG   10.10.0.249     Product::fetch id=1 ref= ref_ext=
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT rowid, ref, ref_ext, label, description, url, note, customcode, fk_country, price, price_ttc, price_min, price_min_ttc, price_base_type, cost_price, default_vat_code, tva_tx, recuperableonly as tva_npr, localtax1_tx, localtax2_tx, localtax1_type, localtax2_type, tosell, tobuy, fk_product_type, duration, seuil_stock_alerte, canvas, weight, weight_units, length, length_units, surface, surface_units, volume, volume_units, barcode, fk_barcode_type, finished, accountancy_code_buy, accountancy_code_sell, stock, pmp, datec, tms, import_key, entity, desiredstock, tobatch, fk_unit, fk_price_expression, price_autogen FROM llx_product WHERE rowid = 1
2017-05-05 14:36:18 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'product' ORDER BY pos
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT MAX(CAST(SUBSTRING(facnumber FROM 8) AS SIGNED)) as max FROM llx_facture WHERE facnumber LIKE 'FA____-%' AND entity IN (1)
2017-05-05 14:36:18 DEBUG   10.10.0.249     mod_facture_terre::getNextValue
2017-05-05 14:36:18 DEBUG   10.10.0.249     mod_facture_terre::getNextValue
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT facnumber as ref FROM llx_facture WHERE facnumber LIKE 'FA____-0004' AND entity IN (1)
2017-05-05 14:36:18 DEBUG   10.10.0.249     Facture::getSommePaiement
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 6
2017-05-05 14:36:18 DEBUG   10.10.0.249     /core/lib/function2.lib.php::getListOfModels
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT nom as id, nom as lib, libelle as label, description as description FROM llx_document_model WHERE type = 'invoice' AND entity IN (0,1) ORDER BY description DESC
2017-05-05 14:36:18 DEBUG   10.10.0.249     files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1704-0004 types=files recursive=0 filter= excludefilter="(\\.meta|_preview\\.png)$"
2017-05-05 14:36:18 DEBUG   10.10.0.249     Facture::fetchObjectLink
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT rowid, fk_source, sourcetype, fk_target, targettype FROM llx_element_element WHERE (fk_source = '6' AND sourcetype = 'facture') OR (fk_target = '6' AND targettype = 'facture') ORDER BY sourcetype
2017-05-05 14:36:18 DEBUG   10.10.0.249     Commande::fetch
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT c.rowid, c.date_creation, c.ref, c.fk_soc, c.fk_user_author, c.fk_statut, c.amount_ht, c.total_ht, c.total_ttc, c.tva as total_tva, c.localtax1 as total_localtax1, c.localtax2 as total_localtax2, c.fk_cond_reglement, c.fk_mode_reglement, c.fk_availability, c.fk_input_reason, c.fk_account, c.date_commande, c.date_livraison, c.fk_shipping_method, c.fk_warehouse, c.fk_projet, c.remise_percent, c.remise, c.remise_absolue, c.source, c.facture as billed, c.note_private, c.note_public, c.ref_client, c.ref_ext, c.ref_int, c.model_pdf, c.fk_delivery_address, c.extraparams, c.fk_incoterms, c.location_incoterms, c.fk_multicurrency, c.multicurrency_code, c.multicurrency_tx, c.multicurrency_total_ht, c.multicurrency_total_tva, c.multicurrency_total_ttc, i.libelle as libelle_incoterms, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, cr.code as cond_reglement_code, cr.libelle as cond_reglement_libelle, cr.libelle_facture as cond_reglement_libelle_doc, ca.code as availability_code, ca.label as availability_label, dr.code as demand_reason_code FROM llx_commande as c LEFT JOIN llx_c_payment_term as cr ON (c.fk_cond_reglement = cr.rowid) LEFT JOIN llx_c_paiement as p ON (c.fk_mode_reglement = p.id) LEFT JOIN llx_c_availability as ca ON (c.fk_availability = ca.rowid) LEFT JOIN llx_c_input_reason as dr ON (c.fk_input_reason = ca.rowid) LEFT JOIN llx_c_incoterms as i ON c.fk_incoterms = i.rowid WHERE c.entity IN (1) AND c.rowid=1
2017-05-05 14:36:18 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'commande' ORDER BY pos
2017-05-05 14:36:18 DEBUG   10.10.0.249     Commande::fetch_lines
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.product_type, l.fk_commande, l.label as custom_label, l.description, l.price, l.qty, l.tva_tx, l.localtax1_tx, l.localtax2_tx, l.fk_remise_except, l.remise_percent, l.subprice, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.rang, l.info_bits, l.special_code, l.total_ht, l.total_ttc, l.total_tva, l.total_localtax1, l.total_localtax2, l.date_start, l.date_end, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.description as product_desc, p.fk_product_type, p.label as product_label, p.weight, p.weight_units, p.volume, p.volume_units FROM llx_commandedet as l LEFT JOIN llx_product as p ON (p.rowid = l.fk_product) WHERE l.fk_commande = 1 ORDER BY l.rang, l.rowid
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT s.rowid as socid, s.nom as name, s.client, c.rowid, c.ref, c.ref_client, c.total_ht FROM llx_societe as s, llx_commande as c WHERE c.fk_soc = s.rowid AND c.fk_soc = 3
2017-05-05 14:36:18 DEBUG   10.10.0.249     ActionComm::getActions
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT a.id FROM llx_actioncomm as a WHERE a.entity IN (1) AND a.fk_element = 6 AND a.elementtype = 'invoice'
2017-05-05 14:36:18 DEBUG   10.10.0.249     ActionComm::fetch
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT a.id, a.id as ref, a.ref_ext, a.datep, a.datep2, a.durationp, a.datec, a.tms as datem, a.code, a.label, a.note, a.fk_soc, a.fk_project, a.fk_user_author, a.fk_user_mod, a.fk_user_action, a.fk_user_done, a.fk_contact, a.percent as percentage, a.fk_element, a.elementtype, a.priority, a.fulldayevent, a.location, a.punctual, a.transparency, c.id as type_id, c.code as type_code, c.libelle, s.nom as socname, u.firstname, u.lastname as lastname FROM llx_actioncomm as a  LEFT JOIN llx_c_actioncomm as c ON a.fk_action=c.id  LEFT JOIN llx_user as u on u.rowid = a.fk_user_author LEFT JOIN llx_societe as s on s.rowid = a.fk_soc WHERE  a.id=11
2017-05-05 14:36:18 DEBUG   10.10.0.249     ActionComm::fetch
2017-05-05 14:36:18 DEBUG   10.10.0.249     sql=SELECT a.id, a.id as ref, a.ref_ext, a.datep, a.datep2, a.durationp, a.datec, a.tms as datem, a.code, a.label, a.note, a.fk_soc, a.fk_project, a.fk_user_author, a.fk_user_mod, a.fk_user_action, a.fk_user_done, a.fk_contact, a.percent as percentage, a.fk_element, a.elementtype, a.priority, a.fulldayevent, a.location, a.punctual, a.transparency, c.id as type_id, c.code as type_code, c.libelle, s.nom as socname, u.firstname, u.lastname as lastname FROM llx_actioncomm as a  LEFT JOIN llx_c_actioncomm as c ON a.fk_action=c.id  LEFT JOIN llx_user as u on u.rowid = a.fk_user_author LEFT JOIN llx_societe as s on s.rowid = a.fk_soc WHERE  a.id=14
2017-05-05 14:36:18 DEBUG   10.10.0.249     --- End access to /dolibarr/compta/facture.php
2017-05-05 14:36:23 DEBUG   10.10.0.249     This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:36:23 DEBUG   10.10.0.249     User::fetch
2017-05-05 14:36:23 DEBUG   10.10.0.249     sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:36:23 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:23 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:36:23 DEBUG   10.10.0.249     sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:36:23 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:36:23 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:36:23 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:36:23 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:36:23 DEBUG   10.10.0.249     --- Access to /dolibarr/compta/facture.php
2017-05-05 14:36:23 DEBUG   10.10.0.249     sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:36:23 DEBUG   10.10.0.249     Menubase::menuLoad mymainmenu=home myleftmenu= type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:36:23 DEBUG   10.10.0.249     sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:36:23 DEBUG   10.10.0.249     Facture::fetch
2017-05-05 14:36:23 DEBUG   10.10.0.249     sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=6
2017-05-05 14:36:23 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:23 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:36:23 DEBUG   10.10.0.249     Facture::fetch_lines
2017-05-05 14:36:23 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 6 ORDER BY l.rang, l.rowid
2017-05-05 14:36:23 DEBUG   10.10.0.249     Facture::fetch
2017-05-05 14:36:23 DEBUG   10.10.0.249     sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=6
2017-05-05 14:36:23 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:23 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:36:23 DEBUG   10.10.0.249     Facture::fetch_lines
2017-05-05 14:36:23 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 6 ORDER BY l.rang, l.rowid
2017-05-05 14:36:23 DEBUG   10.10.0.249     sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:36:23 DEBUG   10.10.0.249     Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:36:23 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:23 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:36:23 DEBUG   10.10.0.249     Facture::setDocModel
2017-05-05 14:36:23 DEBUG   10.10.0.249     sql=UPDATE llx_facture SET model_pdf = 'crabe' WHERE rowid = 6
2017-05-05 14:36:23 DEBUG   10.10.0.249     sql=SELECT code, label, width, height, unit FROM llx_c_paper_format WHERE code = 'EUA4'
2017-05-05 14:36:23 DEBUG   10.10.0.249     sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:36:23 DEBUG   10.10.0.249     Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:36:23 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:23 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:36:23 DEBUG   10.10.0.249     Facture::getSommePaiement
2017-05-05 14:36:23 DEBUG   10.10.0.249     sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 6
2017-05-05 14:36:23 DEBUG   10.10.0.249     DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:36:23 DEBUG   10.10.0.249     sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 2
2017-05-05 14:36:23 DEBUG   10.10.0.249     DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:36:23 DEBUG   10.10.0.249     sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 3
2017-05-05 14:36:23 DEBUG   10.10.0.249     functions.lib::dol_mkdir: dir=c:/dolibarr/dolibarr_documents/facture/FA1704-0004
2017-05-05 14:36:23 DEBUG   10.10.0.249     functions.lib::dol_mkdir: Directory 'c:/dolibarr/dolibarr_documents/facture' does not exists or is outside open_basedir PHP setting.
2017-05-05 14:36:23 DEBUG   10.10.0.249     functions.lib::dol_mkdir: Directory 'c:/dolibarr/dolibarr_documents/facture' created
2017-05-05 14:36:23 DEBUG   10.10.0.249     functions.lib::dol_mkdir: Directory 'c:/dolibarr/dolibarr_documents/facture/FA1704-0004' does not exists or is outside open_basedir PHP setting.
2017-05-05 14:36:23 DEBUG   10.10.0.249     functions.lib::dol_mkdir: Directory 'c:/dolibarr/dolibarr_documents/facture/FA1704-0004' created
2017-05-05 14:36:23 DEBUG   10.10.0.249     Facture::getListOfPayments
2017-05-05 14:36:23 DEBUG   10.10.0.249     sql=SELECT pf.amount, pf.multicurrency_amount, p.fk_paiement, p.datep, p.num_paiement as num, t.code FROM llx_paiement_facture as pf, llx_paiement as p, llx_c_paiement as t WHERE pf.fk_facture = 6 AND pf.fk_paiement = p.rowid AND p.fk_paiement = t.id
2017-05-05 14:36:23 DEBUG   10.10.0.249     functions.lib::dol_mkdir: dir=c:/dolibarr/dolibarr_documents/admin/temp/
2017-05-05 14:36:23 DEBUG   10.10.0.249     functions.lib::dol_mkdir: Directory 'c:/dolibarr/dolibarr_documents/admin' does not exists or is outside open_basedir PHP setting.
2017-05-05 14:36:23 DEBUG   10.10.0.249     functions.lib::dol_mkdir: Directory 'c:/dolibarr/dolibarr_documents/admin' created
2017-05-05 14:36:23 DEBUG   10.10.0.249     functions.lib::dol_mkdir: Directory 'c:/dolibarr/dolibarr_documents/admin/temp' does not exists or is outside open_basedir PHP setting.
2017-05-05 14:36:23 DEBUG   10.10.0.249     functions.lib::dol_mkdir: Directory 'c:/dolibarr/dolibarr_documents/admin/temp' created
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 6 AND type < 2 AND fk_statut = 1 ORDER BY fk_statut DESC
2017-05-05 14:36:24 DEBUG   10.10.0.249     Facture::fetchObjectLink
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT rowid, fk_source, sourcetype, fk_target, targettype FROM llx_element_element WHERE (fk_source = '6' AND sourcetype = 'facture') OR (fk_target = '6' AND targettype = 'facture') ORDER BY sourcetype
2017-05-05 14:36:24 DEBUG   10.10.0.249     Commande::fetch
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT c.rowid, c.date_creation, c.ref, c.fk_soc, c.fk_user_author, c.fk_statut, c.amount_ht, c.total_ht, c.total_ttc, c.tva as total_tva, c.localtax1 as total_localtax1, c.localtax2 as total_localtax2, c.fk_cond_reglement, c.fk_mode_reglement, c.fk_availability, c.fk_input_reason, c.fk_account, c.date_commande, c.date_livraison, c.fk_shipping_method, c.fk_warehouse, c.fk_projet, c.remise_percent, c.remise, c.remise_absolue, c.source, c.facture as billed, c.note_private, c.note_public, c.ref_client, c.ref_ext, c.ref_int, c.model_pdf, c.fk_delivery_address, c.extraparams, c.fk_incoterms, c.location_incoterms, c.fk_multicurrency, c.multicurrency_code, c.multicurrency_tx, c.multicurrency_total_ht, c.multicurrency_total_tva, c.multicurrency_total_ttc, i.libelle as libelle_incoterms, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, cr.code as cond_reglement_code, cr.libelle as cond_reglement_libelle, cr.libelle_facture as cond_reglement_libelle_doc, ca.code as availability_code, ca.label as availability_label, dr.code as demand_reason_code FROM llx_commande as c LEFT JOIN llx_c_payment_term as cr ON (c.fk_cond_reglement = cr.rowid) LEFT JOIN llx_c_paiement as p ON (c.fk_mode_reglement = p.id) LEFT JOIN llx_c_availability as ca ON (c.fk_availability = ca.rowid) LEFT JOIN llx_c_input_reason as dr ON (c.fk_input_reason = ca.rowid) LEFT JOIN llx_c_incoterms as i ON c.fk_incoterms = i.rowid WHERE c.entity IN (1) AND c.rowid=1
2017-05-05 14:36:24 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'commande' ORDER BY pos
2017-05-05 14:36:24 DEBUG   10.10.0.249     Commande::fetch_lines
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.product_type, l.fk_commande, l.label as custom_label, l.description, l.price, l.qty, l.tva_tx, l.localtax1_tx, l.localtax2_tx, l.fk_remise_except, l.remise_percent, l.subprice, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.rang, l.info_bits, l.special_code, l.total_ht, l.total_ttc, l.total_tva, l.total_localtax1, l.total_localtax2, l.date_start, l.date_end, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.description as product_desc, p.fk_product_type, p.label as product_label, p.weight, p.weight_units, p.volume, p.volume_units FROM llx_commandedet as l LEFT JOIN llx_product as p ON (p.rowid = l.fk_product) WHERE l.fk_commande = 1 ORDER BY l.rang, l.rowid
2017-05-05 14:36:24 DEBUG   10.10.0.249     Company.lib::getState
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT rowid, code_departement as code, nom as label FROM llx_c_departements WHERE rowid=524
2017-05-05 14:36:24 DEBUG   10.10.0.249     Company.lib::getState
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT rowid, code_departement as code, nom as label FROM llx_c_departements WHERE rowid=524
2017-05-05 14:36:24 DEBUG   10.10.0.249     Facture::getIdContact
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT ec.fk_socpeople FROM llx_element_contact as ec, llx_socpeople as c, llx_c_type_contact as tc WHERE ec.element_id = 6 AND ec.fk_socpeople = c.rowid AND c.entity IN (1) AND ec.fk_c_type_contact = tc.rowid AND tc.element = 'facture' AND tc.source = 'external' AND tc.code = 'BILLING' AND tc.active = 1
2017-05-05 14:36:24 DEBUG   10.10.0.249     Product::fetch id=1 ref= ref_ext=
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT rowid, ref, ref_ext, label, description, url, note, customcode, fk_country, price, price_ttc, price_min, price_min_ttc, price_base_type, cost_price, default_vat_code, tva_tx, recuperableonly as tva_npr, localtax1_tx, localtax2_tx, localtax1_type, localtax2_type, tosell, tobuy, fk_product_type, duration, seuil_stock_alerte, canvas, weight, weight_units, length, length_units, surface, surface_units, volume, volume_units, barcode, fk_barcode_type, finished, accountancy_code_buy, accountancy_code_sell, stock, pmp, datec, tms, import_key, entity, desiredstock, tobatch, fk_unit, fk_price_expression, price_autogen FROM llx_product WHERE rowid = 1
2017-05-05 14:36:24 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'product' ORDER BY pos
2017-05-05 14:36:24 DEBUG   10.10.0.249     DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 2
2017-05-05 14:36:24 DEBUG   10.10.0.249     DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 3
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT re.rowid, re.amount_ht, re.amount_tva, re.amount_ttc, re.description, re.fk_facture_source, f.type, f.datef FROM llx_societe_remise_except as re, llx_facture as f WHERE re.fk_facture_source = f.rowid AND re.fk_facture = 6
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT p.datep as date, p.fk_paiement, p.num_paiement as num, pf.amount as amount, cp.code FROM llx_paiement_facture as pf, llx_paiement as p LEFT JOIN llx_c_paiement as cp ON p.fk_paiement = cp.id WHERE pf.fk_paiement = p.rowid AND pf.fk_facture = 6 ORDER BY p.datep
2017-05-05 14:36:24 DEBUG   10.10.0.249     Company.lib::getFormeJuridiqueLabel
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT libelle FROM llx_c_forme_juridique WHERE code='415'
2017-05-05 14:36:24 DEBUG   10.10.0.249     Translate::loadCacheCurrencies
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT code_iso, label, unicode FROM llx_c_currencies WHERE active = 1 AND code_iso = 'EUR'
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:36:24 DEBUG   10.10.0.249     Facture::fetch
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=6
2017-05-05 14:36:24 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:36:24 DEBUG   10.10.0.249     Facture::fetch_lines
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 6 ORDER BY l.rang, l.rowid
2017-05-05 14:36:24 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:36:24 DEBUG   10.10.0.249     Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:36:24 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:36:24 DEBUG   10.10.0.249     Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:36:24 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:36:24 DEBUG   10.10.0.249     useRevenueStamp
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT COUNT(*) as nb FROM llx_c_revenuestamp as r, llx_c_country as c WHERE r.fk_pays = c.rowid AND c.code = 'ES' AND r.active = 1
2017-05-05 14:36:24 DEBUG   10.10.0.249     Facture::getSommePaiement
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 6
2017-05-05 14:36:24 DEBUG   10.10.0.249     DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 2
2017-05-05 14:36:24 DEBUG   10.10.0.249     DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 3
2017-05-05 14:36:24 DEBUG   10.10.0.249     DiscountAbsolute::getAvailableDiscounts
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT SUM(rc.amount_ttc) as amount FROM llx_societe_remise_except as rc WHERE (rc.fk_facture IS NULL AND rc.fk_facture_line IS NULL) AND rc.fk_soc = 3 AND (fk_facture_source IS NULL OR (fk_facture_source IS NOT NULL AND description LIKE '(DEPOSIT)%'))
2017-05-05 14:36:24 DEBUG   10.10.0.249     DiscountAbsolute::getAvailableDiscounts
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT SUM(rc.amount_ttc) as amount FROM llx_societe_remise_except as rc WHERE (rc.fk_facture IS NULL AND rc.fk_facture_line IS NULL) AND rc.fk_soc = 3 AND (fk_facture_source IS NOT NULL AND description NOT LIKE '(DEPOSIT)%')
2017-05-05 14:36:24 DEBUG   10.10.0.249     User::fetch
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.rowid = 1
2017-05-05 14:36:24 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 6 AND type < 2 ORDER BY fk_statut DESC
2017-05-05 14:36:24 DEBUG   10.10.0.249     Facture::liste_contact
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT ec.rowid, ec.statut as statuslink, ec.fk_socpeople as id, ec.fk_c_type_contact, '-1' as socid, t.statut as statuscontact, t.civility as civility, t.lastname as lastname, t.firstname, t.email, tc.source, tc.element, tc.code, tc.libelle FROM llx_c_type_contact tc, llx_element_contact ec LEFT JOIN llx_user t on ec.fk_socpeople = t.rowid WHERE ec.element_id =6 AND ec.fk_c_type_contact=tc.rowid AND tc.element='facture' AND tc.source = 'internal' AND tc.active=1 ORDER BY t.lastname ASC
2017-05-05 14:36:24 DEBUG   10.10.0.249     Facture::liste_contact
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT ec.rowid, ec.statut as statuslink, ec.fk_socpeople as id, ec.fk_c_type_contact, t.fk_soc as socid, t.statut as statuscontact, t.civility as civility, t.lastname as lastname, t.firstname, t.email, tc.source, tc.element, tc.code, tc.libelle FROM llx_c_type_contact tc, llx_element_contact ec LEFT JOIN llx_socpeople t on ec.fk_socpeople = t.rowid WHERE ec.element_id =6 AND ec.fk_c_type_contact=tc.rowid AND tc.element='facture' AND tc.source = 'external' AND tc.active=1 ORDER BY t.lastname ASC
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT COUNT(pfd.rowid) as nb FROM llx_prelevement_facture_demande as pfd WHERE pfd.fk_facture = 6
2017-05-05 14:36:24 DEBUG   10.10.0.249     files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1704-0004 types=files recursive=0 filter= excludefilter="(\\.meta|_preview\\.png)$"
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT COUNT(rowid) as nb FROM llx_links WHERE objecttype = 'facture' AND objectid = 6 AND entity = 1
2017-05-05 14:36:24 DEBUG   10.10.0.249     DiscountAbsolute::fetch
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT sr.rowid, sr.fk_soc, sr.fk_user, sr.amount_ht, sr.amount_tva, sr.amount_ttc, sr.tva_tx, sr.fk_facture_line, sr.fk_facture, sr.fk_facture_source, sr.description, sr.datec, f.facnumber as ref_facture_source FROM llx_societe_remise_except as sr LEFT JOIN llx_facture as f ON sr.fk_facture_source = f.rowid WHERE sr.fk_facture_source=6
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT MAX(te.facnumber) FROM llx_facture as te WHERE te.facnumber < 'FA1704-0004' AND te.entity IN (1)
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT MIN(te.facnumber) FROM llx_facture as te WHERE te.facnumber > 'FA1704-0004' AND te.entity IN (1)
2017-05-05 14:36:24 DEBUG   10.10.0.249     get_OutstandingBill
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT rowid, total_ttc FROM llx_facture as f WHERE fk_soc = 3 AND paye = 0 AND fk_statut <> 0 AND fk_statut <> 3 AND fk_statut <> 2
2017-05-05 14:36:24 DEBUG   10.10.0.249     Facture::getSommePaiement
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 3
2017-05-05 14:36:24 DEBUG   10.10.0.249     DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 2
2017-05-05 14:36:24 DEBUG   10.10.0.249     DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 3
2017-05-05 14:36:24 DEBUG   10.10.0.249     Facture::getSommePaiement
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 4
2017-05-05 14:36:24 DEBUG   10.10.0.249     DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 4 AND f.type = 2
2017-05-05 14:36:24 DEBUG   10.10.0.249     DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 4 AND f.type = 3
2017-05-05 14:36:24 DEBUG   10.10.0.249     Facture::getSommePaiement
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 6
2017-05-05 14:36:24 DEBUG   10.10.0.249     DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 2
2017-05-05 14:36:24 DEBUG   10.10.0.249     DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 3
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 6 AND type = 2
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT p.datep as dp, p.ref, p.num_paiement, p.rowid, p.fk_bank, c.code as payment_code, c.libelle as payment_label, pf.amount, ba.rowid as baid, ba.ref as baref, ba.label FROM llx_c_paiement as c, llx_paiement_facture as pf, llx_paiement as p LEFT JOIN llx_bank as b ON p.fk_bank = b.rowid LEFT JOIN llx_bank_account as ba ON b.fk_account = ba.rowid WHERE pf.fk_facture = 6 AND p.fk_paiement = c.id AND pf.fk_paiement = p.rowid ORDER BY p.datep, p.tms
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT fk_facture FROM llx_paiement_facture as pf, llx_facture as f WHERE pf.fk_facture = f.rowid AND fk_paiement = 1
2017-05-05 14:36:24 DEBUG   10.10.0.249     Facture::fetch
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=2
2017-05-05 14:36:24 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:36:24 DEBUG   10.10.0.249     Facture::fetch_lines
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 2 ORDER BY l.rang, l.rowid
2017-05-05 14:36:24 DEBUG   10.10.0.249     Facture::fetch
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=3
2017-05-05 14:36:24 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:36:24 DEBUG   10.10.0.249     Facture::fetch_lines
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 3 ORDER BY l.rang, l.rowid
2017-05-05 14:36:24 DEBUG   10.10.0.249     Facture::fetch
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=5
2017-05-05 14:36:24 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:36:24 DEBUG   10.10.0.249     Facture::fetch_lines
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 5 ORDER BY l.rang, l.rowid
2017-05-05 14:36:24 DEBUG   10.10.0.249     Facture::fetch
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=6
2017-05-05 14:36:24 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:36:24 DEBUG   10.10.0.249     Facture::fetch_lines
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 6 ORDER BY l.rang, l.rowid
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT re.rowid, re.amount_ht, re.amount_tva, re.amount_ttc, re.description, re.fk_facture_source FROM llx_societe_remise_except as re WHERE fk_facture = 6
2017-05-05 14:36:24 DEBUG   10.10.0.249     Form::load_cache_conditions_paiements
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT rowid, code, libelle as label FROM llx_c_payment_term WHERE active > 0 ORDER BY sortorder
2017-05-05 14:36:24 DEBUG   10.10.0.249     Form::load_cache_types_paiements
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT id, code, libelle as label, type, active FROM llx_c_paiement
2017-05-05 14:36:24 DEBUG   10.10.0.249     Translate::getLabelFromKey
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT libelle as label FROM llx_c_paiement WHERE code = 'LCR'
2017-05-05 14:36:24 DEBUG   10.10.0.249     Account::fetch
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT ba.rowid, ba.ref, ba.label, ba.bank, ba.number, ba.courant, ba.clos, ba.rappro, ba.url, ba.code_banque, ba.code_guichet, ba.cle_rib, ba.bic, ba.iban_prefix as iban, ba.domiciliation, ba.proprio, ba.owner_address, ba.state_id, ba.fk_pays as country_id, ba.account_number, ba.accountancy_journal, ba.currency_code, ba.min_allowed, ba.min_desired, ba.comment, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_bank_account as ba LEFT JOIN llx_c_country as c ON ba.fk_pays = c.rowid LEFT JOIN llx_c_departements as d ON ba.state_id = d.rowid WHERE entity IN (1) AND ba.rowid  = 1
2017-05-05 14:36:24 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'bank_account' ORDER BY pos
2017-05-05 14:36:24 DEBUG   10.10.0.249     useLocalTax
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:36:24 DEBUG   10.10.0.249     Facture::fetch_lines
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 6 ORDER BY l.rang, l.rowid
2017-05-05 14:36:24 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facturedet' ORDER BY pos
2017-05-05 14:36:24 DEBUG   10.10.0.249     Product::fetch id=1 ref= ref_ext=
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT rowid, ref, ref_ext, label, description, url, note, customcode, fk_country, price, price_ttc, price_min, price_min_ttc, price_base_type, cost_price, default_vat_code, tva_tx, recuperableonly as tva_npr, localtax1_tx, localtax2_tx, localtax1_type, localtax2_type, tosell, tobuy, fk_product_type, duration, seuil_stock_alerte, canvas, weight, weight_units, length, length_units, surface, surface_units, volume, volume_units, barcode, fk_barcode_type, finished, accountancy_code_buy, accountancy_code_sell, stock, pmp, datec, tms, import_key, entity, desiredstock, tobatch, fk_unit, fk_price_expression, price_autogen FROM llx_product WHERE rowid = 1
2017-05-05 14:36:24 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'product' ORDER BY pos
2017-05-05 14:36:24 DEBUG   10.10.0.249     sql=SELECT MAX(CAST(SUBSTRING(facnumber FROM 8) AS SIGNED)) as max FROM llx_facture WHERE facnumber LIKE 'FA____-%' AND entity IN (1)
2017-05-05 14:36:25 DEBUG   10.10.0.249     mod_facture_terre::getNextValue
2017-05-05 14:36:25 DEBUG   10.10.0.249     mod_facture_terre::getNextValue
2017-05-05 14:36:25 DEBUG   10.10.0.249     sql=SELECT facnumber as ref FROM llx_facture WHERE facnumber LIKE 'FA____-0004' AND entity IN (1)
2017-05-05 14:36:25 DEBUG   10.10.0.249     Facture::getSommePaiement
2017-05-05 14:36:25 DEBUG   10.10.0.249     sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 6
2017-05-05 14:36:25 DEBUG   10.10.0.249     /core/lib/function2.lib.php::getListOfModels
2017-05-05 14:36:25 DEBUG   10.10.0.249     sql=SELECT nom as id, nom as lib, libelle as label, description as description FROM llx_document_model WHERE type = 'invoice' AND entity IN (0,1) ORDER BY description DESC
2017-05-05 14:36:25 DEBUG   10.10.0.249     files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1704-0004 types=files recursive=0 filter= excludefilter="(\\.meta|_preview\\.png)$"
2017-05-05 14:36:25 DEBUG   10.10.0.249     Facture::fetchObjectLink
2017-05-05 14:36:25 DEBUG   10.10.0.249     sql=SELECT rowid, fk_source, sourcetype, fk_target, targettype FROM llx_element_element WHERE (fk_source = '6' AND sourcetype = 'facture') OR (fk_target = '6' AND targettype = 'facture') ORDER BY sourcetype
2017-05-05 14:36:25 DEBUG   10.10.0.249     Commande::fetch
2017-05-05 14:36:25 DEBUG   10.10.0.249     sql=SELECT c.rowid, c.date_creation, c.ref, c.fk_soc, c.fk_user_author, c.fk_statut, c.amount_ht, c.total_ht, c.total_ttc, c.tva as total_tva, c.localtax1 as total_localtax1, c.localtax2 as total_localtax2, c.fk_cond_reglement, c.fk_mode_reglement, c.fk_availability, c.fk_input_reason, c.fk_account, c.date_commande, c.date_livraison, c.fk_shipping_method, c.fk_warehouse, c.fk_projet, c.remise_percent, c.remise, c.remise_absolue, c.source, c.facture as billed, c.note_private, c.note_public, c.ref_client, c.ref_ext, c.ref_int, c.model_pdf, c.fk_delivery_address, c.extraparams, c.fk_incoterms, c.location_incoterms, c.fk_multicurrency, c.multicurrency_code, c.multicurrency_tx, c.multicurrency_total_ht, c.multicurrency_total_tva, c.multicurrency_total_ttc, i.libelle as libelle_incoterms, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, cr.code as cond_reglement_code, cr.libelle as cond_reglement_libelle, cr.libelle_facture as cond_reglement_libelle_doc, ca.code as availability_code, ca.label as availability_label, dr.code as demand_reason_code FROM llx_commande as c LEFT JOIN llx_c_payment_term as cr ON (c.fk_cond_reglement = cr.rowid) LEFT JOIN llx_c_paiement as p ON (c.fk_mode_reglement = p.id) LEFT JOIN llx_c_availability as ca ON (c.fk_availability = ca.rowid) LEFT JOIN llx_c_input_reason as dr ON (c.fk_input_reason = ca.rowid) LEFT JOIN llx_c_incoterms as i ON c.fk_incoterms = i.rowid WHERE c.entity IN (1) AND c.rowid=1
2017-05-05 14:36:25 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:25 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'commande' ORDER BY pos
2017-05-05 14:36:25 DEBUG   10.10.0.249     Commande::fetch_lines
2017-05-05 14:36:25 DEBUG   10.10.0.249     sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.product_type, l.fk_commande, l.label as custom_label, l.description, l.price, l.qty, l.tva_tx, l.localtax1_tx, l.localtax2_tx, l.fk_remise_except, l.remise_percent, l.subprice, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.rang, l.info_bits, l.special_code, l.total_ht, l.total_ttc, l.total_tva, l.total_localtax1, l.total_localtax2, l.date_start, l.date_end, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.description as product_desc, p.fk_product_type, p.label as product_label, p.weight, p.weight_units, p.volume, p.volume_units FROM llx_commandedet as l LEFT JOIN llx_product as p ON (p.rowid = l.fk_product) WHERE l.fk_commande = 1 ORDER BY l.rang, l.rowid
2017-05-05 14:36:25 DEBUG   10.10.0.249     sql=SELECT s.rowid as socid, s.nom as name, s.client, c.rowid, c.ref, c.ref_client, c.total_ht FROM llx_societe as s, llx_commande as c WHERE c.fk_soc = s.rowid AND c.fk_soc = 3
2017-05-05 14:36:25 DEBUG   10.10.0.249     ActionComm::getActions
2017-05-05 14:36:25 DEBUG   10.10.0.249     sql=SELECT a.id FROM llx_actioncomm as a WHERE a.entity IN (1) AND a.fk_element = 6 AND a.elementtype = 'invoice'
2017-05-05 14:36:25 DEBUG   10.10.0.249     ActionComm::fetch
2017-05-05 14:36:25 DEBUG   10.10.0.249     sql=SELECT a.id, a.id as ref, a.ref_ext, a.datep, a.datep2, a.durationp, a.datec, a.tms as datem, a.code, a.label, a.note, a.fk_soc, a.fk_project, a.fk_user_author, a.fk_user_mod, a.fk_user_action, a.fk_user_done, a.fk_contact, a.percent as percentage, a.fk_element, a.elementtype, a.priority, a.fulldayevent, a.location, a.punctual, a.transparency, c.id as type_id, c.code as type_code, c.libelle, s.nom as socname, u.firstname, u.lastname as lastname FROM llx_actioncomm as a  LEFT JOIN llx_c_actioncomm as c ON a.fk_action=c.id  LEFT JOIN llx_user as u on u.rowid = a.fk_user_author LEFT JOIN llx_societe as s on s.rowid = a.fk_soc WHERE  a.id=11
2017-05-05 14:36:25 DEBUG   10.10.0.249     ActionComm::fetch
2017-05-05 14:36:25 DEBUG   10.10.0.249     sql=SELECT a.id, a.id as ref, a.ref_ext, a.datep, a.datep2, a.durationp, a.datec, a.tms as datem, a.code, a.label, a.note, a.fk_soc, a.fk_project, a.fk_user_author, a.fk_user_mod, a.fk_user_action, a.fk_user_done, a.fk_contact, a.percent as percentage, a.fk_element, a.elementtype, a.priority, a.fulldayevent, a.location, a.punctual, a.transparency, c.id as type_id, c.code as type_code, c.libelle, s.nom as socname, u.firstname, u.lastname as lastname FROM llx_actioncomm as a  LEFT JOIN llx_c_actioncomm as c ON a.fk_action=c.id  LEFT JOIN llx_user as u on u.rowid = a.fk_user_author LEFT JOIN llx_societe as s on s.rowid = a.fk_soc WHERE  a.id=14
2017-05-05 14:36:25 DEBUG   10.10.0.249     --- End access to /dolibarr/compta/facture.php
2017-05-05 14:36:29 DEBUG   10.10.0.249     This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:36:29 DEBUG   10.10.0.249     User::fetch
2017-05-05 14:36:29 DEBUG   10.10.0.249     sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:36:29 DEBUG   10.10.0.249     ExtraFields::fetch_name_optionals_label
2017-05-05 14:36:29 DEBUG   10.10.0.249     sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:36:29 DEBUG   10.10.0.249     sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:36:29 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:36:29 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:36:29 DEBUG   10.10.0.249     User::getrights
2017-05-05 14:36:29 DEBUG   10.10.0.249     sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:36:29 DEBUG   10.10.0.249     --- Access to /dolibarr/document.php
2017-05-05 14:36:29 DEBUG   10.10.0.249     sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:36:29 DEBUG   10.10.0.249     modulepart=facture original_file=FA1704-0004/FA1704-0004.pdf
2017-05-05 14:36:29 DEBUG   10.10.0.249     document.php download c:/dolibarr/dolibarr_documents/facture/FA1704-0004/FA1704-0004.pdf FA1704-0004.pdf content-type=application/pdf
2017-05-05 14:36:29 DEBUG   10.10.0.249     --- End access to /dolibarr/document.php
2017-05-05 14:42:07 DEBUG   ::1             --- Access to /dolibarr/compta/facture.php showing the login form and exit
2017-05-05 14:42:07 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:42:07 DEBUG   ::1             --- End access to /dolibarr/compta/facture.php
2017-05-05 14:42:09 DEBUG   ::1             --- Access to /dolibarr/theme/eldy/style.css.php
2017-05-05 14:42:09 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:42:09 DEBUG   ::1             Menubase::menuLoad mymainmenu= myleftmenu= type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:42:09 DEBUG   ::1             sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:42:09 DEBUG   ::1             --- End access to /dolibarr/theme/eldy/style.css.php
2017-05-05 14:42:10 DEBUG   ::1             --- Access to /dolibarr/core/js/select2_locale.js.php
2017-05-05 14:42:10 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:42:10 DEBUG   ::1             --- End access to /dolibarr/core/js/select2_locale.js.php
2017-05-05 14:42:11 DEBUG   ::1             --- Access to /dolibarr/core/js/lib_head.js.php
2017-05-05 14:42:11 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:42:11 DEBUG   ::1             --- End access to /dolibarr/core/js/lib_head.js.php
2017-05-05 14:42:12 DEBUG   ::1             --- Access to /dolibarr/core/js/datepicker.js.php
2017-05-05 14:42:12 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:42:12 DEBUG   ::1             --- End access to /dolibarr/core/js/datepicker.js.php
2017-05-05 14:42:14 DEBUG   ::1             --- Access to /dolibarr/viewimage.php
2017-05-05 14:42:14 DEBUG   ::1             modulepart=companylogo original_file=thumbs/ajuntament_small.png
2017-05-05 14:42:14 DEBUG   ::1             viewimage.php return file c:/dolibarr/dolibarr_documents/mycompany/logos/thumbs/ajuntament_small.png content-type=image/png
2017-05-05 14:42:14 DEBUG   ::1             --- End access to /dolibarr/viewimage.php
2017-05-05 14:42:19 DEBUG   ::1             checkLoginPassEntity usertotest=apperture entitytotest=1 authmode=dolibarr
2017-05-05 14:42:19 DEBUG   ::1             functions_dolibarr::check_user_password_dolibarr usertotest=apperture passwordtotest=****** entitytotest=1
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT rowid, login, entity, pass, pass_crypted FROM llx_user WHERE (login = 'apperture') AND entity IN (0,1) AND statut = 1
2017-05-05 14:42:19 DEBUG   ::1             functions_dolibarr::check_user_password_dolibarr Authentification ok - md5 of pass is ok
2017-05-05 14:42:19 DEBUG   ::1             User::fetch
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IN (0, 1) AND u.login = 'apperture'
2017-05-05 14:42:19 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:42:19 DEBUG   ::1             This is a new started user session. _SESSION['dol_login']=apperture Session id=na9anbl1rlpv50t1aalg1gale1
2017-05-05 14:42:19 DEBUG   ::1             BEGIN Transaction
2017-05-05 14:42:19 DEBUG   ::1              User::update_last_login_date user->id=1 UPDATE llx_user SET datepreviouslogin = datelastlogin, datelastlogin = '20170505144219', tms = tms WHERE rowid = 1
2017-05-05 14:42:19 DEBUG   ::1              sql=UPDATE llx_user SET datepreviouslogin = datelastlogin, datelastlogin = '20170505144219', tms = tms WHERE rowid = 1
2017-05-05 14:42:19 DEBUG   ::1              Interfaces::run_triggers action=USER_LOGIN Triggers for file 'interface_20_modPaypal_PaypalWorkflow.class.php' need module to be enabled
2017-05-05 14:42:19 DEBUG   ::1              Interfaces::run_triggers action=USER_LOGIN Launch runTrigger for file 'interface_20_all_Logevents.class.php'
2017-05-05 14:42:19 DEBUG   ::1              Interfaces::run_triggers action=USER_LOGIN Launch runTrigger for file 'interface_20_modWorkflow_WorkflowManager.class.php'
2017-05-05 14:42:19 DEBUG   ::1              Interfaces::run_triggers action=USER_LOGIN Launch runTrigger for file 'interface_50_modAgenda_ActionsAuto.class.php'
2017-05-05 14:42:19 DEBUG   ::1              Interfaces::run_triggers action=USER_LOGIN Launch runTrigger for file 'interface_50_modLdap_Ldapsynchro.class.php'
2017-05-05 14:42:19 DEBUG   ::1              Interfaces::run_triggers action=USER_LOGIN Launch runTrigger for file 'interface_50_modMailmanspip_Mailmanspipsynchro.class.php'
2017-05-05 14:42:19 DEBUG   ::1              Interfaces::run_triggers action=USER_LOGIN Launch runTrigger for file 'interface_50_modNotification_Notification.class.php'
2017-05-05 14:42:19 DEBUG   ::1              Trigger 'Notification' for action 'USER_LOGIN' launched by C:\dolibarr\www\dolibarr\htdocs\core\triggers\interface_50_modNotification_Notification.class.php. id=1
2017-05-05 14:42:19 DEBUG   ::1              Notify::send notifcode=USER_LOGIN, object=1
2017-05-05 14:42:19 DEBUG   ::1              sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:42:19 DEBUG   ::1             COMMIT Transaction
2017-05-05 14:42:19 DEBUG   ::1             User::getrights
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:42:19 DEBUG   ::1             User::getrights
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:42:19 DEBUG   ::1             --- Access to /dolibarr/compta/facture.php
2017-05-05 14:42:19 DEBUG   ::1             Menubase::menuLoad mymainmenu=home myleftmenu= type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:42:19 DEBUG   ::1             Facture::fetch
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=6
2017-05-05 14:42:19 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:42:19 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 6 ORDER BY l.rang, l.rowid
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:42:19 DEBUG   ::1             Facture::fetch
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=6
2017-05-05 14:42:19 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:42:19 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 6 ORDER BY l.rang, l.rowid
2017-05-05 14:42:19 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:42:19 DEBUG   ::1             Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:42:19 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:42:19 DEBUG   ::1             Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:42:19 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:42:19 DEBUG   ::1             useRevenueStamp
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT COUNT(*) as nb FROM llx_c_revenuestamp as r, llx_c_country as c WHERE r.fk_pays = c.rowid AND c.code = 'ES' AND r.active = 1
2017-05-05 14:42:19 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 6
2017-05-05 14:42:19 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 2
2017-05-05 14:42:19 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 3
2017-05-05 14:42:19 DEBUG   ::1             DiscountAbsolute::getAvailableDiscounts
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT SUM(rc.amount_ttc) as amount FROM llx_societe_remise_except as rc WHERE (rc.fk_facture IS NULL AND rc.fk_facture_line IS NULL) AND rc.fk_soc = 3 AND (fk_facture_source IS NULL OR (fk_facture_source IS NOT NULL AND description LIKE '(DEPOSIT)%'))
2017-05-05 14:42:19 DEBUG   ::1             DiscountAbsolute::getAvailableDiscounts
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT SUM(rc.amount_ttc) as amount FROM llx_societe_remise_except as rc WHERE (rc.fk_facture IS NULL AND rc.fk_facture_line IS NULL) AND rc.fk_soc = 3 AND (fk_facture_source IS NOT NULL AND description NOT LIKE '(DEPOSIT)%')
2017-05-05 14:42:19 DEBUG   ::1             User::fetch
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.rowid = 1
2017-05-05 14:42:19 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 6 AND type < 2 ORDER BY fk_statut DESC
2017-05-05 14:42:19 DEBUG   ::1             Facture::liste_contact
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT ec.rowid, ec.statut as statuslink, ec.fk_socpeople as id, ec.fk_c_type_contact, '-1' as socid, t.statut as statuscontact, t.civility as civility, t.lastname as lastname, t.firstname, t.email, tc.source, tc.element, tc.code, tc.libelle FROM llx_c_type_contact tc, llx_element_contact ec LEFT JOIN llx_user t on ec.fk_socpeople = t.rowid WHERE ec.element_id =6 AND ec.fk_c_type_contact=tc.rowid AND tc.element='facture' AND tc.source = 'internal' AND tc.active=1 ORDER BY t.lastname ASC
2017-05-05 14:42:19 DEBUG   ::1             Facture::liste_contact
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT ec.rowid, ec.statut as statuslink, ec.fk_socpeople as id, ec.fk_c_type_contact, t.fk_soc as socid, t.statut as statuscontact, t.civility as civility, t.lastname as lastname, t.firstname, t.email, tc.source, tc.element, tc.code, tc.libelle FROM llx_c_type_contact tc, llx_element_contact ec LEFT JOIN llx_socpeople t on ec.fk_socpeople = t.rowid WHERE ec.element_id =6 AND ec.fk_c_type_contact=tc.rowid AND tc.element='facture' AND tc.source = 'external' AND tc.active=1 ORDER BY t.lastname ASC
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT COUNT(pfd.rowid) as nb FROM llx_prelevement_facture_demande as pfd WHERE pfd.fk_facture = 6
2017-05-05 14:42:19 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1704-0004 types=files recursive=0 filter= excludefilter="(\\.meta|_preview\\.png)$"
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT COUNT(rowid) as nb FROM llx_links WHERE objecttype = 'facture' AND objectid = 6 AND entity = 1
2017-05-05 14:42:19 DEBUG   ::1             DiscountAbsolute::fetch
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT sr.rowid, sr.fk_soc, sr.fk_user, sr.amount_ht, sr.amount_tva, sr.amount_ttc, sr.tva_tx, sr.fk_facture_line, sr.fk_facture, sr.fk_facture_source, sr.description, sr.datec, f.facnumber as ref_facture_source FROM llx_societe_remise_except as sr LEFT JOIN llx_facture as f ON sr.fk_facture_source = f.rowid WHERE sr.fk_facture_source=6
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT MAX(te.facnumber) FROM llx_facture as te WHERE te.facnumber < 'FA1704-0004' AND te.entity IN (1)
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT MIN(te.facnumber) FROM llx_facture as te WHERE te.facnumber > 'FA1704-0004' AND te.entity IN (1)
2017-05-05 14:42:19 DEBUG   ::1             get_OutstandingBill
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT rowid, total_ttc FROM llx_facture as f WHERE fk_soc = 3 AND paye = 0 AND fk_statut <> 0 AND fk_statut <> 3 AND fk_statut <> 2
2017-05-05 14:42:19 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 3
2017-05-05 14:42:19 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 2
2017-05-05 14:42:19 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 3
2017-05-05 14:42:19 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 4
2017-05-05 14:42:19 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 4 AND f.type = 2
2017-05-05 14:42:19 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 4 AND f.type = 3
2017-05-05 14:42:19 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 6
2017-05-05 14:42:19 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 2
2017-05-05 14:42:19 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 3
2017-05-05 14:42:19 DEBUG   ::1             Translate::loadCacheCurrencies
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT code_iso, label, unicode FROM llx_c_currencies WHERE active = 1 AND code_iso = 'EUR'
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 6 AND type = 2
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT p.datep as dp, p.ref, p.num_paiement, p.rowid, p.fk_bank, c.code as payment_code, c.libelle as payment_label, pf.amount, ba.rowid as baid, ba.ref as baref, ba.label FROM llx_c_paiement as c, llx_paiement_facture as pf, llx_paiement as p LEFT JOIN llx_bank as b ON p.fk_bank = b.rowid LEFT JOIN llx_bank_account as ba ON b.fk_account = ba.rowid WHERE pf.fk_facture = 6 AND p.fk_paiement = c.id AND pf.fk_paiement = p.rowid ORDER BY p.datep, p.tms
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT fk_facture FROM llx_paiement_facture as pf, llx_facture as f WHERE pf.fk_facture = f.rowid AND fk_paiement = 1
2017-05-05 14:42:19 DEBUG   ::1             Facture::fetch
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=2
2017-05-05 14:42:19 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:42:19 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 2 ORDER BY l.rang, l.rowid
2017-05-05 14:42:19 DEBUG   ::1             Facture::fetch
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=3
2017-05-05 14:42:19 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:42:19 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 3 ORDER BY l.rang, l.rowid
2017-05-05 14:42:19 DEBUG   ::1             Facture::fetch
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=5
2017-05-05 14:42:19 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:42:19 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 5 ORDER BY l.rang, l.rowid
2017-05-05 14:42:19 DEBUG   ::1             Facture::fetch
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=6
2017-05-05 14:42:19 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:42:19 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 6 ORDER BY l.rang, l.rowid
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT re.rowid, re.amount_ht, re.amount_tva, re.amount_ttc, re.description, re.fk_facture_source FROM llx_societe_remise_except as re WHERE fk_facture = 6
2017-05-05 14:42:19 DEBUG   ::1             Form::load_cache_conditions_paiements
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT rowid, code, libelle as label FROM llx_c_payment_term WHERE active > 0 ORDER BY sortorder
2017-05-05 14:42:19 DEBUG   ::1             Form::load_cache_types_paiements
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT id, code, libelle as label, type, active FROM llx_c_paiement
2017-05-05 14:42:19 DEBUG   ::1             Translate::getLabelFromKey
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT libelle as label FROM llx_c_paiement WHERE code = 'LCR'
2017-05-05 14:42:19 DEBUG   ::1             Account::fetch
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT ba.rowid, ba.ref, ba.label, ba.bank, ba.number, ba.courant, ba.clos, ba.rappro, ba.url, ba.code_banque, ba.code_guichet, ba.cle_rib, ba.bic, ba.iban_prefix as iban, ba.domiciliation, ba.proprio, ba.owner_address, ba.state_id, ba.fk_pays as country_id, ba.account_number, ba.accountancy_journal, ba.currency_code, ba.min_allowed, ba.min_desired, ba.comment, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_bank_account as ba LEFT JOIN llx_c_country as c ON ba.fk_pays = c.rowid LEFT JOIN llx_c_departements as d ON ba.state_id = d.rowid WHERE entity IN (1) AND ba.rowid  = 1
2017-05-05 14:42:19 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:42:19 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'bank_account' ORDER BY pos
2017-05-05 14:42:20 DEBUG   ::1             useLocalTax
2017-05-05 14:42:20 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:42:20 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:42:20 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 6 ORDER BY l.rang, l.rowid
2017-05-05 14:42:20 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:42:20 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facturedet' ORDER BY pos
2017-05-05 14:42:20 DEBUG   ::1             Product::fetch id=1 ref= ref_ext=
2017-05-05 14:42:20 DEBUG   ::1             sql=SELECT rowid, ref, ref_ext, label, description, url, note, customcode, fk_country, price, price_ttc, price_min, price_min_ttc, price_base_type, cost_price, default_vat_code, tva_tx, recuperableonly as tva_npr, localtax1_tx, localtax2_tx, localtax1_type, localtax2_type, tosell, tobuy, fk_product_type, duration, seuil_stock_alerte, canvas, weight, weight_units, length, length_units, surface, surface_units, volume, volume_units, barcode, fk_barcode_type, finished, accountancy_code_buy, accountancy_code_sell, stock, pmp, datec, tms, import_key, entity, desiredstock, tobatch, fk_unit, fk_price_expression, price_autogen FROM llx_product WHERE rowid = 1
2017-05-05 14:42:20 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:42:20 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'product' ORDER BY pos
2017-05-05 14:42:20 DEBUG   ::1             sql=SELECT MAX(CAST(SUBSTRING(facnumber FROM 8) AS SIGNED)) as max FROM llx_facture WHERE facnumber LIKE 'FA____-%' AND entity IN (1)
2017-05-05 14:42:20 DEBUG   ::1             mod_facture_terre::getNextValue
2017-05-05 14:42:20 DEBUG   ::1             mod_facture_terre::getNextValue
2017-05-05 14:42:20 DEBUG   ::1             sql=SELECT facnumber as ref FROM llx_facture WHERE facnumber LIKE 'FA____-0004' AND entity IN (1)
2017-05-05 14:42:20 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:42:20 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 6
2017-05-05 14:42:20 DEBUG   ::1             /core/lib/function2.lib.php::getListOfModels
2017-05-05 14:42:20 DEBUG   ::1             sql=SELECT nom as id, nom as lib, libelle as label, description as description FROM llx_document_model WHERE type = 'invoice' AND entity IN (0,1) ORDER BY description DESC
2017-05-05 14:42:20 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1704-0004 types=files recursive=0 filter= excludefilter="(\\.meta|_preview\\.png)$"
2017-05-05 14:42:20 DEBUG   ::1             Facture::fetchObjectLink
2017-05-05 14:42:20 DEBUG   ::1             sql=SELECT rowid, fk_source, sourcetype, fk_target, targettype FROM llx_element_element WHERE (fk_source = '6' AND sourcetype = 'facture') OR (fk_target = '6' AND targettype = 'facture') ORDER BY sourcetype
2017-05-05 14:42:20 DEBUG   ::1             Commande::fetch
2017-05-05 14:42:20 DEBUG   ::1             sql=SELECT c.rowid, c.date_creation, c.ref, c.fk_soc, c.fk_user_author, c.fk_statut, c.amount_ht, c.total_ht, c.total_ttc, c.tva as total_tva, c.localtax1 as total_localtax1, c.localtax2 as total_localtax2, c.fk_cond_reglement, c.fk_mode_reglement, c.fk_availability, c.fk_input_reason, c.fk_account, c.date_commande, c.date_livraison, c.fk_shipping_method, c.fk_warehouse, c.fk_projet, c.remise_percent, c.remise, c.remise_absolue, c.source, c.facture as billed, c.note_private, c.note_public, c.ref_client, c.ref_ext, c.ref_int, c.model_pdf, c.fk_delivery_address, c.extraparams, c.fk_incoterms, c.location_incoterms, c.fk_multicurrency, c.multicurrency_code, c.multicurrency_tx, c.multicurrency_total_ht, c.multicurrency_total_tva, c.multicurrency_total_ttc, i.libelle as libelle_incoterms, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, cr.code as cond_reglement_code, cr.libelle as cond_reglement_libelle, cr.libelle_facture as cond_reglement_libelle_doc, ca.code as availability_code, ca.label as availability_label, dr.code as demand_reason_code FROM llx_commande as c LEFT JOIN llx_c_payment_term as cr ON (c.fk_cond_reglement = cr.rowid) LEFT JOIN llx_c_paiement as p ON (c.fk_mode_reglement = p.id) LEFT JOIN llx_c_availability as ca ON (c.fk_availability = ca.rowid) LEFT JOIN llx_c_input_reason as dr ON (c.fk_input_reason = ca.rowid) LEFT JOIN llx_c_incoterms as i ON c.fk_incoterms = i.rowid WHERE c.entity IN (1) AND c.rowid=1
2017-05-05 14:42:20 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:42:20 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'commande' ORDER BY pos
2017-05-05 14:42:20 DEBUG   ::1             Commande::fetch_lines
2017-05-05 14:42:20 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.product_type, l.fk_commande, l.label as custom_label, l.description, l.price, l.qty, l.tva_tx, l.localtax1_tx, l.localtax2_tx, l.fk_remise_except, l.remise_percent, l.subprice, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.rang, l.info_bits, l.special_code, l.total_ht, l.total_ttc, l.total_tva, l.total_localtax1, l.total_localtax2, l.date_start, l.date_end, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.description as product_desc, p.fk_product_type, p.label as product_label, p.weight, p.weight_units, p.volume, p.volume_units FROM llx_commandedet as l LEFT JOIN llx_product as p ON (p.rowid = l.fk_product) WHERE l.fk_commande = 1 ORDER BY l.rang, l.rowid
2017-05-05 14:42:20 DEBUG   ::1             sql=SELECT s.rowid as socid, s.nom as name, s.client, c.rowid, c.ref, c.ref_client, c.total_ht FROM llx_societe as s, llx_commande as c WHERE c.fk_soc = s.rowid AND c.fk_soc = 3
2017-05-05 14:42:20 DEBUG   ::1             ActionComm::getActions
2017-05-05 14:42:20 DEBUG   ::1             sql=SELECT a.id FROM llx_actioncomm as a WHERE a.entity IN (1) AND a.fk_element = 6 AND a.elementtype = 'invoice'
2017-05-05 14:42:20 DEBUG   ::1             ActionComm::fetch
2017-05-05 14:42:20 DEBUG   ::1             sql=SELECT a.id, a.id as ref, a.ref_ext, a.datep, a.datep2, a.durationp, a.datec, a.tms as datem, a.code, a.label, a.note, a.fk_soc, a.fk_project, a.fk_user_author, a.fk_user_mod, a.fk_user_action, a.fk_user_done, a.fk_contact, a.percent as percentage, a.fk_element, a.elementtype, a.priority, a.fulldayevent, a.location, a.punctual, a.transparency, c.id as type_id, c.code as type_code, c.libelle, s.nom as socname, u.firstname, u.lastname as lastname FROM llx_actioncomm as a  LEFT JOIN llx_c_actioncomm as c ON a.fk_action=c.id  LEFT JOIN llx_user as u on u.rowid = a.fk_user_author LEFT JOIN llx_societe as s on s.rowid = a.fk_soc WHERE  a.id=11
2017-05-05 14:42:20 DEBUG   ::1             ActionComm::fetch
2017-05-05 14:42:20 DEBUG   ::1             sql=SELECT a.id, a.id as ref, a.ref_ext, a.datep, a.datep2, a.durationp, a.datec, a.tms as datem, a.code, a.label, a.note, a.fk_soc, a.fk_project, a.fk_user_author, a.fk_user_mod, a.fk_user_action, a.fk_user_done, a.fk_contact, a.percent as percentage, a.fk_element, a.elementtype, a.priority, a.fulldayevent, a.location, a.punctual, a.transparency, c.id as type_id, c.code as type_code, c.libelle, s.nom as socname, u.firstname, u.lastname as lastname FROM llx_actioncomm as a  LEFT JOIN llx_c_actioncomm as c ON a.fk_action=c.id  LEFT JOIN llx_user as u on u.rowid = a.fk_user_author LEFT JOIN llx_societe as s on s.rowid = a.fk_soc WHERE  a.id=14
2017-05-05 14:42:20 DEBUG   ::1             --- End access to /dolibarr/compta/facture.php
2017-05-05 14:42:21 DEBUG   ::1             --- Access to /dolibarr/theme/eldy/style.css.php
2017-05-05 14:42:21 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:42:21 DEBUG   ::1             Menubase::menuLoad mymainmenu=home myleftmenu= type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:42:21 DEBUG   ::1             sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:42:21 DEBUG   ::1             User::fetch
2017-05-05 14:42:21 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:42:21 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:42:21 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:42:21 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:42:21 DEBUG   ::1             --- End access to /dolibarr/theme/eldy/style.css.php
2017-05-05 14:42:22 DEBUG   ::1             --- Access to /dolibarr/viewimage.php
2017-05-05 14:42:22 DEBUG   ::1             modulepart=companylogo original_file=thumbs/ajuntament_mini.png
2017-05-05 14:42:22 DEBUG   ::1             viewimage.php return file c:/dolibarr/dolibarr_documents/mycompany/logos/thumbs/ajuntament_mini.png content-type=image/png
2017-05-05 14:42:22 DEBUG   ::1             --- End access to /dolibarr/viewimage.php
2017-05-05 14:45:32 DEBUG   ::1             This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:45:32 DEBUG   ::1             User::fetch
2017-05-05 14:45:32 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:45:32 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:45:32 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:45:32 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:45:32 DEBUG   ::1             User::getrights
2017-05-05 14:45:32 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:45:32 DEBUG   ::1             User::getrights
2017-05-05 14:45:32 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:45:32 DEBUG   ::1             --- Access to /dolibarr/document.php
2017-05-05 14:45:32 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:45:32 DEBUG   ::1             modulepart=facture original_file=FA1704-0004/FA1704-0004.pdf
2017-05-05 14:45:32 DEBUG   ::1             document.php download c:/dolibarr/dolibarr_documents/facture/FA1704-0004/FA1704-0004.pdf FA1704-0004.pdf content-type=application/pdf
2017-05-05 14:45:32 DEBUG   ::1             --- End access to /dolibarr/document.php
2017-05-05 14:47:01 DEBUG   ::1             This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:47:01 DEBUG   ::1             User::fetch
2017-05-05 14:47:01 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:47:01 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:47:01 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:47:01 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:47:01 DEBUG   ::1             User::getrights
2017-05-05 14:47:01 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:47:01 DEBUG   ::1             User::getrights
2017-05-05 14:47:01 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:47:01 DEBUG   ::1             --- Access to /dolibarr/compta/index.php
2017-05-05 14:47:01 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:47:01 DEBUG   ::1             Menubase::menuLoad mymainmenu=accountancy myleftmenu= type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:47:01 DEBUG   ::1             sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:47:01 DEBUG   ::1             sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:47:01 DEBUG   ::1             useLocalTax
2017-05-05 14:47:01 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax1_type <> '0'
2017-05-05 14:47:01 DEBUG   ::1             useLocalTax
2017-05-05 14:47:01 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:47:01 DEBUG   ::1             sql=SELECT f.facnumber, f.rowid, f.total as total_ht, f.tva as total_tva, f.total_ttc, f.type, s.nom as name, s.rowid as socid,s.code_client FROM llx_facture as f, llx_societe as s WHERE s.rowid = f.fk_soc AND f.fk_statut = 0 AND f.entity = 1
2017-05-05 14:47:01 DEBUG   ::1             sql=SELECT f.ref, f.rowid, f.total_ht, f.total_tva, f.total_ttc, f.type, s.nom as name, s.rowid as socid, s.code_fournisseur FROM llx_facture_fourn as f, llx_societe as s WHERE s.rowid = f.fk_soc AND f.fk_statut = 0 AND f.entity = 1
2017-05-05 14:47:01 DEBUG   ::1             sql=SELECT f.rowid, f.facnumber, f.fk_statut, f.type, f.total as total_ht, f.tva as total_tva, f.total_ttc, f.paye, f.tms, f.date_lim_reglement as datelimite, s.nom as name, s.rowid as socid, s.code_client, sum(pf.amount) as am FROM llx_societe as s,llx_facture as f LEFT JOIN llx_paiement_facture as pf on f.rowid=pf.fk_facture WHERE s.rowid = f.fk_soc AND f.entity = 1 GROUP BY f.rowid, f.facnumber, f.fk_statut, f.type, f.total, f.tva, f.total_ttc, f.paye, f.tms, f.date_lim_reglement, s.nom, s.rowid, s.code_client ORDER BY f.tms DESC  LIMIT 3
2017-05-05 14:47:01 DEBUG   ::1             Translate::loadCacheCurrencies
2017-05-05 14:47:01 DEBUG   ::1             sql=SELECT code_iso, label, unicode FROM llx_c_currencies WHERE active = 1 AND code_iso = 'EUR'
2017-05-05 14:47:01 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1704-0004 types=files recursive=0 filter=FA1704\-0004[^\-]+ excludefilter="\\.meta$|\\.png$"
2017-05-05 14:47:01 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1704-0002 types=files recursive=0 filter=FA1704\-0002[^\-]+ excludefilter="\\.meta$|\\.png$"
2017-05-05 14:47:01 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1704-0003 types=files recursive=0 filter=FA1704\-0003[^\-]+ excludefilter="\\.meta$|\\.png$"
2017-05-05 14:47:01 DEBUG   ::1             sql=SELECT ff.rowid, ff.ref, ff.fk_statut, ff.libelle, ff.total_ht, ff.total_tva, ff.total_ttc, ff.tms, ff.paye, s.nom as name, s.rowid as socid, s.code_fournisseur, SUM(pf.amount) as am FROM llx_societe as s, llx_facture_fourn as ff LEFT JOIN llx_paiementfourn_facturefourn as pf on ff.rowid=pf.fk_facturefourn WHERE s.rowid = ff.fk_soc AND ff.entity = 1 GROUP BY ff.rowid, ff.ref, ff.fk_statut, ff.libelle, ff.total_ht, ff.tva, ff.total_tva, ff.total_ttc, ff.tms, ff.paye, s.nom, s.rowid, s.code_fournisseur ORDER BY ff.tms DESC  LIMIT 3
2017-05-05 14:47:01 DEBUG   ::1             sql=SELECT d.rowid, d.lastname, d.firstname, d.societe, d.datedon as date, d.tms as dm, d.amount, d.fk_statut FROM llx_don as d WHERE d.entity = 1 ORDER BY d.tms DESC LIMIT 3
2017-05-05 14:47:01 DEBUG   ::1             sql=SELECT c.rowid, c.amount, c.date_ech, c.paye, cc.libelle, SUM(pc.amount) as sumpaid FROM (llx_c_chargesociales as cc, llx_chargesociales as c) LEFT JOIN llx_paiementcharge as pc ON pc.fk_charge = c.rowid WHERE c.fk_type = cc.id AND c.entity = 1 AND c.paye = 0 GROUP BY c.rowid, c.amount, c.date_ech, c.paye, cc.libelle
2017-05-05 14:47:01 DEBUG   ::1             sql=SELECT sum(f.total) as tot_fht, sum(f.total_ttc) as tot_fttc, s.nom as name, s.rowid as socid, s.code_client, c.rowid, c.ref, c.facture, c.fk_statut, c.total_ht, c.tva as total_tva, c.total_ttc FROM llx_societe as s, llx_commande as c LEFT JOIN llx_element_element as el ON el.fk_source = c.rowid AND el.sourcetype = 'commande' LEFT JOIN llx_facture AS f ON el.fk_target = f.rowid AND el.targettype = 'facture' WHERE c.fk_soc = s.rowid AND c.entity = 1 AND c.fk_statut = 3 AND c.facture = 0 GROUP BY s.nom, s.rowid, s.code_client, c.rowid, c.ref, c.facture, c.fk_statut, c.tva, c.total_ht, c.total_ttc
2017-05-05 14:47:01 DEBUG   ::1             sql=SELECT f.rowid, f.facnumber, f.fk_statut, f.datef, f.type, f.total as total_ht, f.tva as total_tva, f.total_ttc, f.paye, f.tms, f.date_lim_reglement as datelimite, s.nom as name, s.rowid as socid, s.code_client, sum(pf.amount) as am FROM llx_societe as s,llx_facture as f LEFT JOIN llx_paiement_facture as pf on f.rowid=pf.fk_facture WHERE s.rowid = f.fk_soc AND f.paye = 0 AND f.fk_statut = 1 AND f.entity = 1 GROUP BY f.rowid, f.facnumber, f.fk_statut, f.datef, f.type, f.total, f.tva, f.total_ttc, f.paye, f.tms, f.date_lim_reglement, s.nom, s.rowid, s.code_client ORDER BY f.datef ASC, f.facnumber ASC
2017-05-05 14:47:01 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1704-0001 types=files recursive=0 filter=FA1704\-0001[^\-]+ excludefilter="\\.meta$|\\.png$"
2017-05-05 14:47:01 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/AV1704-0001 types=files recursive=0 filter=AV1704\-0001[^\-]+ excludefilter="\\.meta$|\\.png$"
2017-05-05 14:47:01 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1704-0004 types=files recursive=0 filter=FA1704\-0004[^\-]+ excludefilter="\\.meta$|\\.png$"
2017-05-05 14:47:01 DEBUG   ::1             sql=SELECT ff.rowid, ff.ref, ff.fk_statut, ff.libelle, ff.total_ht, ff.total_tva, ff.total_ttc, ff.paye, ff.date_lim_reglement, s.nom as name, s.rowid as socid, s.code_client, s.code_fournisseur, sum(pf.amount) as am FROM llx_societe as s, llx_facture_fourn as ff LEFT JOIN llx_paiementfourn_facturefourn as pf on ff.rowid=pf.fk_facturefourn WHERE s.rowid = ff.fk_soc AND ff.entity = 1 AND ff.paye = 0 AND ff.fk_statut = 1 GROUP BY ff.rowid, ff.ref, ff.fk_statut, ff.libelle, ff.total_ht, ff.tva, ff.total_tva, ff.total_ttc, ff.paye, s.nom, s.rowid, s.code_client, s.code_fournisseur, ff.date_lim_reglement ORDER BY ff.date_lim_reglement ASC
2017-05-05 14:47:01 DEBUG   ::1             --- End access to /dolibarr/compta/index.php
2017-05-05 14:47:08 DEBUG   ::1             This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:47:08 DEBUG   ::1             User::fetch
2017-05-05 14:47:08 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:47:08 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:47:08 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:47:08 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:47:08 DEBUG   ::1             User::getrights
2017-05-05 14:47:08 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:47:08 DEBUG   ::1             User::getrights
2017-05-05 14:47:08 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:47:08 DEBUG   ::1             --- Access to /dolibarr/compta/resultat/index.php
2017-05-05 14:47:08 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:47:08 DEBUG   ::1             Menubase::menuLoad mymainmenu=accountancy myleftmenu=report type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:47:08 DEBUG   ::1             sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:47:08 DEBUG   ::1             sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:47:08 DEBUG   ::1             useLocalTax
2017-05-05 14:47:08 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax1_type <> '0'
2017-05-05 14:47:08 DEBUG   ::1             useLocalTax
2017-05-05 14:47:08 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:47:08 DEBUG   ::1             get customers invoices
2017-05-05 14:47:08 DEBUG   ::1             sql=SELECT sum(pf.amount) as amount_ttc, date_format(p.datep,'%Y-%m') as dm FROM llx_facture as f, llx_paiement_facture as pf, llx_paiement as p WHERE p.rowid = pf.fk_paiement AND pf.fk_facture = f.rowid AND f.entity = 1 GROUP BY dm ORDER BY dm
2017-05-05 14:47:08 DEBUG   ::1             get old customers payments not linked to invoices
2017-05-05 14:47:08 DEBUG   ::1             sql=SELECT sum(p.amount) as amount_ttc, date_format(p.datep,'%Y-%m') as dm FROM llx_bank as b, llx_bank_account as ba, llx_paiement as p LEFT JOIN llx_paiement_facture as pf ON p.rowid = pf.fk_paiement WHERE pf.rowid IS NULL AND p.fk_bank = b.rowid AND b.fk_account = ba.rowid AND ba.entity IN (1) GROUP BY dm ORDER BY dm
2017-05-05 14:47:08 DEBUG   ::1             get suppliers invoices
2017-05-05 14:47:08 DEBUG   ::1             sql=SELECT sum(pf.amount) as amount_ttc, date_format(p.datep,'%Y-%m') as dm FROM llx_paiementfourn as p, llx_facture_fourn as f, llx_paiementfourn_facturefourn as pf WHERE f.rowid = pf.fk_facturefourn AND p.rowid = pf.fk_paiementfourn AND f.entity = 1 GROUP BY dm
2017-05-05 14:47:08 DEBUG   ::1             get vat really paid
2017-05-05 14:47:08 DEBUG   ::1             sql=SELECT sum(t.amount) as amount, date_format(t.datev,'%Y-%m') as dm FROM llx_tva as t WHERE amount > 0 AND t.entity = 1 GROUP BY dm
2017-05-05 14:47:08 DEBUG   ::1             get vat really received back
2017-05-05 14:47:08 DEBUG   ::1             sql=SELECT sum(t.amount) as amount, date_format(t.datev,'%Y-%m') as dm FROM llx_tva as t WHERE amount < 0 AND t.entity = 1 GROUP BY dm
2017-05-05 14:47:08 DEBUG   ::1             get social contributions deductible=0 
2017-05-05 14:47:08 DEBUG   ::1             sql=SELECT c.libelle as nom, date_format(p.datep,'%Y-%m') as dm, sum(p.amount) as amount FROM llx_c_chargesociales as c, llx_chargesociales as cs, llx_paiementcharge as p WHERE p.fk_charge = cs.rowid AND cs.fk_type = c.id AND c.deductible = 0 AND cs.entity = 1 GROUP BY c.libelle, dm
2017-05-05 14:47:08 DEBUG   ::1             get social contributions paid deductible=1
2017-05-05 14:47:08 DEBUG   ::1             sql=SELECT c.libelle as nom, date_format(p.datep,'%Y-%m') as dm, sum(p.amount) as amount FROM llx_c_chargesociales as c, llx_chargesociales as cs, llx_paiementcharge as p WHERE p.fk_charge = cs.rowid AND cs.fk_type = c.id AND c.deductible = 1 AND cs.entity = 1 GROUP BY c.libelle, dm
2017-05-05 14:47:08 DEBUG   ::1             get social salaries payments
2017-05-05 14:47:08 DEBUG   ::1             sql=SELECT p.label as nom, date_format(p.datep,'%Y-%m') as dm, sum(p.amount) as amount FROM llx_payment_salary as p WHERE p.entity = 1 GROUP BY p.label, dm
2017-05-05 14:47:08 DEBUG   ::1             get expense report outcome
2017-05-05 14:47:08 DEBUG   ::1             sql=SELECT date_format(pe.datep,'%Y-%m') as dm, sum(p.total_ht) as amount_ht,sum(p.total_ttc) as amount_ttc FROM llx_expensereport as p INNER JOIN llx_user as u ON u.rowid=p.fk_user_author INNER JOIN llx_payment_expensereport as pe ON pe.fk_expensereport = p.rowid INNER JOIN llx_c_paiement as c ON pe.fk_typepayment = c.id WHERE p.entity = 1 AND p.fk_statut>=5 GROUP BY dm
2017-05-05 14:47:08 DEBUG   ::1             get donation payments
2017-05-05 14:47:08 DEBUG   ::1             sql=SELECT p.societe as nom, p.firstname, p.lastname, date_format(p.datedon,'%Y-%m') as dm, sum(p.amount) as amount FROM llx_don as p WHERE p.entity = 1 AND fk_statut=2 GROUP BY p.societe, p.firstname, p.lastname, dm
2017-05-05 14:47:08 DEBUG   ::1             --- End access to /dolibarr/compta/resultat/index.php
2017-05-05 14:47:12 DEBUG   ::1             This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:47:12 DEBUG   ::1             User::fetch
2017-05-05 14:47:12 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:47:12 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:47:12 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:47:12 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:47:12 DEBUG   ::1             User::getrights
2017-05-05 14:47:12 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:47:12 DEBUG   ::1             User::getrights
2017-05-05 14:47:12 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:47:12 DEBUG   ::1             --- Access to /dolibarr/compta/journal/sellsjournal.php
2017-05-05 14:47:12 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:47:12 DEBUG   ::1             Menubase::menuLoad mymainmenu=accountancy myleftmenu=report type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:47:12 DEBUG   ::1             sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:47:12 DEBUG   ::1             sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:47:12 DEBUG   ::1             useLocalTax
2017-05-05 14:47:12 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax1_type <> '0'
2017-05-05 14:47:12 DEBUG   ::1             useLocalTax
2017-05-05 14:47:12 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:47:12 DEBUG   ::1             sql=SET SQL_BIG_SELECTS=1
2017-05-05 14:47:12 DEBUG   ::1             sql=SELECT f.rowid, f.facnumber, f.type, f.datef, f.ref_client, fd.product_type, fd.total_ht, fd.total_tva, fd.tva_tx, fd.total_ttc, fd.localtax1_tx, fd.localtax2_tx, fd.total_localtax1, fd.total_localtax2, fd.rowid as id, fd.situation_percent, s.rowid as socid, s.nom as name, s.code_compta, s.client, p.rowid as pid, p.ref as pref, p.accountancy_code_sell, ct.accountancy_code_sell as account_tva, ct.recuperableonly FROM llx_facturedet as fd LEFT JOIN llx_product as p ON p.rowid = fd.fk_product JOIN llx_facture as f ON f.rowid = fd.fk_facture JOIN llx_societe as s ON s.rowid = f.fk_soc LEFT JOIN llx_c_tva ct ON fd.tva_tx = ct.taux AND fd.info_bits = ct.recuperableonly AND ct.fk_pays = '4' WHERE f.entity = 1 AND f.fk_statut > 0 AND f.type IN (0,0,2,3,5) AND fd.product_type IN (0,1) AND f.datef >= '20170401000000' AND f.datef <= '20170430235959' ORDER BY f.rowid
2017-05-05 14:47:12 DEBUG   ::1             getLocalTaxesFromRate vatrate=0.000 local=1
2017-05-05 14:47:12 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax1_type, t.localtax2, t.localtax2_type, t.accountancy_code_sell, t.accountancy_code_buy FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = '' AND t.taux = 0 AND t.active = 1
2017-05-05 14:47:12 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2  FROM llx_c_tva as t inner join llx_c_country as c ON c.rowid=t.fk_pays WHERE c.code = 'ES' AND t.active = 1 AND t.taux=(  SELECT max(tt.taux) FROM llx_c_tva as tt inner join llx_c_country as c ON c.rowid=tt.fk_pays  WHERE c.code = 'ES' AND tt.active = 1  )
2017-05-05 14:47:12 DEBUG   ::1             getLocalTaxesFromRate vatrate=0.000 local=2
2017-05-05 14:47:12 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax1_type, t.localtax2, t.localtax2_type, t.accountancy_code_sell, t.accountancy_code_buy FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = '' AND t.taux = 0 AND t.active = 1
2017-05-05 14:47:12 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2  FROM llx_c_tva as t inner join llx_c_country as c ON c.rowid=t.fk_pays WHERE c.code = 'ES' AND t.active = 1 AND t.taux=(  SELECT max(tt.taux) FROM llx_c_tva as tt inner join llx_c_country as c ON c.rowid=tt.fk_pays  WHERE c.code = 'ES' AND tt.active = 1  )
2017-05-05 14:47:12 DEBUG   ::1             get_localtax tva=0.000 local=2 thirdparty_buyer id=/country_code= thirdparty_seller id=0/country_code=ES thirdparty_seller localtax1_assuj=0  thirdparty_seller localtax2_assuj=1
2017-05-05 14:47:12 DEBUG   ::1             sql=SELECT fd.rowid, fd.fk_facture, fd.fk_parent_line, fd.fk_product, fd.product_type, fd.label as custom_label, fd.description, fd.price, fd.qty, fd.tva_tx, fd.localtax1_tx, fd. localtax2_tx, fd.remise, fd.remise_percent, fd.fk_remise_except, fd.subprice, fd.date_start as date_start, fd.date_end as date_end, fd.fk_product_fournisseur_price as fk_fournprice, fd.buy_price_ht as pa_ht, fd.info_bits, fd.special_code, fd.total_ht, fd.total_tva, fd.total_ttc, fd.total_localtax1, fd.total_localtax2, fd.rang, fd.fk_code_ventilation, fd.fk_unit, fd.situation_percent, fd.fk_prev_id, p.ref as product_ref, p.label as product_libelle, p.description as product_desc , fd.multicurrency_subprice , fd.multicurrency_total_ht , fd.multicurrency_total_tva , fd.multicurrency_total_ttc FROM llx_facturedet as fd LEFT JOIN llx_product as p ON fd.fk_product = p.rowid WHERE fd.rowid = 1
2017-05-05 14:47:12 DEBUG   ::1             getLocalTaxesFromRate vatrate=0.000 local=1
2017-05-05 14:47:12 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax1_type, t.localtax2, t.localtax2_type, t.accountancy_code_sell, t.accountancy_code_buy FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = '' AND t.taux = 0 AND t.active = 1
2017-05-05 14:47:12 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2  FROM llx_c_tva as t inner join llx_c_country as c ON c.rowid=t.fk_pays WHERE c.code = 'ES' AND t.active = 1 AND t.taux=(  SELECT max(tt.taux) FROM llx_c_tva as tt inner join llx_c_country as c ON c.rowid=tt.fk_pays  WHERE c.code = 'ES' AND tt.active = 1  )
2017-05-05 14:47:12 DEBUG   ::1             getLocalTaxesFromRate vatrate=0.000 local=2
2017-05-05 14:47:12 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax1_type, t.localtax2, t.localtax2_type, t.accountancy_code_sell, t.accountancy_code_buy FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = '' AND t.taux = 0 AND t.active = 1
2017-05-05 14:47:12 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2  FROM llx_c_tva as t inner join llx_c_country as c ON c.rowid=t.fk_pays WHERE c.code = 'ES' AND t.active = 1 AND t.taux=(  SELECT max(tt.taux) FROM llx_c_tva as tt inner join llx_c_country as c ON c.rowid=tt.fk_pays  WHERE c.code = 'ES' AND tt.active = 1  )
2017-05-05 14:47:12 DEBUG   ::1             get_localtax tva=0.000 local=2 thirdparty_buyer id=/country_code= thirdparty_seller id=0/country_code=ES thirdparty_seller localtax1_assuj=0  thirdparty_seller localtax2_assuj=1
2017-05-05 14:47:12 DEBUG   ::1             sql=SELECT fd.rowid, fd.fk_facture, fd.fk_parent_line, fd.fk_product, fd.product_type, fd.label as custom_label, fd.description, fd.price, fd.qty, fd.tva_tx, fd.localtax1_tx, fd. localtax2_tx, fd.remise, fd.remise_percent, fd.fk_remise_except, fd.subprice, fd.date_start as date_start, fd.date_end as date_end, fd.fk_product_fournisseur_price as fk_fournprice, fd.buy_price_ht as pa_ht, fd.info_bits, fd.special_code, fd.total_ht, fd.total_tva, fd.total_ttc, fd.total_localtax1, fd.total_localtax2, fd.rang, fd.fk_code_ventilation, fd.fk_unit, fd.situation_percent, fd.fk_prev_id, p.ref as product_ref, p.label as product_libelle, p.description as product_desc , fd.multicurrency_subprice , fd.multicurrency_total_ht , fd.multicurrency_total_tva , fd.multicurrency_total_ttc FROM llx_facturedet as fd LEFT JOIN llx_product as p ON fd.fk_product = p.rowid WHERE fd.rowid = 2
2017-05-05 14:47:12 DEBUG   ::1             getLocalTaxesFromRate vatrate=0.000 local=1
2017-05-05 14:47:12 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax1_type, t.localtax2, t.localtax2_type, t.accountancy_code_sell, t.accountancy_code_buy FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = '' AND t.taux = 0 AND t.active = 1
2017-05-05 14:47:12 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2  FROM llx_c_tva as t inner join llx_c_country as c ON c.rowid=t.fk_pays WHERE c.code = 'ES' AND t.active = 1 AND t.taux=(  SELECT max(tt.taux) FROM llx_c_tva as tt inner join llx_c_country as c ON c.rowid=tt.fk_pays  WHERE c.code = 'ES' AND tt.active = 1  )
2017-05-05 14:47:12 DEBUG   ::1             getLocalTaxesFromRate vatrate=0.000 local=2
2017-05-05 14:47:12 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax1_type, t.localtax2, t.localtax2_type, t.accountancy_code_sell, t.accountancy_code_buy FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = '' AND t.taux = 0 AND t.active = 1
2017-05-05 14:47:12 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2  FROM llx_c_tva as t inner join llx_c_country as c ON c.rowid=t.fk_pays WHERE c.code = 'ES' AND t.active = 1 AND t.taux=(  SELECT max(tt.taux) FROM llx_c_tva as tt inner join llx_c_country as c ON c.rowid=tt.fk_pays  WHERE c.code = 'ES' AND tt.active = 1  )
2017-05-05 14:47:12 DEBUG   ::1             get_localtax tva=0.000 local=2 thirdparty_buyer id=/country_code= thirdparty_seller id=0/country_code=ES thirdparty_seller localtax1_assuj=0  thirdparty_seller localtax2_assuj=1
2017-05-05 14:47:12 DEBUG   ::1             sql=SELECT fd.rowid, fd.fk_facture, fd.fk_parent_line, fd.fk_product, fd.product_type, fd.label as custom_label, fd.description, fd.price, fd.qty, fd.tva_tx, fd.localtax1_tx, fd. localtax2_tx, fd.remise, fd.remise_percent, fd.fk_remise_except, fd.subprice, fd.date_start as date_start, fd.date_end as date_end, fd.fk_product_fournisseur_price as fk_fournprice, fd.buy_price_ht as pa_ht, fd.info_bits, fd.special_code, fd.total_ht, fd.total_tva, fd.total_ttc, fd.total_localtax1, fd.total_localtax2, fd.rang, fd.fk_code_ventilation, fd.fk_unit, fd.situation_percent, fd.fk_prev_id, p.ref as product_ref, p.label as product_libelle, p.description as product_desc , fd.multicurrency_subprice , fd.multicurrency_total_ht , fd.multicurrency_total_tva , fd.multicurrency_total_ttc FROM llx_facturedet as fd LEFT JOIN llx_product as p ON fd.fk_product = p.rowid WHERE fd.rowid = 3
2017-05-05 14:47:12 DEBUG   ::1             getLocalTaxesFromRate vatrate=0.000 local=1
2017-05-05 14:47:12 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax1_type, t.localtax2, t.localtax2_type, t.accountancy_code_sell, t.accountancy_code_buy FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = '' AND t.taux = 0 AND t.active = 1
2017-05-05 14:47:12 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2  FROM llx_c_tva as t inner join llx_c_country as c ON c.rowid=t.fk_pays WHERE c.code = 'ES' AND t.active = 1 AND t.taux=(  SELECT max(tt.taux) FROM llx_c_tva as tt inner join llx_c_country as c ON c.rowid=tt.fk_pays  WHERE c.code = 'ES' AND tt.active = 1  )
2017-05-05 14:47:12 DEBUG   ::1             getLocalTaxesFromRate vatrate=0.000 local=2
2017-05-05 14:47:12 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax1_type, t.localtax2, t.localtax2_type, t.accountancy_code_sell, t.accountancy_code_buy FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = '' AND t.taux = 0 AND t.active = 1
2017-05-05 14:47:12 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2  FROM llx_c_tva as t inner join llx_c_country as c ON c.rowid=t.fk_pays WHERE c.code = 'ES' AND t.active = 1 AND t.taux=(  SELECT max(tt.taux) FROM llx_c_tva as tt inner join llx_c_country as c ON c.rowid=tt.fk_pays  WHERE c.code = 'ES' AND tt.active = 1  )
2017-05-05 14:47:12 DEBUG   ::1             get_localtax tva=0.000 local=2 thirdparty_buyer id=/country_code= thirdparty_seller id=0/country_code=ES thirdparty_seller localtax1_assuj=0  thirdparty_seller localtax2_assuj=1
2017-05-05 14:47:12 DEBUG   ::1             sql=SELECT fd.rowid, fd.fk_facture, fd.fk_parent_line, fd.fk_product, fd.product_type, fd.label as custom_label, fd.description, fd.price, fd.qty, fd.tva_tx, fd.localtax1_tx, fd. localtax2_tx, fd.remise, fd.remise_percent, fd.fk_remise_except, fd.subprice, fd.date_start as date_start, fd.date_end as date_end, fd.fk_product_fournisseur_price as fk_fournprice, fd.buy_price_ht as pa_ht, fd.info_bits, fd.special_code, fd.total_ht, fd.total_tva, fd.total_ttc, fd.total_localtax1, fd.total_localtax2, fd.rang, fd.fk_code_ventilation, fd.fk_unit, fd.situation_percent, fd.fk_prev_id, p.ref as product_ref, p.label as product_libelle, p.description as product_desc , fd.multicurrency_subprice , fd.multicurrency_total_ht , fd.multicurrency_total_tva , fd.multicurrency_total_ttc FROM llx_facturedet as fd LEFT JOIN llx_product as p ON fd.fk_product = p.rowid WHERE fd.rowid = 4
2017-05-05 14:47:12 DEBUG   ::1             getLocalTaxesFromRate vatrate=0.000 local=1
2017-05-05 14:47:12 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax1_type, t.localtax2, t.localtax2_type, t.accountancy_code_sell, t.accountancy_code_buy FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = '' AND t.taux = 0 AND t.active = 1
2017-05-05 14:47:12 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2  FROM llx_c_tva as t inner join llx_c_country as c ON c.rowid=t.fk_pays WHERE c.code = 'ES' AND t.active = 1 AND t.taux=(  SELECT max(tt.taux) FROM llx_c_tva as tt inner join llx_c_country as c ON c.rowid=tt.fk_pays  WHERE c.code = 'ES' AND tt.active = 1  )
2017-05-05 14:47:12 DEBUG   ::1             getLocalTaxesFromRate vatrate=0.000 local=2
2017-05-05 14:47:12 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax1_type, t.localtax2, t.localtax2_type, t.accountancy_code_sell, t.accountancy_code_buy FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = '' AND t.taux = 0 AND t.active = 1
2017-05-05 14:47:12 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2  FROM llx_c_tva as t inner join llx_c_country as c ON c.rowid=t.fk_pays WHERE c.code = 'ES' AND t.active = 1 AND t.taux=(  SELECT max(tt.taux) FROM llx_c_tva as tt inner join llx_c_country as c ON c.rowid=tt.fk_pays  WHERE c.code = 'ES' AND tt.active = 1  )
2017-05-05 14:47:12 DEBUG   ::1             get_localtax tva=0.000 local=2 thirdparty_buyer id=/country_code= thirdparty_seller id=0/country_code=ES thirdparty_seller localtax1_assuj=0  thirdparty_seller localtax2_assuj=1
2017-05-05 14:47:12 DEBUG   ::1             sql=SELECT fd.rowid, fd.fk_facture, fd.fk_parent_line, fd.fk_product, fd.product_type, fd.label as custom_label, fd.description, fd.price, fd.qty, fd.tva_tx, fd.localtax1_tx, fd. localtax2_tx, fd.remise, fd.remise_percent, fd.fk_remise_except, fd.subprice, fd.date_start as date_start, fd.date_end as date_end, fd.fk_product_fournisseur_price as fk_fournprice, fd.buy_price_ht as pa_ht, fd.info_bits, fd.special_code, fd.total_ht, fd.total_tva, fd.total_ttc, fd.total_localtax1, fd.total_localtax2, fd.rang, fd.fk_code_ventilation, fd.fk_unit, fd.situation_percent, fd.fk_prev_id, p.ref as product_ref, p.label as product_libelle, p.description as product_desc , fd.multicurrency_subprice , fd.multicurrency_total_ht , fd.multicurrency_total_tva , fd.multicurrency_total_ttc FROM llx_facturedet as fd LEFT JOIN llx_product as p ON fd.fk_product = p.rowid WHERE fd.rowid = 5
2017-05-05 14:47:12 WARNING ::1             Functions.lib::dol_print_date function call with deprecated value of time in page /dolibarr/compta/journal/sellsjournal.php
2017-05-05 14:47:12 WARNING ::1             Functions.lib::dol_print_date function call with deprecated value of time in page /dolibarr/compta/journal/sellsjournal.php
2017-05-05 14:47:12 WARNING ::1             Functions.lib::dol_print_date function call with deprecated value of time in page /dolibarr/compta/journal/sellsjournal.php
2017-05-05 14:47:12 WARNING ::1             Functions.lib::dol_print_date function call with deprecated value of time in page /dolibarr/compta/journal/sellsjournal.php
2017-05-05 14:47:12 WARNING ::1             Functions.lib::dol_print_date function call with deprecated value of time in page /dolibarr/compta/journal/sellsjournal.php
2017-05-05 14:47:12 WARNING ::1             Functions.lib::dol_print_date function call with deprecated value of time in page /dolibarr/compta/journal/sellsjournal.php
2017-05-05 14:47:12 WARNING ::1             Functions.lib::dol_print_date function call with deprecated value of time in page /dolibarr/compta/journal/sellsjournal.php
2017-05-05 14:47:12 WARNING ::1             Functions.lib::dol_print_date function call with deprecated value of time in page /dolibarr/compta/journal/sellsjournal.php
2017-05-05 14:47:12 WARNING ::1             Functions.lib::dol_print_date function call with deprecated value of time in page /dolibarr/compta/journal/sellsjournal.php
2017-05-05 14:47:12 WARNING ::1             Functions.lib::dol_print_date function call with deprecated value of time in page /dolibarr/compta/journal/sellsjournal.php
2017-05-05 14:47:12 DEBUG   ::1             --- End access to /dolibarr/compta/journal/sellsjournal.php
2017-05-05 14:47:27 DEBUG   ::1             This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:47:27 DEBUG   ::1             User::fetch
2017-05-05 14:47:27 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:47:27 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:47:27 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:47:27 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:47:27 DEBUG   ::1             User::getrights
2017-05-05 14:47:27 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:47:27 DEBUG   ::1             User::getrights
2017-05-05 14:47:27 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:47:27 DEBUG   ::1             --- Access to /dolibarr/compta/journal/purchasesjournal.php
2017-05-05 14:47:27 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:47:27 DEBUG   ::1             Menubase::menuLoad mymainmenu=accountancy myleftmenu=report type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:47:27 DEBUG   ::1             sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:47:27 DEBUG   ::1             sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:47:27 DEBUG   ::1             useLocalTax
2017-05-05 14:47:27 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax1_type <> '0'
2017-05-05 14:47:27 DEBUG   ::1             useLocalTax
2017-05-05 14:47:27 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:47:27 DEBUG   ::1             sql=SET SQL_BIG_SELECTS=1
2017-05-05 14:47:27 DEBUG   ::1             sql=SELECT f.rowid, f.ref_supplier, f.type, f.datef, f.libelle, fd.total_ttc, fd.tva_tx, fd.total_ht, fd.tva as total_tva, fd.product_type, fd.localtax1_tx, fd.localtax2_tx, fd.total_localtax1, fd.total_localtax2, s.rowid as socid, s.nom as name, s.code_compta_fournisseur, p.rowid as pid, p.ref as ref, p.accountancy_code_buy, ct.accountancy_code_buy as account_tva, ct.recuperableonly FROM llx_facture_fourn_det as fd LEFT JOIN llx_c_tva as ct ON fd.tva_tx = ct.taux AND fd.info_bits = ct.recuperableonly AND ct.fk_pays = '4' LEFT JOIN llx_product as p ON p.rowid = fd.fk_product JOIN llx_facture_fourn as f ON f.rowid = fd.fk_facture_fourn JOIN llx_societe as s ON s.rowid = f.fk_soc WHERE f.fk_statut > 0 AND f.entity = 1 AND f.type IN (0,1,2,3) AND f.datef >= '20170401000000' AND f.datef <= '20170430235959'
2017-05-05 14:47:27 DEBUG   ::1             getLocalTaxesFromRate vatrate=21.000 local=1
2017-05-05 14:47:27 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax1_type, t.localtax2, t.localtax2_type, t.accountancy_code_sell, t.accountancy_code_buy FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.taux = 21 AND t.active = 1
2017-05-05 14:47:27 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2  FROM llx_c_tva as t inner join llx_c_country as c ON c.rowid=t.fk_pays WHERE c.code = 'ES' AND t.active = 1 AND t.taux=(  SELECT max(tt.taux) FROM llx_c_tva as tt inner join llx_c_country as c ON c.rowid=tt.fk_pays  WHERE c.code = 'ES' AND tt.active = 1  )
2017-05-05 14:47:27 DEBUG   ::1             getLocalTaxesFromRate vatrate=21.000 local=2
2017-05-05 14:47:27 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax1_type, t.localtax2, t.localtax2_type, t.accountancy_code_sell, t.accountancy_code_buy FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.taux = 21 AND t.active = 1
2017-05-05 14:47:27 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2  FROM llx_c_tva as t inner join llx_c_country as c ON c.rowid=t.fk_pays WHERE c.code = 'ES' AND t.active = 1 AND t.taux=(  SELECT max(tt.taux) FROM llx_c_tva as tt inner join llx_c_country as c ON c.rowid=tt.fk_pays  WHERE c.code = 'ES' AND tt.active = 1  )
2017-05-05 14:47:27 DEBUG   ::1             get_localtax tva=21.000 local=2 thirdparty_buyer id=0/country_code=ES thirdparty_seller id=0/country_code=ES thirdparty_seller localtax1_assuj=0  thirdparty_seller localtax2_assuj=1
2017-05-05 14:47:27 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2  FROM llx_c_tva as t inner join llx_c_country as c ON c.rowid=t.fk_pays WHERE c.code = 'ES' AND t.active = 1 AND t.taux=(  SELECT max(tt.taux) FROM llx_c_tva as tt inner join llx_c_country as c ON c.rowid=tt.fk_pays  WHERE c.code = 'ES' AND tt.active = 1  )
2017-05-05 14:47:27 WARNING ::1             Functions.lib::dol_print_date function call with deprecated value of time in page /dolibarr/compta/journal/purchasesjournal.php
2017-05-05 14:47:27 WARNING ::1             Functions.lib::dol_print_date function call with deprecated value of time in page /dolibarr/compta/journal/purchasesjournal.php
2017-05-05 14:47:27 WARNING ::1             Functions.lib::dol_print_date function call with deprecated value of time in page /dolibarr/compta/journal/purchasesjournal.php
2017-05-05 14:47:27 DEBUG   ::1             --- End access to /dolibarr/compta/journal/purchasesjournal.php
2017-05-05 14:47:40 DEBUG   ::1             This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:47:40 DEBUG   ::1             User::fetch
2017-05-05 14:47:40 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:47:40 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:47:40 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:47:40 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:47:40 DEBUG   ::1             User::getrights
2017-05-05 14:47:40 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:47:40 DEBUG   ::1             User::getrights
2017-05-05 14:47:40 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:47:40 DEBUG   ::1             --- Access to /dolibarr/societe/index.php
2017-05-05 14:47:40 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:47:40 DEBUG   ::1             Menubase::menuLoad mymainmenu=companies myleftmenu= type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:47:40 DEBUG   ::1             sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:47:40 DEBUG   ::1             sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:47:40 DEBUG   ::1             sql=SELECT s.rowid, s.client, s.fournisseur FROM llx_societe as s WHERE s.entity IN (1)
2017-05-05 14:47:40 WARNING ::1             dol_print_graph is deprecated
2017-05-05 14:47:40 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.client, s.fournisseur, s.code_client, s.code_fournisseur, s.logo, s.canvas, s.tms as datem, s.status as status FROM llx_societe as s WHERE s.entity IN (1) ORDER BY s.tms DESC LIMIT 15
2017-05-05 14:47:40 DEBUG   ::1             --- End access to /dolibarr/societe/index.php
2017-05-05 14:47:47 DEBUG   ::1             This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:47:47 DEBUG   ::1             User::fetch
2017-05-05 14:47:47 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:47:47 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:47:47 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:47:47 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:47:47 DEBUG   ::1             User::getrights
2017-05-05 14:47:47 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:47:47 DEBUG   ::1             User::getrights
2017-05-05 14:47:47 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:47:47 DEBUG   ::1             --- Access to /dolibarr/societe/list.php
2017-05-05 14:47:47 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:47:47 DEBUG   ::1             Menubase::menuLoad mymainmenu=companies myleftmenu=thirdparties type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:47:47 DEBUG   ::1             sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:47:48 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:47:48 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:47:48 DEBUG   ::1             sql=SELECT id, code, libelle as label FROM llx_c_stcomm WHERE active = 1
2017-05-05 14:47:48 DEBUG   ::1             societe/list.php
2017-05-05 14:47:48 DEBUG   ::1             sql=SELECT code, label, sortorder, 0 as is_in_range FROM llx_c_prospectlevel WHERE active > 0 ORDER BY sortorder
2017-05-05 14:47:48 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.barcode, s.town, s.zip, s.datec, s.code_client, s.code_fournisseur,  st.libelle as stcomm, s.fk_stcomm as stcomm_id, s.fk_prospectlevel, s.prefix_comm, s.client, s.fournisseur, s.canvas, s.status as status, s.siren as idprof1, s.siret as idprof2, ape as idprof3, idprof4 as idprof4, s.fk_pays, s.tms as date_update, s.datec as date_creation, typent.code as typent_code, state.code_departement as state_code, state.nom as state_name FROM llx_societe as s LEFT JOIN llx_c_country as country on (country.rowid = s.fk_pays) LEFT JOIN llx_c_typent as typent on (typent.id = s.fk_typent) LEFT JOIN llx_c_departements as state on (state.rowid = s.fk_departement) ,llx_c_stcomm as st WHERE s.fk_stcomm = st.id AND s.entity IN (1) AND s.status = 1 ORDER BY s.nom ASC
2017-05-05 14:47:48 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.barcode, s.town, s.zip, s.datec, s.code_client, s.code_fournisseur,  st.libelle as stcomm, s.fk_stcomm as stcomm_id, s.fk_prospectlevel, s.prefix_comm, s.client, s.fournisseur, s.canvas, s.status as status, s.siren as idprof1, s.siret as idprof2, ape as idprof3, idprof4 as idprof4, s.fk_pays, s.tms as date_update, s.datec as date_creation, typent.code as typent_code, state.code_departement as state_code, state.nom as state_name FROM llx_societe as s LEFT JOIN llx_c_country as country on (country.rowid = s.fk_pays) LEFT JOIN llx_c_typent as typent on (typent.id = s.fk_typent) LEFT JOIN llx_c_departements as state on (state.rowid = s.fk_departement) ,llx_c_stcomm as st WHERE s.fk_stcomm = st.id AND s.entity IN (1) AND s.status = 1 ORDER BY s.nom ASC LIMIT 26
2017-05-05 14:47:48 DEBUG   ::1             sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:47:48 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.statut, u.login FROM llx_user as u WHERE u.entity IN (0,1) ORDER BY lastname ASC
2017-05-05 14:47:48 DEBUG   ::1             FormCompany::typent_array
2017-05-05 14:47:48 DEBUG   ::1             sql=SELECT id, code, libelle FROM llx_c_typent WHERE active = 1 AND (fk_country IS NULL OR fk_country = 4) ORDER by position, id
2017-05-05 14:47:48 DEBUG   ::1             FormCompany::typent_array
2017-05-05 14:47:48 DEBUG   ::1             sql=SELECT id, code, libelle FROM llx_c_typent WHERE active = 1 AND (fk_country IS NULL OR fk_country = 4) ORDER by position, id
2017-05-05 14:47:48 DEBUG   ::1             --- End access to /dolibarr/societe/list.php
2017-05-05 14:48:30 DEBUG   ::1             This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:48:30 DEBUG   ::1             User::fetch
2017-05-05 14:48:30 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:48:30 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:48:30 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:48:30 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:48:30 DEBUG   ::1             User::getrights
2017-05-05 14:48:30 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:48:30 DEBUG   ::1             User::getrights
2017-05-05 14:48:30 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:48:30 DEBUG   ::1             --- Access to /dolibarr/societe/list.php
2017-05-05 14:48:30 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:48:30 DEBUG   ::1             Menubase::menuLoad mymainmenu=companies myleftmenu=customers type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:48:30 DEBUG   ::1             sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:48:30 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:48:30 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:48:30 DEBUG   ::1             sql=SELECT id, code, libelle as label FROM llx_c_stcomm WHERE active = 1
2017-05-05 14:48:30 DEBUG   ::1             societe/list.php
2017-05-05 14:48:30 DEBUG   ::1             sql=SELECT code, label, sortorder, 0 as is_in_range FROM llx_c_prospectlevel WHERE active > 0 ORDER BY sortorder
2017-05-05 14:48:30 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.barcode, s.town, s.zip, s.datec, s.code_client, s.code_fournisseur,  st.libelle as stcomm, s.fk_stcomm as stcomm_id, s.fk_prospectlevel, s.prefix_comm, s.client, s.fournisseur, s.canvas, s.status as status, s.siren as idprof1, s.siret as idprof2, ape as idprof3, idprof4 as idprof4, s.fk_pays, s.tms as date_update, s.datec as date_creation, typent.code as typent_code, state.code_departement as state_code, state.nom as state_name FROM llx_societe as s LEFT JOIN llx_c_country as country on (country.rowid = s.fk_pays) LEFT JOIN llx_c_typent as typent on (typent.id = s.fk_typent) LEFT JOIN llx_c_departements as state on (state.rowid = s.fk_departement) ,llx_c_stcomm as st WHERE s.fk_stcomm = st.id AND s.entity IN (1) AND s.client IN (1,3) AND s.status = 1 ORDER BY s.nom ASC
2017-05-05 14:48:30 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.barcode, s.town, s.zip, s.datec, s.code_client, s.code_fournisseur,  st.libelle as stcomm, s.fk_stcomm as stcomm_id, s.fk_prospectlevel, s.prefix_comm, s.client, s.fournisseur, s.canvas, s.status as status, s.siren as idprof1, s.siret as idprof2, ape as idprof3, idprof4 as idprof4, s.fk_pays, s.tms as date_update, s.datec as date_creation, typent.code as typent_code, state.code_departement as state_code, state.nom as state_name FROM llx_societe as s LEFT JOIN llx_c_country as country on (country.rowid = s.fk_pays) LEFT JOIN llx_c_typent as typent on (typent.id = s.fk_typent) LEFT JOIN llx_c_departements as state on (state.rowid = s.fk_departement) ,llx_c_stcomm as st WHERE s.fk_stcomm = st.id AND s.entity IN (1) AND s.client IN (1,3) AND s.status = 1 ORDER BY s.nom ASC LIMIT 26
2017-05-05 14:48:30 DEBUG   ::1             sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:48:30 DEBUG   ::1             Categorie::load_motherof
2017-05-05 14:48:30 DEBUG   ::1             sql=SELECT fk_parent as id_parent, rowid as id_son FROM llx_categorie WHERE fk_parent != 0 AND entity IN (1)
2017-05-05 14:48:30 DEBUG   ::1             Categorie::get_full_arbo get category list
2017-05-05 14:48:30 DEBUG   ::1             sql=SELECT DISTINCT c.rowid, c.label, c.description, c.color, c.fk_parent FROM llx_categorie as c WHERE c.entity IN (1) AND c.type = 2
2017-05-05 14:48:30 DEBUG   ::1             Categorie::get_full_arbo call to build_path_from_id_categ
2017-05-05 14:48:30 DEBUG   ::1             Categorie::get_full_arbo dol_sort_array
2017-05-05 14:48:30 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.statut, u.login FROM llx_user as u WHERE u.entity IN (0,1) ORDER BY lastname ASC
2017-05-05 14:48:30 DEBUG   ::1             FormCompany::typent_array
2017-05-05 14:48:30 DEBUG   ::1             sql=SELECT id, code, libelle FROM llx_c_typent WHERE active = 1 AND (fk_country IS NULL OR fk_country = 4) ORDER by position, id
2017-05-05 14:48:30 DEBUG   ::1             FormCompany::typent_array
2017-05-05 14:48:30 DEBUG   ::1             sql=SELECT id, code, libelle FROM llx_c_typent WHERE active = 1 AND (fk_country IS NULL OR fk_country = 4) ORDER by position, id
2017-05-05 14:48:30 DEBUG   ::1             --- End access to /dolibarr/societe/list.php
2017-05-05 14:48:40 DEBUG   ::1             This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:48:40 DEBUG   ::1             User::fetch
2017-05-05 14:48:40 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:48:40 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:48:40 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:48:40 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:48:40 DEBUG   ::1             User::getrights
2017-05-05 14:48:40 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:48:40 DEBUG   ::1             User::getrights
2017-05-05 14:48:40 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:48:40 DEBUG   ::1             --- Access to /dolibarr/societe/list.php
2017-05-05 14:48:40 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:48:40 DEBUG   ::1             Menubase::menuLoad mymainmenu=companies myleftmenu=suppliers type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:48:40 DEBUG   ::1             sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:48:40 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:48:40 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:48:40 DEBUG   ::1             sql=SELECT id, code, libelle as label FROM llx_c_stcomm WHERE active = 1
2017-05-05 14:48:40 DEBUG   ::1             societe/list.php
2017-05-05 14:48:40 DEBUG   ::1             sql=SELECT code, label, sortorder, 0 as is_in_range FROM llx_c_prospectlevel WHERE active > 0 ORDER BY sortorder
2017-05-05 14:48:40 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.barcode, s.town, s.zip, s.datec, s.code_client, s.code_fournisseur,  st.libelle as stcomm, s.fk_stcomm as stcomm_id, s.fk_prospectlevel, s.prefix_comm, s.client, s.fournisseur, s.canvas, s.status as status, s.siren as idprof1, s.siret as idprof2, ape as idprof3, idprof4 as idprof4, s.fk_pays, s.tms as date_update, s.datec as date_creation, typent.code as typent_code, state.code_departement as state_code, state.nom as state_name FROM llx_societe as s LEFT JOIN llx_c_country as country on (country.rowid = s.fk_pays) LEFT JOIN llx_c_typent as typent on (typent.id = s.fk_typent) LEFT JOIN llx_c_departements as state on (state.rowid = s.fk_departement) ,llx_c_stcomm as st WHERE s.fk_stcomm = st.id AND s.entity IN (1) AND s.fournisseur = 1 AND s.status = 1 ORDER BY s.nom ASC
2017-05-05 14:48:40 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.barcode, s.town, s.zip, s.datec, s.code_client, s.code_fournisseur,  st.libelle as stcomm, s.fk_stcomm as stcomm_id, s.fk_prospectlevel, s.prefix_comm, s.client, s.fournisseur, s.canvas, s.status as status, s.siren as idprof1, s.siret as idprof2, ape as idprof3, idprof4 as idprof4, s.fk_pays, s.tms as date_update, s.datec as date_creation, typent.code as typent_code, state.code_departement as state_code, state.nom as state_name FROM llx_societe as s LEFT JOIN llx_c_country as country on (country.rowid = s.fk_pays) LEFT JOIN llx_c_typent as typent on (typent.id = s.fk_typent) LEFT JOIN llx_c_departements as state on (state.rowid = s.fk_departement) ,llx_c_stcomm as st WHERE s.fk_stcomm = st.id AND s.entity IN (1) AND s.fournisseur = 1 AND s.status = 1 ORDER BY s.nom ASC LIMIT 26
2017-05-05 14:48:40 DEBUG   ::1             sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:48:40 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.statut, u.login FROM llx_user as u WHERE u.entity IN (0,1) ORDER BY lastname ASC
2017-05-05 14:48:40 DEBUG   ::1             Categorie::load_motherof
2017-05-05 14:48:40 DEBUG   ::1             sql=SELECT fk_parent as id_parent, rowid as id_son FROM llx_categorie WHERE fk_parent != 0 AND entity IN (1)
2017-05-05 14:48:40 DEBUG   ::1             Categorie::get_full_arbo get category list
2017-05-05 14:48:40 DEBUG   ::1             sql=SELECT DISTINCT c.rowid, c.label, c.description, c.color, c.fk_parent FROM llx_categorie as c WHERE c.entity IN (1) AND c.type = 1
2017-05-05 14:48:40 DEBUG   ::1             Categorie::get_full_arbo call to build_path_from_id_categ
2017-05-05 14:48:40 DEBUG   ::1             Categorie::get_full_arbo dol_sort_array
2017-05-05 14:48:40 DEBUG   ::1             FormCompany::typent_array
2017-05-05 14:48:40 DEBUG   ::1             sql=SELECT id, code, libelle FROM llx_c_typent WHERE active = 1 AND (fk_country IS NULL OR fk_country = 4) ORDER by position, id
2017-05-05 14:48:40 DEBUG   ::1             FormCompany::typent_array
2017-05-05 14:48:40 DEBUG   ::1             sql=SELECT id, code, libelle FROM llx_c_typent WHERE active = 1 AND (fk_country IS NULL OR fk_country = 4) ORDER by position, id
2017-05-05 14:48:40 DEBUG   ::1             --- End access to /dolibarr/societe/list.php
2017-05-05 14:49:14 DEBUG   ::1             This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:49:14 DEBUG   ::1             User::fetch
2017-05-05 14:49:14 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:49:14 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:49:14 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:49:14 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:49:14 DEBUG   ::1             User::getrights
2017-05-05 14:49:14 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:49:14 DEBUG   ::1             User::getrights
2017-05-05 14:49:14 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:49:14 DEBUG   ::1             --- Access to /dolibarr/compta/index.php
2017-05-05 14:49:14 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:49:14 DEBUG   ::1             Menubase::menuLoad mymainmenu=accountancy myleftmenu= type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:49:14 DEBUG   ::1             sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:49:14 DEBUG   ::1             sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:49:14 DEBUG   ::1             useLocalTax
2017-05-05 14:49:14 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax1_type <> '0'
2017-05-05 14:49:14 DEBUG   ::1             useLocalTax
2017-05-05 14:49:14 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:49:14 DEBUG   ::1             sql=SELECT f.facnumber, f.rowid, f.total as total_ht, f.tva as total_tva, f.total_ttc, f.type, s.nom as name, s.rowid as socid,s.code_client FROM llx_facture as f, llx_societe as s WHERE s.rowid = f.fk_soc AND f.fk_statut = 0 AND f.entity = 1
2017-05-05 14:49:14 DEBUG   ::1             sql=SELECT f.ref, f.rowid, f.total_ht, f.total_tva, f.total_ttc, f.type, s.nom as name, s.rowid as socid, s.code_fournisseur FROM llx_facture_fourn as f, llx_societe as s WHERE s.rowid = f.fk_soc AND f.fk_statut = 0 AND f.entity = 1
2017-05-05 14:49:14 DEBUG   ::1             sql=SELECT f.rowid, f.facnumber, f.fk_statut, f.type, f.total as total_ht, f.tva as total_tva, f.total_ttc, f.paye, f.tms, f.date_lim_reglement as datelimite, s.nom as name, s.rowid as socid, s.code_client, sum(pf.amount) as am FROM llx_societe as s,llx_facture as f LEFT JOIN llx_paiement_facture as pf on f.rowid=pf.fk_facture WHERE s.rowid = f.fk_soc AND f.entity = 1 GROUP BY f.rowid, f.facnumber, f.fk_statut, f.type, f.total, f.tva, f.total_ttc, f.paye, f.tms, f.date_lim_reglement, s.nom, s.rowid, s.code_client ORDER BY f.tms DESC  LIMIT 3
2017-05-05 14:49:14 DEBUG   ::1             Translate::loadCacheCurrencies
2017-05-05 14:49:14 DEBUG   ::1             sql=SELECT code_iso, label, unicode FROM llx_c_currencies WHERE active = 1 AND code_iso = 'EUR'
2017-05-05 14:49:14 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1704-0004 types=files recursive=0 filter=FA1704\-0004[^\-]+ excludefilter="\\.meta$|\\.png$"
2017-05-05 14:49:14 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1704-0002 types=files recursive=0 filter=FA1704\-0002[^\-]+ excludefilter="\\.meta$|\\.png$"
2017-05-05 14:49:14 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1704-0003 types=files recursive=0 filter=FA1704\-0003[^\-]+ excludefilter="\\.meta$|\\.png$"
2017-05-05 14:49:14 DEBUG   ::1             sql=SELECT ff.rowid, ff.ref, ff.fk_statut, ff.libelle, ff.total_ht, ff.total_tva, ff.total_ttc, ff.tms, ff.paye, s.nom as name, s.rowid as socid, s.code_fournisseur, SUM(pf.amount) as am FROM llx_societe as s, llx_facture_fourn as ff LEFT JOIN llx_paiementfourn_facturefourn as pf on ff.rowid=pf.fk_facturefourn WHERE s.rowid = ff.fk_soc AND ff.entity = 1 GROUP BY ff.rowid, ff.ref, ff.fk_statut, ff.libelle, ff.total_ht, ff.tva, ff.total_tva, ff.total_ttc, ff.tms, ff.paye, s.nom, s.rowid, s.code_fournisseur ORDER BY ff.tms DESC  LIMIT 3
2017-05-05 14:49:14 DEBUG   ::1             sql=SELECT d.rowid, d.lastname, d.firstname, d.societe, d.datedon as date, d.tms as dm, d.amount, d.fk_statut FROM llx_don as d WHERE d.entity = 1 ORDER BY d.tms DESC LIMIT 3
2017-05-05 14:49:14 DEBUG   ::1             sql=SELECT c.rowid, c.amount, c.date_ech, c.paye, cc.libelle, SUM(pc.amount) as sumpaid FROM (llx_c_chargesociales as cc, llx_chargesociales as c) LEFT JOIN llx_paiementcharge as pc ON pc.fk_charge = c.rowid WHERE c.fk_type = cc.id AND c.entity = 1 AND c.paye = 0 GROUP BY c.rowid, c.amount, c.date_ech, c.paye, cc.libelle
2017-05-05 14:49:14 DEBUG   ::1             sql=SELECT sum(f.total) as tot_fht, sum(f.total_ttc) as tot_fttc, s.nom as name, s.rowid as socid, s.code_client, c.rowid, c.ref, c.facture, c.fk_statut, c.total_ht, c.tva as total_tva, c.total_ttc FROM llx_societe as s, llx_commande as c LEFT JOIN llx_element_element as el ON el.fk_source = c.rowid AND el.sourcetype = 'commande' LEFT JOIN llx_facture AS f ON el.fk_target = f.rowid AND el.targettype = 'facture' WHERE c.fk_soc = s.rowid AND c.entity = 1 AND c.fk_statut = 3 AND c.facture = 0 GROUP BY s.nom, s.rowid, s.code_client, c.rowid, c.ref, c.facture, c.fk_statut, c.tva, c.total_ht, c.total_ttc
2017-05-05 14:49:14 DEBUG   ::1             sql=SELECT f.rowid, f.facnumber, f.fk_statut, f.datef, f.type, f.total as total_ht, f.tva as total_tva, f.total_ttc, f.paye, f.tms, f.date_lim_reglement as datelimite, s.nom as name, s.rowid as socid, s.code_client, sum(pf.amount) as am FROM llx_societe as s,llx_facture as f LEFT JOIN llx_paiement_facture as pf on f.rowid=pf.fk_facture WHERE s.rowid = f.fk_soc AND f.paye = 0 AND f.fk_statut = 1 AND f.entity = 1 GROUP BY f.rowid, f.facnumber, f.fk_statut, f.datef, f.type, f.total, f.tva, f.total_ttc, f.paye, f.tms, f.date_lim_reglement, s.nom, s.rowid, s.code_client ORDER BY f.datef ASC, f.facnumber ASC
2017-05-05 14:49:14 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1704-0001 types=files recursive=0 filter=FA1704\-0001[^\-]+ excludefilter="\\.meta$|\\.png$"
2017-05-05 14:49:14 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/AV1704-0001 types=files recursive=0 filter=AV1704\-0001[^\-]+ excludefilter="\\.meta$|\\.png$"
2017-05-05 14:49:14 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1704-0004 types=files recursive=0 filter=FA1704\-0004[^\-]+ excludefilter="\\.meta$|\\.png$"
2017-05-05 14:49:14 DEBUG   ::1             sql=SELECT ff.rowid, ff.ref, ff.fk_statut, ff.libelle, ff.total_ht, ff.total_tva, ff.total_ttc, ff.paye, ff.date_lim_reglement, s.nom as name, s.rowid as socid, s.code_client, s.code_fournisseur, sum(pf.amount) as am FROM llx_societe as s, llx_facture_fourn as ff LEFT JOIN llx_paiementfourn_facturefourn as pf on ff.rowid=pf.fk_facturefourn WHERE s.rowid = ff.fk_soc AND ff.entity = 1 AND ff.paye = 0 AND ff.fk_statut = 1 GROUP BY ff.rowid, ff.ref, ff.fk_statut, ff.libelle, ff.total_ht, ff.tva, ff.total_tva, ff.total_ttc, ff.paye, s.nom, s.rowid, s.code_client, s.code_fournisseur, ff.date_lim_reglement ORDER BY ff.date_lim_reglement ASC
2017-05-05 14:49:14 DEBUG   ::1             --- End access to /dolibarr/compta/index.php
2017-05-05 14:49:24 DEBUG   ::1             This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:49:24 DEBUG   ::1             User::fetch
2017-05-05 14:49:24 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:49:24 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:49:24 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:49:24 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:49:24 DEBUG   ::1             User::getrights
2017-05-05 14:49:24 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:49:24 DEBUG   ::1             User::getrights
2017-05-05 14:49:24 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:49:24 DEBUG   ::1             --- Access to /dolibarr/compta/facture.php
2017-05-05 14:49:24 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:49:24 DEBUG   ::1             Menubase::menuLoad mymainmenu=accountancy myleftmenu=customers_bills type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:49:24 DEBUG   ::1             sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:49:24 DEBUG   ::1             sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:49:24 DEBUG   ::1             useLocalTax
2017-05-05 14:49:24 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax1_type <> '0'
2017-05-05 14:49:24 DEBUG   ::1             useLocalTax
2017-05-05 14:49:24 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:49:24 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:49:24 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:49:24 DEBUG   ::1             Form::select_thirdparty_list
2017-05-05 14:49:24 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.client, s.fournisseur, s.code_client, s.code_fournisseur FROM llx_societe as s WHERE s.entity IN (1) AND ((s.client = 1 OR s.client = 3) AND status=1) ORDER BY nom ASC
2017-05-05 14:49:24 DEBUG   ::1             Facture::list_replacable_invoices
2017-05-05 14:49:24 DEBUG   ::1             sql=SELECT f.rowid as rowid, f.facnumber, f.fk_statut, ff.rowid as rowidnext FROM llx_facture as f LEFT JOIN llx_paiement_facture as pf ON f.rowid = pf.fk_facture LEFT JOIN llx_facture as ff ON f.rowid = ff.fk_facture_source WHERE (f.fk_statut = 1 OR (f.fk_statut = 3 AND f.close_code = 'abandon')) AND f.entity = 1 AND f.paye = 0 AND pf.fk_paiement IS NULL AND ff.fk_statut IS NULL ORDER BY f.facnumber
2017-05-05 14:49:24 DEBUG   ::1             Facture::list_qualified_avoir_invoices
2017-05-05 14:49:24 DEBUG   ::1             sql=SELECT f.rowid as rowid, f.facnumber, f.fk_statut, f.type, f.paye, pf.fk_paiement FROM llx_facture as f LEFT JOIN llx_paiement_facture as pf ON f.rowid = pf.fk_facture LEFT JOIN llx_facture as ff ON (f.rowid = ff.fk_facture_source AND ff.type=1) WHERE f.entity = 1 AND f.fk_statut in (1,2) AND ff.type IS NULL AND f.type != 2 ORDER BY f.facnumber
2017-05-05 14:49:24 DEBUG   ::1             Form::select_conditions_paiements selected=, htmlname=cond_reglement_id
2017-05-05 14:49:24 DEBUG   ::1             Form::load_cache_conditions_paiements
2017-05-05 14:49:24 DEBUG   ::1             sql=SELECT rowid, code, libelle as label FROM llx_c_payment_term WHERE active > 0 ORDER BY sortorder
2017-05-05 14:49:24 DEBUG   ::1             Form::select_types_paiements , mode_reglement_id, CRDT, 0
2017-05-05 14:49:24 DEBUG   ::1             Form::load_cache_types_paiements
2017-05-05 14:49:24 DEBUG   ::1             sql=SELECT id, code, libelle as label, type, active FROM llx_c_paiement
2017-05-05 14:49:24 DEBUG   ::1             Translate::getLabelFromKey
2017-05-05 14:49:24 DEBUG   ::1             sql=SELECT libelle as label FROM llx_c_paiement WHERE code = 'LCR'
2017-05-05 14:49:24 DEBUG   ::1             Form::select_comptes
2017-05-05 14:49:24 DEBUG   ::1             sql=SELECT rowid, label, bank, clos as status FROM llx_bank_account WHERE entity IN (1) AND clos = '0' ORDER BY label
2017-05-05 14:49:24 DEBUG   ::1             /core/lib/function2.lib.php::getListOfModels
2017-05-05 14:49:24 DEBUG   ::1             sql=SELECT nom as id, nom as lib, libelle as label, description as description FROM llx_document_model WHERE type = 'invoice' AND entity IN (0,1) ORDER BY description DESC
2017-05-05 14:49:24 DEBUG   ::1             DolEditor::DolEditor htmlname=note_public width= height=80 toolbarname=dolibarr_notes
2017-05-05 14:49:24 DEBUG   ::1             DolEditor::DolEditor htmlname=note_private width= height=80 toolbarname=dolibarr_notes
2017-05-05 14:49:24 DEBUG   ::1             --- End access to /dolibarr/compta/facture.php
2017-05-05 14:49:39 DEBUG   ::1             --- Access to /dolibarr/core/datepicker.php
2017-05-05 14:49:39 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:49:39 DEBUG   ::1             --- End access to /dolibarr/core/datepicker.php
2017-05-05 14:50:26 DEBUG   ::1             This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:50:26 DEBUG   ::1             User::fetch
2017-05-05 14:50:26 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:50:26 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:50:26 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:50:26 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:50:26 DEBUG   ::1             User::getrights
2017-05-05 14:50:26 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:50:26 DEBUG   ::1             User::getrights
2017-05-05 14:50:26 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:50:26 DEBUG   ::1             --- Access to /dolibarr/compta/facture.php
2017-05-05 14:50:26 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:50:26 DEBUG   ::1             Menubase::menuLoad mymainmenu=accountancy myleftmenu=customers_bills type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:50:26 DEBUG   ::1             sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:50:27 DEBUG   ::1             BEGIN Transaction
2017-05-05 14:50:27 DEBUG   ::1              ExtraFields::fetch_name_optionals_label
2017-05-05 14:50:27 DEBUG   ::1              sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:50:27 DEBUG   ::1              sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:50:27 DEBUG   ::1              Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:50:27 DEBUG   ::1              ExtraFields::fetch_name_optionals_label
2017-05-05 14:50:27 DEBUG   ::1              sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:50:27 DEBUG   ::1              MultiCurrency::getIdFromCode
2017-05-05 14:50:27 DEBUG   ::1              sql=SELECT rowid FROM llx_multicurrency WHERE code = ''
2017-05-05 14:50:27 DEBUG   ::1              Facture::create user=1
2017-05-05 14:50:27 DEBUG   ::1              sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:50:27 DEBUG   ::1              Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:50:27 DEBUG   ::1              ExtraFields::fetch_name_optionals_label
2017-05-05 14:50:27 DEBUG   ::1              sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:50:27 DEBUG   ::1               Facture::calculate_date_lim_reglement
2017-05-05 14:50:27 DEBUG   ::1               sql=SELECT c.fdm,c.nbjour,c.decalage FROM llx_c_payment_term as c WHERE c.rowid=1
2017-05-05 14:50:27 DEBUG   ::1               Facture::create
2017-05-05 14:50:27 DEBUG   ::1               sql=INSERT INTO llx_facture ( facnumber, entity, ref_ext, type, fk_soc, datec, remise_absolue, remise_percent, datef, date_pointoftax, note_private, note_public, ref_client, ref_int, fk_account, fk_facture_source, fk_user_author, fk_projet, fk_cond_reglement, fk_mode_reglement, date_lim_reglement, model_pdf, situation_cycle_ref, situation_counter, situation_final, fk_incoterms, location_incoterms, fk_multicurrency, multicurrency_code, multicurrency_tx) VALUES ('(PROV)', 1, null, '0', '3', '20170505145027', NULL, NULL, '20170505120000', null, null, null, null, null, 1, null, '1', null, 1, 4, '20170506120000', 'crabe', null, null, 0, 0, '', 0, 'EUR', 1)
2017-05-05 14:50:27 DEBUG   ::1               Facture::create
2017-05-05 14:50:27 DEBUG   ::1               sql=UPDATE llx_facture SET facnumber='(PROV7)' WHERE rowid=7
2017-05-05 14:50:27 DEBUG   ::1               There is 0 lines that are array lines
2017-05-05 14:50:27 DEBUG   ::1               Facture::update_price
2017-05-05 14:50:27 DEBUG   ::1               sql=SELECT rowid, qty, subprice as up, remise_percent, total_ht, total_tva as total_tva, total_ttc, total_localtax1 as total_localtax1, total_localtax2 as total_localtax2, tva_tx as vatrate, localtax1_tx, localtax2_tx, localtax1_type, localtax2_type, info_bits, product_type, situation_percent, multicurrency_total_ht, multicurrency_total_tva, multicurrency_total_ttc FROM llx_facturedet WHERE fk_facture = 7 AND product_type <> 9 ORDER by rowid
2017-05-05 14:50:27 DEBUG   ::1               Facture::update_price
2017-05-05 14:50:27 DEBUG   ::1               sql=UPDATE llx_facture SET total='0', tva='0', localtax1='0', localtax2='0', total_ttc='0', multicurrency_total_ht='0', multicurrency_total_tva='0', multicurrency_total_ttc='0' WHERE rowid = 7
2017-05-05 14:50:27 DEBUG   ::1               Interfaces::run_triggers action=BILL_CREATE Triggers for file 'interface_20_modPaypal_PaypalWorkflow.class.php' need module to be enabled
2017-05-05 14:50:27 DEBUG   ::1               Interfaces::run_triggers action=BILL_CREATE Launch runTrigger for file 'interface_20_all_Logevents.class.php'
2017-05-05 14:50:27 DEBUG   ::1               Interfaces::run_triggers action=BILL_CREATE Launch runTrigger for file 'interface_20_modWorkflow_WorkflowManager.class.php'
2017-05-05 14:50:27 DEBUG   ::1               Interfaces::run_triggers action=BILL_CREATE Launch runTrigger for file 'interface_50_modAgenda_ActionsAuto.class.php'
2017-05-05 14:50:27 DEBUG   ::1               Interfaces::run_triggers action=BILL_CREATE Launch runTrigger for file 'interface_50_modLdap_Ldapsynchro.class.php'
2017-05-05 14:50:27 DEBUG   ::1               Interfaces::run_triggers action=BILL_CREATE Launch runTrigger for file 'interface_50_modMailmanspip_Mailmanspipsynchro.class.php'
2017-05-05 14:50:27 DEBUG   ::1               Interfaces::run_triggers action=BILL_CREATE Launch runTrigger for file 'interface_50_modNotification_Notification.class.php'
2017-05-05 14:50:27 DEBUG   ::1               Trigger 'Notification' for action 'BILL_CREATE' launched by C:\dolibarr\www\dolibarr\htdocs\core\triggers\interface_50_modNotification_Notification.class.php. id=7
2017-05-05 14:50:27 DEBUG   ::1               Notify::send notifcode=BILL_CREATE, object=7
2017-05-05 14:50:27 DEBUG   ::1             COMMIT Transaction
2017-05-05 14:50:27 DEBUG   ::1             --- End access to /dolibarr/compta/facture.php
2017-05-05 14:50:28 DEBUG   ::1             This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:50:28 DEBUG   ::1             User::fetch
2017-05-05 14:50:28 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:50:28 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:50:28 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:50:28 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:50:28 DEBUG   ::1             User::getrights
2017-05-05 14:50:28 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:50:28 DEBUG   ::1             User::getrights
2017-05-05 14:50:28 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:50:28 DEBUG   ::1             --- Access to /dolibarr/compta/facture.php
2017-05-05 14:50:28 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:50:28 DEBUG   ::1             Menubase::menuLoad mymainmenu=accountancy myleftmenu=customers_bills type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:50:28 DEBUG   ::1             sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:50:28 DEBUG   ::1             Facture::fetch
2017-05-05 14:50:28 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:50:28 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:50:28 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:50:28 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:50:28 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:50:28 DEBUG   ::1             sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:50:28 DEBUG   ::1             useLocalTax
2017-05-05 14:50:28 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax1_type <> '0'
2017-05-05 14:50:28 DEBUG   ::1             useLocalTax
2017-05-05 14:50:28 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:50:29 DEBUG   ::1             Facture::fetch
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:50:29 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:50:29 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:50:29 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:50:29 DEBUG   ::1             Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:50:29 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:50:29 DEBUG   ::1             Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:50:29 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:50:29 DEBUG   ::1             useRevenueStamp
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT COUNT(*) as nb FROM llx_c_revenuestamp as r, llx_c_country as c WHERE r.fk_pays = c.rowid AND c.code = 'ES' AND r.active = 1
2017-05-05 14:50:29 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:50:29 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 2
2017-05-05 14:50:29 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 3
2017-05-05 14:50:29 DEBUG   ::1             DiscountAbsolute::getAvailableDiscounts
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT SUM(rc.amount_ttc) as amount FROM llx_societe_remise_except as rc WHERE (rc.fk_facture IS NULL AND rc.fk_facture_line IS NULL) AND rc.fk_soc = 3 AND (fk_facture_source IS NULL OR (fk_facture_source IS NOT NULL AND description LIKE '(DEPOSIT)%'))
2017-05-05 14:50:29 DEBUG   ::1             DiscountAbsolute::getAvailableDiscounts
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT SUM(rc.amount_ttc) as amount FROM llx_societe_remise_except as rc WHERE (rc.fk_facture IS NULL AND rc.fk_facture_line IS NULL) AND rc.fk_soc = 3 AND (fk_facture_source IS NOT NULL AND description NOT LIKE '(DEPOSIT)%')
2017-05-05 14:50:29 DEBUG   ::1             User::fetch
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.rowid = 1
2017-05-05 14:50:29 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 7 AND type < 2 ORDER BY fk_statut DESC
2017-05-05 14:50:29 DEBUG   ::1             Facture::liste_contact
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT ec.rowid, ec.statut as statuslink, ec.fk_socpeople as id, ec.fk_c_type_contact, '-1' as socid, t.statut as statuscontact, t.civility as civility, t.lastname as lastname, t.firstname, t.email, tc.source, tc.element, tc.code, tc.libelle FROM llx_c_type_contact tc, llx_element_contact ec LEFT JOIN llx_user t on ec.fk_socpeople = t.rowid WHERE ec.element_id =7 AND ec.fk_c_type_contact=tc.rowid AND tc.element='facture' AND tc.source = 'internal' AND tc.active=1 ORDER BY t.lastname ASC
2017-05-05 14:50:29 DEBUG   ::1             Facture::liste_contact
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT ec.rowid, ec.statut as statuslink, ec.fk_socpeople as id, ec.fk_c_type_contact, t.fk_soc as socid, t.statut as statuscontact, t.civility as civility, t.lastname as lastname, t.firstname, t.email, tc.source, tc.element, tc.code, tc.libelle FROM llx_c_type_contact tc, llx_element_contact ec LEFT JOIN llx_socpeople t on ec.fk_socpeople = t.rowid WHERE ec.element_id =7 AND ec.fk_c_type_contact=tc.rowid AND tc.element='facture' AND tc.source = 'external' AND tc.active=1 ORDER BY t.lastname ASC
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT COUNT(pfd.rowid) as nb FROM llx_prelevement_facture_demande as pfd WHERE pfd.fk_facture = 7
2017-05-05 14:50:29 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/(PROV7) types=files recursive=0 filter= excludefilter="(\\.meta|_preview\\.png)$"
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT COUNT(rowid) as nb FROM llx_links WHERE objecttype = 'facture' AND objectid = 7 AND entity = 1
2017-05-05 14:50:29 DEBUG   ::1             DiscountAbsolute::fetch
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT sr.rowid, sr.fk_soc, sr.fk_user, sr.amount_ht, sr.amount_tva, sr.amount_ttc, sr.tva_tx, sr.fk_facture_line, sr.fk_facture, sr.fk_facture_source, sr.description, sr.datec, f.facnumber as ref_facture_source FROM llx_societe_remise_except as sr LEFT JOIN llx_facture as f ON sr.fk_facture_source = f.rowid WHERE sr.fk_facture_source=7
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT MAX(te.facnumber) FROM llx_facture as te WHERE te.facnumber < '(PROV7)' AND te.entity IN (1)
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT MIN(te.facnumber) FROM llx_facture as te WHERE te.facnumber > '(PROV7)' AND te.entity IN (1)
2017-05-05 14:50:29 DEBUG   ::1             get_OutstandingBill
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT rowid, total_ttc FROM llx_facture as f WHERE fk_soc = 3 AND paye = 0 AND fk_statut <> 0 AND fk_statut <> 3 AND fk_statut <> 2
2017-05-05 14:50:29 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 3
2017-05-05 14:50:29 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 2
2017-05-05 14:50:29 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 3
2017-05-05 14:50:29 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 4
2017-05-05 14:50:29 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 4 AND f.type = 2
2017-05-05 14:50:29 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 4 AND f.type = 3
2017-05-05 14:50:29 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 6
2017-05-05 14:50:29 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 2
2017-05-05 14:50:29 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 3
2017-05-05 14:50:29 DEBUG   ::1             Translate::loadCacheCurrencies
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT code_iso, label, unicode FROM llx_c_currencies WHERE active = 1 AND code_iso = 'EUR'
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 7 AND type = 2
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT p.datep as dp, p.ref, p.num_paiement, p.rowid, p.fk_bank, c.code as payment_code, c.libelle as payment_label, pf.amount, ba.rowid as baid, ba.ref as baref, ba.label FROM llx_c_paiement as c, llx_paiement_facture as pf, llx_paiement as p LEFT JOIN llx_bank as b ON p.fk_bank = b.rowid LEFT JOIN llx_bank_account as ba ON b.fk_account = ba.rowid WHERE pf.fk_facture = 7 AND p.fk_paiement = c.id AND pf.fk_paiement = p.rowid ORDER BY p.datep, p.tms
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT re.rowid, re.amount_ht, re.amount_tva, re.amount_ttc, re.description, re.fk_facture_source FROM llx_societe_remise_except as re WHERE fk_facture = 7
2017-05-05 14:50:29 DEBUG   ::1             Form::load_cache_conditions_paiements
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT rowid, code, libelle as label FROM llx_c_payment_term WHERE active > 0 ORDER BY sortorder
2017-05-05 14:50:29 DEBUG   ::1             Form::load_cache_types_paiements
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT id, code, libelle as label, type, active FROM llx_c_paiement
2017-05-05 14:50:29 DEBUG   ::1             Translate::getLabelFromKey
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT libelle as label FROM llx_c_paiement WHERE code = 'LCR'
2017-05-05 14:50:29 DEBUG   ::1             Account::fetch
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT ba.rowid, ba.ref, ba.label, ba.bank, ba.number, ba.courant, ba.clos, ba.rappro, ba.url, ba.code_banque, ba.code_guichet, ba.cle_rib, ba.bic, ba.iban_prefix as iban, ba.domiciliation, ba.proprio, ba.owner_address, ba.state_id, ba.fk_pays as country_id, ba.account_number, ba.accountancy_journal, ba.currency_code, ba.min_allowed, ba.min_desired, ba.comment, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_bank_account as ba LEFT JOIN llx_c_country as c ON ba.fk_pays = c.rowid LEFT JOIN llx_c_departements as d ON ba.state_id = d.rowid WHERE entity IN (1) AND ba.rowid  = 1
2017-05-05 14:50:29 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'bank_account' ORDER BY pos
2017-05-05 14:50:29 DEBUG   ::1             useLocalTax
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:50:29 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:50:29 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facturedet' ORDER BY pos
2017-05-05 14:50:29 DEBUG   ::1             Form::select_produits_list search product
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT  p.rowid, p.label, p.ref, p.description, p.barcode, p.fk_product_type, p.price, p.price_ttc, p.price_base_type, p.tva_tx, p.duration, p.stock, p.fk_price_expression FROM llx_product as p WHERE p.entity IN (1) AND p.tosell = 1 ORDER BY p.ref LIMIT 1000
2017-05-05 14:50:29 DEBUG   ::1             DolEditor::DolEditor htmlname=dp_desc width= height=100 toolbarname=dolibarr_details
2017-05-05 14:50:29 DEBUG   ::1             Form::load_cache_vatrates
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT DISTINCT t.code, t.taux, t.recuperableonly FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND t.active > 0 AND c.code IN ('ES') ORDER BY t.code ASC, t.taux ASC, t.recuperableonly ASC
2017-05-05 14:50:29 DEBUG   ::1             get_default_tva: seller use vat=1, seller country=ES, seller in cee=1, buyer country=ES, buyer in cee=1, idprod=0, idprodfournprice=0, SERVICE_ARE_ECOMMERCE_200238EC=
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT taux as vat_rate FROM llx_c_tva as t, llx_c_country as c WHERE t.active=1 AND t.fk_pays = c.rowid AND c.code='ES' ORDER BY t.taux DESC, t.recuperableonly ASC LIMIT 1
2017-05-05 14:50:29 DEBUG   ::1             get_product_vat_for_country: ret=21
2017-05-05 14:50:29 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:50:29 DEBUG   ::1             /core/lib/function2.lib.php::getListOfModels
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT nom as id, nom as lib, libelle as label, description as description FROM llx_document_model WHERE type = 'invoice' AND entity IN (0,1) ORDER BY description DESC
2017-05-05 14:50:29 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/(PROV7) types=files recursive=0 filter= excludefilter="(\\.meta|_preview\\.png)$"
2017-05-05 14:50:29 DEBUG   ::1             Facture::fetchObjectLink
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT rowid, fk_source, sourcetype, fk_target, targettype FROM llx_element_element WHERE (fk_source = '7' AND sourcetype = 'facture') OR (fk_target = '7' AND targettype = 'facture') ORDER BY sourcetype
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT s.rowid as socid, s.nom as name, s.client, c.rowid, c.ref, c.ref_client, c.total_ht FROM llx_societe as s, llx_commande as c WHERE c.fk_soc = s.rowid AND c.fk_soc = 3
2017-05-05 14:50:29 DEBUG   ::1             ActionComm::getActions
2017-05-05 14:50:29 DEBUG   ::1             sql=SELECT a.id FROM llx_actioncomm as a WHERE a.entity IN (1) AND a.fk_element = 7 AND a.elementtype = 'invoice'
2017-05-05 14:50:29 DEBUG   ::1             --- End access to /dolibarr/compta/facture.php
2017-05-05 14:50:42 DEBUG   ::1             This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:50:42 DEBUG   ::1             User::fetch
2017-05-05 14:50:42 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:50:42 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:50:42 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:50:42 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:50:42 DEBUG   ::1             User::getrights
2017-05-05 14:50:42 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:50:42 DEBUG   ::1             User::getrights
2017-05-05 14:50:42 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:50:42 DEBUG   ::1             --- Access to /dolibarr/fourn/ajax/getSupplierPrices.php
2017-05-05 14:50:42 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:50:42 DEBUG   ::1             ProductFournisseur::fetch id=1 ref= ref_ext=
2017-05-05 14:50:42 DEBUG   ::1             sql=SELECT rowid, ref, ref_ext, label, description, url, note, customcode, fk_country, price, price_ttc, price_min, price_min_ttc, price_base_type, cost_price, default_vat_code, tva_tx, recuperableonly as tva_npr, localtax1_tx, localtax2_tx, localtax1_type, localtax2_type, tosell, tobuy, fk_product_type, duration, seuil_stock_alerte, canvas, weight, weight_units, length, length_units, surface, surface_units, volume, volume_units, barcode, fk_barcode_type, finished, accountancy_code_buy, accountancy_code_sell, stock, pmp, datec, tms, import_key, entity, desiredstock, tobatch, fk_unit, fk_price_expression, price_autogen FROM llx_product WHERE rowid = 1
2017-05-05 14:50:42 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:50:42 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'product' ORDER BY pos
2017-05-05 14:50:42 DEBUG   ::1             ProductFournisseur::list_product_fournisseur_price
2017-05-05 14:50:42 DEBUG   ::1             sql=SELECT s.nom as supplier_name, s.rowid as fourn_id, pfp.rowid as product_fourn_pri_id, pfp.ref_fourn, pfp.fk_product as product_fourn_id, pfp.fk_supplier_price_expression, pfp.price, pfp.quantity, pfp.unitprice, pfp.remise_percent, pfp.remise, pfp.tva_tx, pfp.fk_availability, pfp.charges, pfp.unitcharges, pfp.info_bits, pfp.delivery_time_days, pfp.supplier_reputation FROM llx_product_fournisseur_price as pfp, llx_societe as s WHERE pfp.entity IN (1) AND pfp.fk_soc = s.rowid AND s.status=1 AND pfp.fk_product = 1 ORDER BY pfp.unitprice,s.nom,pfp.quantity,pfp.price
2017-05-05 14:50:42 DEBUG   ::1             Translate::loadCacheCurrencies
2017-05-05 14:50:42 DEBUG   ::1             sql=SELECT code_iso, label, unicode FROM llx_c_currencies WHERE active = 1 AND code_iso = 'EUR'
2017-05-05 14:50:42 DEBUG   ::1             --- End access to /dolibarr/fourn/ajax/getSupplierPrices.php
2017-05-05 14:50:54 DEBUG   ::1             This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:50:54 DEBUG   ::1             User::fetch
2017-05-05 14:50:54 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:50:54 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:50:54 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:50:54 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:50:54 DEBUG   ::1             User::getrights
2017-05-05 14:50:54 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:50:54 DEBUG   ::1             User::getrights
2017-05-05 14:50:54 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:50:54 DEBUG   ::1             --- Access to /dolibarr/compta/facture.php
2017-05-05 14:50:54 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:50:54 DEBUG   ::1             Menubase::menuLoad mymainmenu=accountancy myleftmenu=customers_bills type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:50:54 DEBUG   ::1             sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:50:54 DEBUG   ::1             Facture::fetch
2017-05-05 14:50:54 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:50:54 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:50:54 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:50:54 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:50:54 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:50:54 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:50:54 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facturedet' ORDER BY pos
2017-05-05 14:50:54 DEBUG   ::1             Facture::fetch
2017-05-05 14:50:54 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:50:54 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:50:54 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:50:54 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:50:54 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:50:54 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:50:54 DEBUG   ::1             Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:50:54 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:50:54 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:50:54 DEBUG   ::1             Product::fetch id=1 ref= ref_ext=
2017-05-05 14:50:54 DEBUG   ::1             sql=SELECT rowid, ref, ref_ext, label, description, url, note, customcode, fk_country, price, price_ttc, price_min, price_min_ttc, price_base_type, cost_price, default_vat_code, tva_tx, recuperableonly as tva_npr, localtax1_tx, localtax2_tx, localtax1_type, localtax2_type, tosell, tobuy, fk_product_type, duration, seuil_stock_alerte, canvas, weight, weight_units, length, length_units, surface, surface_units, volume, volume_units, barcode, fk_barcode_type, finished, accountancy_code_buy, accountancy_code_sell, stock, pmp, datec, tms, import_key, entity, desiredstock, tobatch, fk_unit, fk_price_expression, price_autogen FROM llx_product WHERE rowid = 1
2017-05-05 14:50:54 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:50:54 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'product' ORDER BY pos
2017-05-05 14:50:54 DEBUG   ::1             get_default_tva: seller use vat=1, seller country=ES, seller in cee=1, buyer country=ES, buyer in cee=1, idprod=1, idprodfournprice=0, SERVICE_ARE_ECOMMERCE_200238EC=
2017-05-05 14:50:54 DEBUG   ::1             Product::fetch id=1 ref= ref_ext=
2017-05-05 14:50:54 DEBUG   ::1             sql=SELECT rowid, ref, ref_ext, label, description, url, note, customcode, fk_country, price, price_ttc, price_min, price_min_ttc, price_base_type, cost_price, default_vat_code, tva_tx, recuperableonly as tva_npr, localtax1_tx, localtax2_tx, localtax1_type, localtax2_type, tosell, tobuy, fk_product_type, duration, seuil_stock_alerte, canvas, weight, weight_units, length, length_units, surface, surface_units, volume, volume_units, barcode, fk_barcode_type, finished, accountancy_code_buy, accountancy_code_sell, stock, pmp, datec, tms, import_key, entity, desiredstock, tobatch, fk_unit, fk_price_expression, price_autogen FROM llx_product WHERE rowid = 1
2017-05-05 14:50:54 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:50:54 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'product' ORDER BY pos
2017-05-05 14:50:54 DEBUG   ::1             get_product_vat_for_country: ret=0.000
2017-05-05 14:50:54 DEBUG   ::1             Product::fetch id=1 ref= ref_ext=
2017-05-05 14:50:54 DEBUG   ::1             sql=SELECT rowid, ref, ref_ext, label, description, url, note, customcode, fk_country, price, price_ttc, price_min, price_min_ttc, price_base_type, cost_price, default_vat_code, tva_tx, recuperableonly as tva_npr, localtax1_tx, localtax2_tx, localtax1_type, localtax2_type, tosell, tobuy, fk_product_type, duration, seuil_stock_alerte, canvas, weight, weight_units, length, length_units, surface, surface_units, volume, volume_units, barcode, fk_barcode_type, finished, accountancy_code_buy, accountancy_code_sell, stock, pmp, datec, tms, import_key, entity, desiredstock, tobatch, fk_unit, fk_price_expression, price_autogen FROM llx_product WHERE rowid = 1
2017-05-05 14:50:54 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:50:54 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'product' ORDER BY pos
2017-05-05 14:50:54 DEBUG   ::1             get_localtax tva=0.000 local=1 thirdparty_buyer id=3/country_code=ES thirdparty_seller id=0/country_code=ES thirdparty_seller localtax1_assuj=0  thirdparty_seller localtax2_assuj=1
2017-05-05 14:50:54 DEBUG   ::1             get_localtax tva=0.000 local=2 thirdparty_buyer id=3/country_code=ES thirdparty_seller id=0/country_code=ES thirdparty_seller localtax1_assuj=0  thirdparty_seller localtax2_assuj=1
2017-05-05 14:50:54 DEBUG   ::1             Facture::addline facid=7,desc=Clase de yoga (Pili),pu_ht=25.00000000,qty=1,txtva=0.000, txlocaltax1=0, txlocaltax2=0, fk_product=1,remise_percent=0,date_start=,date_end=,ventil=0,info_bits=0,fk_remise_except=,price_base_type=TTC,pu_ttc=25.00000000,type=1, fk_unit=
2017-05-05 14:50:54 DEBUG   ::1             BEGIN Transaction
2017-05-05 14:50:54 DEBUG   ::1              Product::fetch id=1 ref= ref_ext=
2017-05-05 14:50:54 DEBUG   ::1              sql=SELECT rowid, ref, ref_ext, label, description, url, note, customcode, fk_country, price, price_ttc, price_min, price_min_ttc, price_base_type, cost_price, default_vat_code, tva_tx, recuperableonly as tva_npr, localtax1_tx, localtax2_tx, localtax1_type, localtax2_type, tosell, tobuy, fk_product_type, duration, seuil_stock_alerte, canvas, weight, weight_units, length, length_units, surface, surface_units, volume, volume_units, barcode, fk_barcode_type, finished, accountancy_code_buy, accountancy_code_sell, stock, pmp, datec, tms, import_key, entity, desiredstock, tobatch, fk_unit, fk_price_expression, price_autogen FROM llx_product WHERE rowid = 1
2017-05-05 14:50:54 DEBUG   ::1              ExtraFields::fetch_name_optionals_label
2017-05-05 14:50:54 DEBUG   ::1              sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'product' ORDER BY pos
2017-05-05 14:50:54 DEBUG   ::1              getLocalTaxesFromRate vatrate=0 local=0
2017-05-05 14:50:54 DEBUG   ::1              sql=SELECT t.localtax1, t.localtax1_type, t.localtax2, t.localtax2_type, t.accountancy_code_sell, t.accountancy_code_buy FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.taux = 0 AND t.active = 1
2017-05-05 14:50:54 DEBUG   ::1              sql=SELECT t.localtax1, t.localtax2  FROM llx_c_tva as t inner join llx_c_country as c ON c.rowid=t.fk_pays WHERE c.code = 'ES' AND t.active = 1 AND t.taux=(  SELECT max(tt.taux) FROM llx_c_tva as tt inner join llx_c_country as c ON c.rowid=tt.fk_pays  WHERE c.code = 'ES' AND tt.active = 1  )
2017-05-05 14:50:54 DEBUG   ::1              sql=SELECT t.localtax1, t.localtax2  FROM llx_c_tva as t inner join llx_c_country as c ON c.rowid=t.fk_pays WHERE c.code = 'ES' AND t.active = 1 AND t.taux=(  SELECT max(tt.taux) FROM llx_c_tva as tt inner join llx_c_country as c ON c.rowid=tt.fk_pays  WHERE c.code = 'ES' AND tt.active = 1  )
2017-05-05 14:50:54 DEBUG   ::1              get_localtax tva=0 local=2 thirdparty_buyer id=3/country_code=ES thirdparty_seller id=0/country_code=ES thirdparty_seller localtax1_assuj=0  thirdparty_seller localtax2_assuj=1
2017-05-05 14:50:54 DEBUG   ::1              Price.lib::calcul_price_total qty=1 pu=25 remise_percent_ligne=0 txtva=0 uselocaltax1_rate=0 uselocaltax2_rate=0 remise_percent_global=0 price_base_type=TTC type=1 progress=100
2017-05-05 14:50:54 DEBUG   ::1              Price.lib::calcul_price_total MAIN_ROUNDING_RULE_TOT= pu=25 qty=1 price_base_type=TTC total_ht=25-total_vat=0-total_ttc=25
2017-05-05 14:50:54 DEBUG   ::1              Facture::line_max
2017-05-05 14:50:54 DEBUG   ::1              sql=SELECT max(rang) FROM llx_facturedet WHERE fk_facture = 7
2017-05-05 14:50:54 DEBUG   ::1              FactureLigne::insert rang=1
2017-05-05 14:50:54 DEBUG   ::1              Product::fetch id=1 ref= ref_ext=
2017-05-05 14:50:54 DEBUG   ::1              sql=SELECT rowid, ref, ref_ext, label, description, url, note, customcode, fk_country, price, price_ttc, price_min, price_min_ttc, price_base_type, cost_price, default_vat_code, tva_tx, recuperableonly as tva_npr, localtax1_tx, localtax2_tx, localtax1_type, localtax2_type, tosell, tobuy, fk_product_type, duration, seuil_stock_alerte, canvas, weight, weight_units, length, length_units, surface, surface_units, volume, volume_units, barcode, fk_barcode_type, finished, accountancy_code_buy, accountancy_code_sell, stock, pmp, datec, tms, import_key, entity, desiredstock, tobatch, fk_unit, fk_price_expression, price_autogen FROM llx_product WHERE rowid = 1
2017-05-05 14:50:54 DEBUG   ::1              ExtraFields::fetch_name_optionals_label
2017-05-05 14:50:54 DEBUG   ::1              sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'product' ORDER BY pos
2017-05-05 14:50:54 DEBUG   ::1              ProductFournisseur::find_min_price_product_fournisseur
2017-05-05 14:50:54 DEBUG   ::1              sql=SELECT s.nom as supplier_name, s.rowid as fourn_id, pfp.rowid as product_fourn_price_id, pfp.ref_fourn, pfp.price, pfp.quantity, pfp.unitprice, pfp.tva_tx, pfp.charges, pfp.unitcharges,  pfp.remise, pfp.remise_percent, pfp.fk_supplier_price_expression, pfp.delivery_time_days FROM llx_societe as s, llx_product_fournisseur_price as pfp WHERE s.entity IN (1) AND pfp.fk_product = 1 AND pfp.fk_soc = s.rowid AND s.status = 1
2017-05-05 14:50:54 DEBUG   ::1              CommonObject::isExistingObject
2017-05-05 14:50:54 DEBUG   ::1              sql=SELECT rowid, ref, ref_ext FROM llx_product WHERE entity IN (1) AND rowid = 1
2017-05-05 14:50:54 DEBUG   ::1               FactureLigne::insert
2017-05-05 14:50:54 DEBUG   ::1               sql=INSERT INTO llx_facturedet (fk_facture, fk_parent_line, label, description, qty, tva_tx, localtax1_tx, localtax2_tx, localtax1_type, localtax2_type, fk_product, product_type, remise_percent, subprice, fk_remise_except, date_start, date_end, fk_code_ventilation,  rang, special_code, fk_product_fournisseur_price, buy_price_ht, info_bits, total_ht, total_tva, total_ttc, total_localtax1, total_localtax2, situation_percent, fk_prev_id, fk_unit, fk_multicurrency, multicurrency_code, multicurrency_subprice, multicurrency_total_ht, multicurrency_total_tva, multicurrency_total_ttc) VALUES (7, null, null, 'Clase de yoga (Pili)', 1, 0, 0, 0, '3', '5', 1, 1, 0, 25, null, null, null, 0, 1, 0, null, 0, '0', 25, 0, 25, 0, 0, 100, null, NULL, 0, 'EUR', 25, 25, 0, 25)
2017-05-05 14:50:54 DEBUG   ::1               Interfaces::run_triggers action=LINEBILL_INSERT Triggers for file 'interface_20_modPaypal_PaypalWorkflow.class.php' need module to be enabled
2017-05-05 14:50:54 DEBUG   ::1               Interfaces::run_triggers action=LINEBILL_INSERT Launch runTrigger for file 'interface_20_all_Logevents.class.php'
2017-05-05 14:50:54 DEBUG   ::1               Interfaces::run_triggers action=LINEBILL_INSERT Launch runTrigger for file 'interface_20_modWorkflow_WorkflowManager.class.php'
2017-05-05 14:50:54 DEBUG   ::1               Interfaces::run_triggers action=LINEBILL_INSERT Launch runTrigger for file 'interface_50_modAgenda_ActionsAuto.class.php'
2017-05-05 14:50:54 DEBUG   ::1               Interfaces::run_triggers action=LINEBILL_INSERT Launch runTrigger for file 'interface_50_modLdap_Ldapsynchro.class.php'
2017-05-05 14:50:54 DEBUG   ::1               Interfaces::run_triggers action=LINEBILL_INSERT Launch runTrigger for file 'interface_50_modMailmanspip_Mailmanspipsynchro.class.php'
2017-05-05 14:50:54 DEBUG   ::1               Interfaces::run_triggers action=LINEBILL_INSERT Launch runTrigger for file 'interface_50_modNotification_Notification.class.php'
2017-05-05 14:50:54 DEBUG   ::1               Trigger 'Notification' for action 'LINEBILL_INSERT' launched by C:\dolibarr\www\dolibarr\htdocs\core\triggers\interface_50_modNotification_Notification.class.php. id=6
2017-05-05 14:50:54 DEBUG   ::1               Notify::send notifcode=LINEBILL_INSERT, object=6
2017-05-05 14:50:54 DEBUG   ::1              Facture::update_price
2017-05-05 14:50:54 DEBUG   ::1              sql=SELECT rowid, qty, subprice as up, remise_percent, total_ht, total_tva as total_tva, total_ttc, total_localtax1 as total_localtax1, total_localtax2 as total_localtax2, tva_tx as vatrate, localtax1_tx, localtax2_tx, localtax1_type, localtax2_type, info_bits, product_type, situation_percent, multicurrency_total_ht, multicurrency_total_tva, multicurrency_total_ttc FROM llx_facturedet WHERE fk_facture = 7 AND product_type <> 9 ORDER by rowid
2017-05-05 14:50:54 DEBUG   ::1              Price.lib::calcul_price_total qty=1 pu=25.00000000 remise_percent_ligne=0 txtva=0.000 uselocaltax1_rate=0 uselocaltax2_rate=0 remise_percent_global=0 price_base_type=HT type=1 progress=100
2017-05-05 14:50:54 DEBUG   ::1              Price.lib::calcul_price_total MAIN_ROUNDING_RULE_TOT= pu=25.00000000 qty=1 price_base_type=HT total_ht=25-total_vat=0-total_ttc=25
2017-05-05 14:50:54 DEBUG   ::1              Facture::update_price
2017-05-05 14:50:54 DEBUG   ::1              sql=UPDATE llx_facture SET total='25', tva='0', localtax1='0', localtax2='0', total_ttc='25', multicurrency_total_ht='25', multicurrency_total_tva='0', multicurrency_total_ttc='25' WHERE rowid = 7
2017-05-05 14:50:54 DEBUG   ::1             COMMIT Transaction
2017-05-05 14:50:54 DEBUG   ::1             Facture::fetch
2017-05-05 14:50:54 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:50:54 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:50:54 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:50:54 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT code, label, width, height, unit FROM llx_c_paper_format WHERE code = 'EUA4'
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:50:55 DEBUG   ::1             Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:50:55 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:50:55 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:50:55 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 2
2017-05-05 14:50:55 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 3
2017-05-05 14:50:55 DEBUG   ::1             functions.lib::dol_mkdir: dir=c:/dolibarr/dolibarr_documents/facture/(PROV7)
2017-05-05 14:50:55 DEBUG   ::1             functions.lib::dol_mkdir: Directory 'c:/dolibarr/dolibarr_documents/facture/(PROV7)' does not exists or is outside open_basedir PHP setting.
2017-05-05 14:50:55 DEBUG   ::1             functions.lib::dol_mkdir: Directory 'c:/dolibarr/dolibarr_documents/facture/(PROV7)' created
2017-05-05 14:50:55 DEBUG   ::1             Facture::getListOfPayments
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT pf.amount, pf.multicurrency_amount, p.fk_paiement, p.datep, p.num_paiement as num, t.code FROM llx_paiement_facture as pf, llx_paiement as p, llx_c_paiement as t WHERE pf.fk_facture = 7 AND pf.fk_paiement = p.rowid AND p.fk_paiement = t.id
2017-05-05 14:50:55 DEBUG   ::1             functions.lib::dol_mkdir: dir=c:/dolibarr/dolibarr_documents/admin/temp/
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 7 AND type < 2 AND fk_statut = 1 ORDER BY fk_statut DESC
2017-05-05 14:50:55 DEBUG   ::1             Facture::fetchObjectLink
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT rowid, fk_source, sourcetype, fk_target, targettype FROM llx_element_element WHERE (fk_source = '7' AND sourcetype = 'facture') OR (fk_target = '7' AND targettype = 'facture') ORDER BY sourcetype
2017-05-05 14:50:55 DEBUG   ::1             Company.lib::getState
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT rowid, code_departement as code, nom as label FROM llx_c_departements WHERE rowid=524
2017-05-05 14:50:55 DEBUG   ::1             Company.lib::getState
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT rowid, code_departement as code, nom as label FROM llx_c_departements WHERE rowid=524
2017-05-05 14:50:55 DEBUG   ::1             Facture::getIdContact
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT ec.fk_socpeople FROM llx_element_contact as ec, llx_socpeople as c, llx_c_type_contact as tc WHERE ec.element_id = 7 AND ec.fk_socpeople = c.rowid AND c.entity IN (1) AND ec.fk_c_type_contact = tc.rowid AND tc.element = 'facture' AND tc.source = 'external' AND tc.code = 'BILLING' AND tc.active = 1
2017-05-05 14:50:55 DEBUG   ::1             Product::fetch id=1 ref= ref_ext=
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT rowid, ref, ref_ext, label, description, url, note, customcode, fk_country, price, price_ttc, price_min, price_min_ttc, price_base_type, cost_price, default_vat_code, tva_tx, recuperableonly as tva_npr, localtax1_tx, localtax2_tx, localtax1_type, localtax2_type, tosell, tobuy, fk_product_type, duration, seuil_stock_alerte, canvas, weight, weight_units, length, length_units, surface, surface_units, volume, volume_units, barcode, fk_barcode_type, finished, accountancy_code_buy, accountancy_code_sell, stock, pmp, datec, tms, import_key, entity, desiredstock, tobatch, fk_unit, fk_price_expression, price_autogen FROM llx_product WHERE rowid = 1
2017-05-05 14:50:55 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'product' ORDER BY pos
2017-05-05 14:50:55 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 2
2017-05-05 14:50:55 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 3
2017-05-05 14:50:55 DEBUG   ::1             Company.lib::getFormeJuridiqueLabel
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT libelle FROM llx_c_forme_juridique WHERE code='415'
2017-05-05 14:50:55 DEBUG   ::1             Translate::loadCacheCurrencies
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT code_iso, label, unicode FROM llx_c_currencies WHERE active = 1 AND code_iso = 'EUR'
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:50:55 DEBUG   ::1             useLocalTax
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax1_type <> '0'
2017-05-05 14:50:55 DEBUG   ::1             useLocalTax
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:50:55 DEBUG   ::1             Facture::fetch
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:50:55 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:50:55 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:50:55 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:50:55 DEBUG   ::1             Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:50:55 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:50:55 DEBUG   ::1             Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:50:55 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:50:55 DEBUG   ::1             useRevenueStamp
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT COUNT(*) as nb FROM llx_c_revenuestamp as r, llx_c_country as c WHERE r.fk_pays = c.rowid AND c.code = 'ES' AND r.active = 1
2017-05-05 14:50:55 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:50:55 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 2
2017-05-05 14:50:55 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 3
2017-05-05 14:50:55 DEBUG   ::1             DiscountAbsolute::getAvailableDiscounts
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT SUM(rc.amount_ttc) as amount FROM llx_societe_remise_except as rc WHERE (rc.fk_facture IS NULL AND rc.fk_facture_line IS NULL) AND rc.fk_soc = 3 AND (fk_facture_source IS NULL OR (fk_facture_source IS NOT NULL AND description LIKE '(DEPOSIT)%'))
2017-05-05 14:50:55 DEBUG   ::1             DiscountAbsolute::getAvailableDiscounts
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT SUM(rc.amount_ttc) as amount FROM llx_societe_remise_except as rc WHERE (rc.fk_facture IS NULL AND rc.fk_facture_line IS NULL) AND rc.fk_soc = 3 AND (fk_facture_source IS NOT NULL AND description NOT LIKE '(DEPOSIT)%')
2017-05-05 14:50:55 DEBUG   ::1             User::fetch
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.rowid = 1
2017-05-05 14:50:55 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 7 AND type < 2 ORDER BY fk_statut DESC
2017-05-05 14:50:55 DEBUG   ::1             Facture::liste_contact
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT ec.rowid, ec.statut as statuslink, ec.fk_socpeople as id, ec.fk_c_type_contact, '-1' as socid, t.statut as statuscontact, t.civility as civility, t.lastname as lastname, t.firstname, t.email, tc.source, tc.element, tc.code, tc.libelle FROM llx_c_type_contact tc, llx_element_contact ec LEFT JOIN llx_user t on ec.fk_socpeople = t.rowid WHERE ec.element_id =7 AND ec.fk_c_type_contact=tc.rowid AND tc.element='facture' AND tc.source = 'internal' AND tc.active=1 ORDER BY t.lastname ASC
2017-05-05 14:50:55 DEBUG   ::1             Facture::liste_contact
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT ec.rowid, ec.statut as statuslink, ec.fk_socpeople as id, ec.fk_c_type_contact, t.fk_soc as socid, t.statut as statuscontact, t.civility as civility, t.lastname as lastname, t.firstname, t.email, tc.source, tc.element, tc.code, tc.libelle FROM llx_c_type_contact tc, llx_element_contact ec LEFT JOIN llx_socpeople t on ec.fk_socpeople = t.rowid WHERE ec.element_id =7 AND ec.fk_c_type_contact=tc.rowid AND tc.element='facture' AND tc.source = 'external' AND tc.active=1 ORDER BY t.lastname ASC
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT COUNT(pfd.rowid) as nb FROM llx_prelevement_facture_demande as pfd WHERE pfd.fk_facture = 7
2017-05-05 14:50:55 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/(PROV7) types=files recursive=0 filter= excludefilter="(\\.meta|_preview\\.png)$"
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT COUNT(rowid) as nb FROM llx_links WHERE objecttype = 'facture' AND objectid = 7 AND entity = 1
2017-05-05 14:50:55 DEBUG   ::1             DiscountAbsolute::fetch
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT sr.rowid, sr.fk_soc, sr.fk_user, sr.amount_ht, sr.amount_tva, sr.amount_ttc, sr.tva_tx, sr.fk_facture_line, sr.fk_facture, sr.fk_facture_source, sr.description, sr.datec, f.facnumber as ref_facture_source FROM llx_societe_remise_except as sr LEFT JOIN llx_facture as f ON sr.fk_facture_source = f.rowid WHERE sr.fk_facture_source=7
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT MAX(te.facnumber) FROM llx_facture as te WHERE te.facnumber < '(PROV7)' AND te.entity IN (1)
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT MIN(te.facnumber) FROM llx_facture as te WHERE te.facnumber > '(PROV7)' AND te.entity IN (1)
2017-05-05 14:50:55 DEBUG   ::1             get_OutstandingBill
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT rowid, total_ttc FROM llx_facture as f WHERE fk_soc = 3 AND paye = 0 AND fk_statut <> 0 AND fk_statut <> 3 AND fk_statut <> 2
2017-05-05 14:50:55 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 3
2017-05-05 14:50:55 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 2
2017-05-05 14:50:55 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 3
2017-05-05 14:50:55 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 4
2017-05-05 14:50:55 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 4 AND f.type = 2
2017-05-05 14:50:55 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 4 AND f.type = 3
2017-05-05 14:50:55 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 6
2017-05-05 14:50:55 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 2
2017-05-05 14:50:55 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 3
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 7 AND type = 2
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT p.datep as dp, p.ref, p.num_paiement, p.rowid, p.fk_bank, c.code as payment_code, c.libelle as payment_label, pf.amount, ba.rowid as baid, ba.ref as baref, ba.label FROM llx_c_paiement as c, llx_paiement_facture as pf, llx_paiement as p LEFT JOIN llx_bank as b ON p.fk_bank = b.rowid LEFT JOIN llx_bank_account as ba ON b.fk_account = ba.rowid WHERE pf.fk_facture = 7 AND p.fk_paiement = c.id AND pf.fk_paiement = p.rowid ORDER BY p.datep, p.tms
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT re.rowid, re.amount_ht, re.amount_tva, re.amount_ttc, re.description, re.fk_facture_source FROM llx_societe_remise_except as re WHERE fk_facture = 7
2017-05-05 14:50:55 DEBUG   ::1             Form::load_cache_conditions_paiements
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT rowid, code, libelle as label FROM llx_c_payment_term WHERE active > 0 ORDER BY sortorder
2017-05-05 14:50:55 DEBUG   ::1             Form::load_cache_types_paiements
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT id, code, libelle as label, type, active FROM llx_c_paiement
2017-05-05 14:50:55 DEBUG   ::1             Translate::getLabelFromKey
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT libelle as label FROM llx_c_paiement WHERE code = 'LCR'
2017-05-05 14:50:55 DEBUG   ::1             Account::fetch
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT ba.rowid, ba.ref, ba.label, ba.bank, ba.number, ba.courant, ba.clos, ba.rappro, ba.url, ba.code_banque, ba.code_guichet, ba.cle_rib, ba.bic, ba.iban_prefix as iban, ba.domiciliation, ba.proprio, ba.owner_address, ba.state_id, ba.fk_pays as country_id, ba.account_number, ba.accountancy_journal, ba.currency_code, ba.min_allowed, ba.min_desired, ba.comment, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_bank_account as ba LEFT JOIN llx_c_country as c ON ba.fk_pays = c.rowid LEFT JOIN llx_c_departements as d ON ba.state_id = d.rowid WHERE entity IN (1) AND ba.rowid  = 1
2017-05-05 14:50:55 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'bank_account' ORDER BY pos
2017-05-05 14:50:55 DEBUG   ::1             useLocalTax
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:50:55 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:50:55 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facturedet' ORDER BY pos
2017-05-05 14:50:55 DEBUG   ::1             Product::fetch id=1 ref= ref_ext=
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT rowid, ref, ref_ext, label, description, url, note, customcode, fk_country, price, price_ttc, price_min, price_min_ttc, price_base_type, cost_price, default_vat_code, tva_tx, recuperableonly as tva_npr, localtax1_tx, localtax2_tx, localtax1_type, localtax2_type, tosell, tobuy, fk_product_type, duration, seuil_stock_alerte, canvas, weight, weight_units, length, length_units, surface, surface_units, volume, volume_units, barcode, fk_barcode_type, finished, accountancy_code_buy, accountancy_code_sell, stock, pmp, datec, tms, import_key, entity, desiredstock, tobatch, fk_unit, fk_price_expression, price_autogen FROM llx_product WHERE rowid = 1
2017-05-05 14:50:55 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'product' ORDER BY pos
2017-05-05 14:50:55 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facturedet' ORDER BY pos
2017-05-05 14:50:55 DEBUG   ::1             Form::select_produits_list search product
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT  p.rowid, p.label, p.ref, p.description, p.barcode, p.fk_product_type, p.price, p.price_ttc, p.price_base_type, p.tva_tx, p.duration, p.stock, p.fk_price_expression FROM llx_product as p WHERE p.entity IN (1) AND p.tosell = 1 ORDER BY p.ref LIMIT 1000
2017-05-05 14:50:55 DEBUG   ::1             DolEditor::DolEditor htmlname=dp_desc width= height=100 toolbarname=dolibarr_details
2017-05-05 14:50:55 DEBUG   ::1             Form::load_cache_vatrates
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT DISTINCT t.code, t.taux, t.recuperableonly FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND t.active > 0 AND c.code IN ('ES') ORDER BY t.code ASC, t.taux ASC, t.recuperableonly ASC
2017-05-05 14:50:55 DEBUG   ::1             get_default_tva: seller use vat=1, seller country=ES, seller in cee=1, buyer country=ES, buyer in cee=1, idprod=0, idprodfournprice=0, SERVICE_ARE_ECOMMERCE_200238EC=
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT taux as vat_rate FROM llx_c_tva as t, llx_c_country as c WHERE t.active=1 AND t.fk_pays = c.rowid AND c.code='ES' ORDER BY t.taux DESC, t.recuperableonly ASC LIMIT 1
2017-05-05 14:50:55 DEBUG   ::1             get_product_vat_for_country: ret=21
2017-05-05 14:50:55 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:50:55 DEBUG   ::1             /core/lib/function2.lib.php::getListOfModels
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT nom as id, nom as lib, libelle as label, description as description FROM llx_document_model WHERE type = 'invoice' AND entity IN (0,1) ORDER BY description DESC
2017-05-05 14:50:55 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/(PROV7) types=files recursive=0 filter= excludefilter="(\\.meta|_preview\\.png)$"
2017-05-05 14:50:55 DEBUG   ::1             Facture::fetchObjectLink
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT rowid, fk_source, sourcetype, fk_target, targettype FROM llx_element_element WHERE (fk_source = '7' AND sourcetype = 'facture') OR (fk_target = '7' AND targettype = 'facture') ORDER BY sourcetype
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT s.rowid as socid, s.nom as name, s.client, c.rowid, c.ref, c.ref_client, c.total_ht FROM llx_societe as s, llx_commande as c WHERE c.fk_soc = s.rowid AND c.fk_soc = 3
2017-05-05 14:50:55 DEBUG   ::1             ActionComm::getActions
2017-05-05 14:50:55 DEBUG   ::1             sql=SELECT a.id FROM llx_actioncomm as a WHERE a.entity IN (1) AND a.fk_element = 7 AND a.elementtype = 'invoice'
2017-05-05 14:50:55 DEBUG   ::1             --- End access to /dolibarr/compta/facture.php
2017-05-05 14:51:50 DEBUG   ::1             This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:51:50 DEBUG   ::1             User::fetch
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:51:50 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:51:50 DEBUG   ::1             User::getrights
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:51:50 DEBUG   ::1             User::getrights
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:51:50 DEBUG   ::1             --- Access to /dolibarr/compta/facture.php
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:51:50 DEBUG   ::1             Menubase::menuLoad mymainmenu=accountancy myleftmenu=customers_bills type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:51:50 DEBUG   ::1             Facture::fetch
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:51:50 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:51:50 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:51:50 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facturedet' ORDER BY pos
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:51:50 DEBUG   ::1             useLocalTax
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax1_type <> '0'
2017-05-05 14:51:50 DEBUG   ::1             useLocalTax
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:51:50 DEBUG   ::1             Facture::fetch
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:51:50 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:51:50 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:51:50 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:51:50 DEBUG   ::1             Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:51:50 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:51:50 DEBUG   ::1             Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:51:50 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:51:50 DEBUG   ::1             useRevenueStamp
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT COUNT(*) as nb FROM llx_c_revenuestamp as r, llx_c_country as c WHERE r.fk_pays = c.rowid AND c.code = 'ES' AND r.active = 1
2017-05-05 14:51:50 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:51:50 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 2
2017-05-05 14:51:50 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 3
2017-05-05 14:51:50 DEBUG   ::1             DiscountAbsolute::getAvailableDiscounts
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT SUM(rc.amount_ttc) as amount FROM llx_societe_remise_except as rc WHERE (rc.fk_facture IS NULL AND rc.fk_facture_line IS NULL) AND rc.fk_soc = 3 AND (fk_facture_source IS NULL OR (fk_facture_source IS NOT NULL AND description LIKE '(DEPOSIT)%'))
2017-05-05 14:51:50 DEBUG   ::1             DiscountAbsolute::getAvailableDiscounts
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT SUM(rc.amount_ttc) as amount FROM llx_societe_remise_except as rc WHERE (rc.fk_facture IS NULL AND rc.fk_facture_line IS NULL) AND rc.fk_soc = 3 AND (fk_facture_source IS NOT NULL AND description NOT LIKE '(DEPOSIT)%')
2017-05-05 14:51:50 DEBUG   ::1             User::fetch
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.rowid = 1
2017-05-05 14:51:50 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 7 AND type < 2 ORDER BY fk_statut DESC
2017-05-05 14:51:50 DEBUG   ::1             Facture::liste_contact
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT ec.rowid, ec.statut as statuslink, ec.fk_socpeople as id, ec.fk_c_type_contact, '-1' as socid, t.statut as statuscontact, t.civility as civility, t.lastname as lastname, t.firstname, t.email, tc.source, tc.element, tc.code, tc.libelle FROM llx_c_type_contact tc, llx_element_contact ec LEFT JOIN llx_user t on ec.fk_socpeople = t.rowid WHERE ec.element_id =7 AND ec.fk_c_type_contact=tc.rowid AND tc.element='facture' AND tc.source = 'internal' AND tc.active=1 ORDER BY t.lastname ASC
2017-05-05 14:51:50 DEBUG   ::1             Facture::liste_contact
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT ec.rowid, ec.statut as statuslink, ec.fk_socpeople as id, ec.fk_c_type_contact, t.fk_soc as socid, t.statut as statuscontact, t.civility as civility, t.lastname as lastname, t.firstname, t.email, tc.source, tc.element, tc.code, tc.libelle FROM llx_c_type_contact tc, llx_element_contact ec LEFT JOIN llx_socpeople t on ec.fk_socpeople = t.rowid WHERE ec.element_id =7 AND ec.fk_c_type_contact=tc.rowid AND tc.element='facture' AND tc.source = 'external' AND tc.active=1 ORDER BY t.lastname ASC
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT COUNT(pfd.rowid) as nb FROM llx_prelevement_facture_demande as pfd WHERE pfd.fk_facture = 7
2017-05-05 14:51:50 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/(PROV7) types=files recursive=0 filter= excludefilter="(\\.meta|_preview\\.png)$"
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT COUNT(rowid) as nb FROM llx_links WHERE objecttype = 'facture' AND objectid = 7 AND entity = 1
2017-05-05 14:51:50 DEBUG   ::1             DiscountAbsolute::fetch
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT sr.rowid, sr.fk_soc, sr.fk_user, sr.amount_ht, sr.amount_tva, sr.amount_ttc, sr.tva_tx, sr.fk_facture_line, sr.fk_facture, sr.fk_facture_source, sr.description, sr.datec, f.facnumber as ref_facture_source FROM llx_societe_remise_except as sr LEFT JOIN llx_facture as f ON sr.fk_facture_source = f.rowid WHERE sr.fk_facture_source=7
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT MAX(te.facnumber) FROM llx_facture as te WHERE te.facnumber < '(PROV7)' AND te.entity IN (1)
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT MIN(te.facnumber) FROM llx_facture as te WHERE te.facnumber > '(PROV7)' AND te.entity IN (1)
2017-05-05 14:51:50 DEBUG   ::1             get_OutstandingBill
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT rowid, total_ttc FROM llx_facture as f WHERE fk_soc = 3 AND paye = 0 AND fk_statut <> 0 AND fk_statut <> 3 AND fk_statut <> 2
2017-05-05 14:51:50 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 3
2017-05-05 14:51:50 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 2
2017-05-05 14:51:50 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 3
2017-05-05 14:51:50 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 4
2017-05-05 14:51:50 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 4 AND f.type = 2
2017-05-05 14:51:50 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 4 AND f.type = 3
2017-05-05 14:51:50 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 6
2017-05-05 14:51:50 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 2
2017-05-05 14:51:50 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 3
2017-05-05 14:51:50 DEBUG   ::1             Translate::loadCacheCurrencies
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT code_iso, label, unicode FROM llx_c_currencies WHERE active = 1 AND code_iso = 'EUR'
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 7 AND type = 2
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT p.datep as dp, p.ref, p.num_paiement, p.rowid, p.fk_bank, c.code as payment_code, c.libelle as payment_label, pf.amount, ba.rowid as baid, ba.ref as baref, ba.label FROM llx_c_paiement as c, llx_paiement_facture as pf, llx_paiement as p LEFT JOIN llx_bank as b ON p.fk_bank = b.rowid LEFT JOIN llx_bank_account as ba ON b.fk_account = ba.rowid WHERE pf.fk_facture = 7 AND p.fk_paiement = c.id AND pf.fk_paiement = p.rowid ORDER BY p.datep, p.tms
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT re.rowid, re.amount_ht, re.amount_tva, re.amount_ttc, re.description, re.fk_facture_source FROM llx_societe_remise_except as re WHERE fk_facture = 7
2017-05-05 14:51:50 DEBUG   ::1             Form::load_cache_conditions_paiements
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT rowid, code, libelle as label FROM llx_c_payment_term WHERE active > 0 ORDER BY sortorder
2017-05-05 14:51:50 DEBUG   ::1             Form::load_cache_types_paiements
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT id, code, libelle as label, type, active FROM llx_c_paiement
2017-05-05 14:51:50 DEBUG   ::1             Translate::getLabelFromKey
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT libelle as label FROM llx_c_paiement WHERE code = 'LCR'
2017-05-05 14:51:50 DEBUG   ::1             Account::fetch
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT ba.rowid, ba.ref, ba.label, ba.bank, ba.number, ba.courant, ba.clos, ba.rappro, ba.url, ba.code_banque, ba.code_guichet, ba.cle_rib, ba.bic, ba.iban_prefix as iban, ba.domiciliation, ba.proprio, ba.owner_address, ba.state_id, ba.fk_pays as country_id, ba.account_number, ba.accountancy_journal, ba.currency_code, ba.min_allowed, ba.min_desired, ba.comment, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_bank_account as ba LEFT JOIN llx_c_country as c ON ba.fk_pays = c.rowid LEFT JOIN llx_c_departements as d ON ba.state_id = d.rowid WHERE entity IN (1) AND ba.rowid  = 1
2017-05-05 14:51:50 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'bank_account' ORDER BY pos
2017-05-05 14:51:50 DEBUG   ::1             useLocalTax
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:51:50 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:51:50 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facturedet' ORDER BY pos
2017-05-05 14:51:50 DEBUG   ::1             Product::fetch id=1 ref= ref_ext=
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT rowid, ref, ref_ext, label, description, url, note, customcode, fk_country, price, price_ttc, price_min, price_min_ttc, price_base_type, cost_price, default_vat_code, tva_tx, recuperableonly as tva_npr, localtax1_tx, localtax2_tx, localtax1_type, localtax2_type, tosell, tobuy, fk_product_type, duration, seuil_stock_alerte, canvas, weight, weight_units, length, length_units, surface, surface_units, volume, volume_units, barcode, fk_barcode_type, finished, accountancy_code_buy, accountancy_code_sell, stock, pmp, datec, tms, import_key, entity, desiredstock, tobatch, fk_unit, fk_price_expression, price_autogen FROM llx_product WHERE rowid = 1
2017-05-05 14:51:50 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'product' ORDER BY pos
2017-05-05 14:51:50 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facturedet' ORDER BY pos
2017-05-05 14:51:50 DEBUG   ::1             Form::select_produits_list search product
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT  p.rowid, p.label, p.ref, p.description, p.barcode, p.fk_product_type, p.price, p.price_ttc, p.price_base_type, p.tva_tx, p.duration, p.stock, p.fk_price_expression FROM llx_product as p WHERE p.entity IN (1) AND p.tosell = 1 ORDER BY p.ref LIMIT 1000
2017-05-05 14:51:50 DEBUG   ::1             DolEditor::DolEditor htmlname=dp_desc width= height=100 toolbarname=dolibarr_details
2017-05-05 14:51:50 DEBUG   ::1             Form::load_cache_vatrates
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT DISTINCT t.code, t.taux, t.recuperableonly FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND t.active > 0 AND c.code IN ('ES') ORDER BY t.code ASC, t.taux ASC, t.recuperableonly ASC
2017-05-05 14:51:50 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:51:50 DEBUG   ::1             /core/lib/function2.lib.php::getListOfModels
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT nom as id, nom as lib, libelle as label, description as description FROM llx_document_model WHERE type = 'invoice' AND entity IN (0,1) ORDER BY description DESC
2017-05-05 14:51:50 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/(PROV7) types=files recursive=0 filter= excludefilter="(\\.meta|_preview\\.png)$"
2017-05-05 14:51:50 DEBUG   ::1             Facture::fetchObjectLink
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT rowid, fk_source, sourcetype, fk_target, targettype FROM llx_element_element WHERE (fk_source = '7' AND sourcetype = 'facture') OR (fk_target = '7' AND targettype = 'facture') ORDER BY sourcetype
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT s.rowid as socid, s.nom as name, s.client, c.rowid, c.ref, c.ref_client, c.total_ht FROM llx_societe as s, llx_commande as c WHERE c.fk_soc = s.rowid AND c.fk_soc = 3
2017-05-05 14:51:50 DEBUG   ::1             ActionComm::getActions
2017-05-05 14:51:50 DEBUG   ::1             sql=SELECT a.id FROM llx_actioncomm as a WHERE a.entity IN (1) AND a.fk_element = 7 AND a.elementtype = 'invoice'
2017-05-05 14:51:50 DEBUG   ::1             --- End access to /dolibarr/compta/facture.php
2017-05-05 14:51:59 DEBUG   ::1             This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:51:59 DEBUG   ::1             User::fetch
2017-05-05 14:51:59 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:51:59 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:51:59 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:51:59 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:51:59 DEBUG   ::1             User::getrights
2017-05-05 14:51:59 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:51:59 DEBUG   ::1             User::getrights
2017-05-05 14:51:59 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:51:59 DEBUG   ::1             --- Access to /dolibarr/compta/facture.php
2017-05-05 14:51:59 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:51:59 DEBUG   ::1             Menubase::menuLoad mymainmenu=accountancy myleftmenu=customers_bills type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:51:59 DEBUG   ::1             sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:51:59 DEBUG   ::1             Facture::fetch
2017-05-05 14:51:59 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:51:59 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:51:59 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:51:59 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:51:59 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:51:59 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:51:59 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facturedet' ORDER BY pos
2017-05-05 14:51:59 DEBUG   ::1             Facture::fetch
2017-05-05 14:51:59 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:51:59 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:51:59 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:51:59 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:51:59 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:51:59 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:51:59 DEBUG   ::1             Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:51:59 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:51:59 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:51:59 DEBUG   ::1             get_localtax tva=21 local=1 thirdparty_buyer id=3/country_code=ES thirdparty_seller id=0/country_code=ES thirdparty_seller localtax1_assuj=0  thirdparty_seller localtax2_assuj=1
2017-05-05 14:51:59 DEBUG   ::1             get_localtax tva=21 local=2 thirdparty_buyer id=3/country_code=ES thirdparty_seller id=0/country_code=ES thirdparty_seller localtax1_assuj=0  thirdparty_seller localtax2_assuj=1
2017-05-05 14:51:59 DEBUG   ::1             Facture::addline facid=7,desc=baloncesto,pu_ht=20,qty=1,txtva=21, txlocaltax1=0, txlocaltax2=0, fk_product=0,remise_percent=0,date_start=,date_end=,ventil=0,info_bits=0,fk_remise_except=,price_base_type=HT,pu_ttc=0,type=1, fk_unit=
2017-05-05 14:51:59 DEBUG   ::1             BEGIN Transaction
2017-05-05 14:51:59 DEBUG   ::1              getLocalTaxesFromRate vatrate=21 local=0
2017-05-05 14:51:59 DEBUG   ::1              sql=SELECT t.localtax1, t.localtax1_type, t.localtax2, t.localtax2_type, t.accountancy_code_sell, t.accountancy_code_buy FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.taux = 21 AND t.active = 1
2017-05-05 14:51:59 DEBUG   ::1              sql=SELECT t.localtax1, t.localtax2  FROM llx_c_tva as t inner join llx_c_country as c ON c.rowid=t.fk_pays WHERE c.code = 'ES' AND t.active = 1 AND t.taux=(  SELECT max(tt.taux) FROM llx_c_tva as tt inner join llx_c_country as c ON c.rowid=tt.fk_pays  WHERE c.code = 'ES' AND tt.active = 1  )
2017-05-05 14:51:59 DEBUG   ::1              sql=SELECT t.localtax1, t.localtax2  FROM llx_c_tva as t inner join llx_c_country as c ON c.rowid=t.fk_pays WHERE c.code = 'ES' AND t.active = 1 AND t.taux=(  SELECT max(tt.taux) FROM llx_c_tva as tt inner join llx_c_country as c ON c.rowid=tt.fk_pays  WHERE c.code = 'ES' AND tt.active = 1  )
2017-05-05 14:51:59 DEBUG   ::1              get_localtax tva=21 local=2 thirdparty_buyer id=3/country_code=ES thirdparty_seller id=0/country_code=ES thirdparty_seller localtax1_assuj=0  thirdparty_seller localtax2_assuj=1
2017-05-05 14:51:59 DEBUG   ::1              Price.lib::calcul_price_total qty=1 pu=20 remise_percent_ligne=0 txtva=21 uselocaltax1_rate=0 uselocaltax2_rate=0 remise_percent_global=0 price_base_type=HT type=1 progress=100
2017-05-05 14:51:59 DEBUG   ::1              Price.lib::calcul_price_total MAIN_ROUNDING_RULE_TOT= pu=20 qty=1 price_base_type=HT total_ht=20-total_vat=4.2-total_ttc=24.2
2017-05-05 14:51:59 DEBUG   ::1              Facture::line_max
2017-05-05 14:51:59 DEBUG   ::1              sql=SELECT max(rang) FROM llx_facturedet WHERE fk_facture = 7
2017-05-05 14:51:59 DEBUG   ::1              FactureLigne::insert rang=2
2017-05-05 14:51:59 DEBUG   ::1               FactureLigne::insert
2017-05-05 14:51:59 DEBUG   ::1               sql=INSERT INTO llx_facturedet (fk_facture, fk_parent_line, label, description, qty, tva_tx, localtax1_tx, localtax2_tx, localtax1_type, localtax2_type, fk_product, product_type, remise_percent, subprice, fk_remise_except, date_start, date_end, fk_code_ventilation,  rang, special_code, fk_product_fournisseur_price, buy_price_ht, info_bits, total_ht, total_tva, total_ttc, total_localtax1, total_localtax2, situation_percent, fk_prev_id, fk_unit, fk_multicurrency, multicurrency_code, multicurrency_subprice, multicurrency_total_ht, multicurrency_total_tva, multicurrency_total_ttc) VALUES (7, null, null, 'baloncesto', 1, 21, 0, 0, '3', '5', null, 1, 0, 20, null, null, null, 0, 2, 0, null, 20, '0', 20, 4.2, 24.2, 0, 0, 100, null, NULL, 0, 'EUR', 20, 20, 4.2, 24.2)
2017-05-05 14:51:59 DEBUG   ::1               Interfaces::run_triggers action=LINEBILL_INSERT Triggers for file 'interface_20_modPaypal_PaypalWorkflow.class.php' need module to be enabled
2017-05-05 14:51:59 DEBUG   ::1               Interfaces::run_triggers action=LINEBILL_INSERT Launch runTrigger for file 'interface_20_all_Logevents.class.php'
2017-05-05 14:51:59 DEBUG   ::1               Interfaces::run_triggers action=LINEBILL_INSERT Launch runTrigger for file 'interface_20_modWorkflow_WorkflowManager.class.php'
2017-05-05 14:51:59 DEBUG   ::1               Interfaces::run_triggers action=LINEBILL_INSERT Launch runTrigger for file 'interface_50_modAgenda_ActionsAuto.class.php'
2017-05-05 14:51:59 DEBUG   ::1               Interfaces::run_triggers action=LINEBILL_INSERT Launch runTrigger for file 'interface_50_modLdap_Ldapsynchro.class.php'
2017-05-05 14:51:59 DEBUG   ::1               Interfaces::run_triggers action=LINEBILL_INSERT Launch runTrigger for file 'interface_50_modMailmanspip_Mailmanspipsynchro.class.php'
2017-05-05 14:51:59 DEBUG   ::1               Interfaces::run_triggers action=LINEBILL_INSERT Launch runTrigger for file 'interface_50_modNotification_Notification.class.php'
2017-05-05 14:51:59 DEBUG   ::1               Trigger 'Notification' for action 'LINEBILL_INSERT' launched by C:\dolibarr\www\dolibarr\htdocs\core\triggers\interface_50_modNotification_Notification.class.php. id=7
2017-05-05 14:51:59 DEBUG   ::1               Notify::send notifcode=LINEBILL_INSERT, object=7
2017-05-05 14:51:59 DEBUG   ::1              Facture::update_price
2017-05-05 14:51:59 DEBUG   ::1              sql=SELECT rowid, qty, subprice as up, remise_percent, total_ht, total_tva as total_tva, total_ttc, total_localtax1 as total_localtax1, total_localtax2 as total_localtax2, tva_tx as vatrate, localtax1_tx, localtax2_tx, localtax1_type, localtax2_type, info_bits, product_type, situation_percent, multicurrency_total_ht, multicurrency_total_tva, multicurrency_total_ttc FROM llx_facturedet WHERE fk_facture = 7 AND product_type <> 9 ORDER by rowid
2017-05-05 14:51:59 DEBUG   ::1              Price.lib::calcul_price_total qty=1 pu=25.00000000 remise_percent_ligne=0 txtva=0.000 uselocaltax1_rate=0 uselocaltax2_rate=0 remise_percent_global=0 price_base_type=HT type=1 progress=100
2017-05-05 14:51:59 DEBUG   ::1              Price.lib::calcul_price_total MAIN_ROUNDING_RULE_TOT= pu=25.00000000 qty=1 price_base_type=HT total_ht=25-total_vat=0-total_ttc=25
2017-05-05 14:51:59 DEBUG   ::1              Price.lib::calcul_price_total qty=1 pu=20.00000000 remise_percent_ligne=0 txtva=21.000 uselocaltax1_rate=0 uselocaltax2_rate=0 remise_percent_global=0 price_base_type=HT type=1 progress=100
2017-05-05 14:51:59 DEBUG   ::1              Price.lib::calcul_price_total MAIN_ROUNDING_RULE_TOT= pu=20.00000000 qty=1 price_base_type=HT total_ht=20-total_vat=4.2-total_ttc=24.2
2017-05-05 14:51:59 DEBUG   ::1              Facture::update_price
2017-05-05 14:51:59 DEBUG   ::1              sql=UPDATE llx_facture SET total='45', tva='4.2', localtax1='0', localtax2='0', total_ttc='49.2', multicurrency_total_ht='45', multicurrency_total_tva='4.2', multicurrency_total_ttc='49.2' WHERE rowid = 7
2017-05-05 14:51:59 DEBUG   ::1             COMMIT Transaction
2017-05-05 14:51:59 DEBUG   ::1             Facture::fetch
2017-05-05 14:51:59 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:51:59 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:51:59 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:51:59 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:51:59 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:51:59 DEBUG   ::1             sql=SELECT code, label, width, height, unit FROM llx_c_paper_format WHERE code = 'EUA4'
2017-05-05 14:51:59 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:51:59 DEBUG   ::1             Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:51:59 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:51:59 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:51:59 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:51:59 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:51:59 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:51:59 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 2
2017-05-05 14:51:59 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:51:59 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 3
2017-05-05 14:51:59 DEBUG   ::1             Facture::getListOfPayments
2017-05-05 14:51:59 DEBUG   ::1             sql=SELECT pf.amount, pf.multicurrency_amount, p.fk_paiement, p.datep, p.num_paiement as num, t.code FROM llx_paiement_facture as pf, llx_paiement as p, llx_c_paiement as t WHERE pf.fk_facture = 7 AND pf.fk_paiement = p.rowid AND p.fk_paiement = t.id
2017-05-05 14:51:59 DEBUG   ::1             functions.lib::dol_mkdir: dir=c:/dolibarr/dolibarr_documents/admin/temp/
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 7 AND type < 2 AND fk_statut = 1 ORDER BY fk_statut DESC
2017-05-05 14:52:00 DEBUG   ::1             Facture::fetchObjectLink
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT rowid, fk_source, sourcetype, fk_target, targettype FROM llx_element_element WHERE (fk_source = '7' AND sourcetype = 'facture') OR (fk_target = '7' AND targettype = 'facture') ORDER BY sourcetype
2017-05-05 14:52:00 DEBUG   ::1             Company.lib::getState
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT rowid, code_departement as code, nom as label FROM llx_c_departements WHERE rowid=524
2017-05-05 14:52:00 DEBUG   ::1             Company.lib::getState
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT rowid, code_departement as code, nom as label FROM llx_c_departements WHERE rowid=524
2017-05-05 14:52:00 DEBUG   ::1             Facture::getIdContact
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT ec.fk_socpeople FROM llx_element_contact as ec, llx_socpeople as c, llx_c_type_contact as tc WHERE ec.element_id = 7 AND ec.fk_socpeople = c.rowid AND c.entity IN (1) AND ec.fk_c_type_contact = tc.rowid AND tc.element = 'facture' AND tc.source = 'external' AND tc.code = 'BILLING' AND tc.active = 1
2017-05-05 14:52:00 DEBUG   ::1             Product::fetch id=1 ref= ref_ext=
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT rowid, ref, ref_ext, label, description, url, note, customcode, fk_country, price, price_ttc, price_min, price_min_ttc, price_base_type, cost_price, default_vat_code, tva_tx, recuperableonly as tva_npr, localtax1_tx, localtax2_tx, localtax1_type, localtax2_type, tosell, tobuy, fk_product_type, duration, seuil_stock_alerte, canvas, weight, weight_units, length, length_units, surface, surface_units, volume, volume_units, barcode, fk_barcode_type, finished, accountancy_code_buy, accountancy_code_sell, stock, pmp, datec, tms, import_key, entity, desiredstock, tobatch, fk_unit, fk_price_expression, price_autogen FROM llx_product WHERE rowid = 1
2017-05-05 14:52:00 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'product' ORDER BY pos
2017-05-05 14:52:00 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 2
2017-05-05 14:52:00 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 3
2017-05-05 14:52:00 DEBUG   ::1             Company.lib::getFormeJuridiqueLabel
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT libelle FROM llx_c_forme_juridique WHERE code='415'
2017-05-05 14:52:00 DEBUG   ::1             Translate::loadCacheCurrencies
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT code_iso, label, unicode FROM llx_c_currencies WHERE active = 1 AND code_iso = 'EUR'
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:52:00 DEBUG   ::1             useLocalTax
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax1_type <> '0'
2017-05-05 14:52:00 DEBUG   ::1             useLocalTax
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:52:00 DEBUG   ::1             Facture::fetch
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:52:00 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:52:00 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:52:00 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:52:00 DEBUG   ::1             Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:52:00 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:52:00 DEBUG   ::1             Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:52:00 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:52:00 DEBUG   ::1             useRevenueStamp
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT COUNT(*) as nb FROM llx_c_revenuestamp as r, llx_c_country as c WHERE r.fk_pays = c.rowid AND c.code = 'ES' AND r.active = 1
2017-05-05 14:52:00 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:52:00 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 2
2017-05-05 14:52:00 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 3
2017-05-05 14:52:00 DEBUG   ::1             DiscountAbsolute::getAvailableDiscounts
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT SUM(rc.amount_ttc) as amount FROM llx_societe_remise_except as rc WHERE (rc.fk_facture IS NULL AND rc.fk_facture_line IS NULL) AND rc.fk_soc = 3 AND (fk_facture_source IS NULL OR (fk_facture_source IS NOT NULL AND description LIKE '(DEPOSIT)%'))
2017-05-05 14:52:00 DEBUG   ::1             DiscountAbsolute::getAvailableDiscounts
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT SUM(rc.amount_ttc) as amount FROM llx_societe_remise_except as rc WHERE (rc.fk_facture IS NULL AND rc.fk_facture_line IS NULL) AND rc.fk_soc = 3 AND (fk_facture_source IS NOT NULL AND description NOT LIKE '(DEPOSIT)%')
2017-05-05 14:52:00 DEBUG   ::1             User::fetch
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.rowid = 1
2017-05-05 14:52:00 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 7 AND type < 2 ORDER BY fk_statut DESC
2017-05-05 14:52:00 DEBUG   ::1             Facture::liste_contact
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT ec.rowid, ec.statut as statuslink, ec.fk_socpeople as id, ec.fk_c_type_contact, '-1' as socid, t.statut as statuscontact, t.civility as civility, t.lastname as lastname, t.firstname, t.email, tc.source, tc.element, tc.code, tc.libelle FROM llx_c_type_contact tc, llx_element_contact ec LEFT JOIN llx_user t on ec.fk_socpeople = t.rowid WHERE ec.element_id =7 AND ec.fk_c_type_contact=tc.rowid AND tc.element='facture' AND tc.source = 'internal' AND tc.active=1 ORDER BY t.lastname ASC
2017-05-05 14:52:00 DEBUG   ::1             Facture::liste_contact
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT ec.rowid, ec.statut as statuslink, ec.fk_socpeople as id, ec.fk_c_type_contact, t.fk_soc as socid, t.statut as statuscontact, t.civility as civility, t.lastname as lastname, t.firstname, t.email, tc.source, tc.element, tc.code, tc.libelle FROM llx_c_type_contact tc, llx_element_contact ec LEFT JOIN llx_socpeople t on ec.fk_socpeople = t.rowid WHERE ec.element_id =7 AND ec.fk_c_type_contact=tc.rowid AND tc.element='facture' AND tc.source = 'external' AND tc.active=1 ORDER BY t.lastname ASC
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT COUNT(pfd.rowid) as nb FROM llx_prelevement_facture_demande as pfd WHERE pfd.fk_facture = 7
2017-05-05 14:52:00 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/(PROV7) types=files recursive=0 filter= excludefilter="(\\.meta|_preview\\.png)$"
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT COUNT(rowid) as nb FROM llx_links WHERE objecttype = 'facture' AND objectid = 7 AND entity = 1
2017-05-05 14:52:00 DEBUG   ::1             DiscountAbsolute::fetch
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT sr.rowid, sr.fk_soc, sr.fk_user, sr.amount_ht, sr.amount_tva, sr.amount_ttc, sr.tva_tx, sr.fk_facture_line, sr.fk_facture, sr.fk_facture_source, sr.description, sr.datec, f.facnumber as ref_facture_source FROM llx_societe_remise_except as sr LEFT JOIN llx_facture as f ON sr.fk_facture_source = f.rowid WHERE sr.fk_facture_source=7
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT MAX(te.facnumber) FROM llx_facture as te WHERE te.facnumber < '(PROV7)' AND te.entity IN (1)
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT MIN(te.facnumber) FROM llx_facture as te WHERE te.facnumber > '(PROV7)' AND te.entity IN (1)
2017-05-05 14:52:00 DEBUG   ::1             get_OutstandingBill
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT rowid, total_ttc FROM llx_facture as f WHERE fk_soc = 3 AND paye = 0 AND fk_statut <> 0 AND fk_statut <> 3 AND fk_statut <> 2
2017-05-05 14:52:00 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 3
2017-05-05 14:52:00 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 2
2017-05-05 14:52:00 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 3
2017-05-05 14:52:00 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 4
2017-05-05 14:52:00 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 4 AND f.type = 2
2017-05-05 14:52:00 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 4 AND f.type = 3
2017-05-05 14:52:00 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 6
2017-05-05 14:52:00 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 2
2017-05-05 14:52:00 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 3
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 7 AND type = 2
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT p.datep as dp, p.ref, p.num_paiement, p.rowid, p.fk_bank, c.code as payment_code, c.libelle as payment_label, pf.amount, ba.rowid as baid, ba.ref as baref, ba.label FROM llx_c_paiement as c, llx_paiement_facture as pf, llx_paiement as p LEFT JOIN llx_bank as b ON p.fk_bank = b.rowid LEFT JOIN llx_bank_account as ba ON b.fk_account = ba.rowid WHERE pf.fk_facture = 7 AND p.fk_paiement = c.id AND pf.fk_paiement = p.rowid ORDER BY p.datep, p.tms
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT re.rowid, re.amount_ht, re.amount_tva, re.amount_ttc, re.description, re.fk_facture_source FROM llx_societe_remise_except as re WHERE fk_facture = 7
2017-05-05 14:52:00 DEBUG   ::1             Form::load_cache_conditions_paiements
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT rowid, code, libelle as label FROM llx_c_payment_term WHERE active > 0 ORDER BY sortorder
2017-05-05 14:52:00 DEBUG   ::1             Form::load_cache_types_paiements
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT id, code, libelle as label, type, active FROM llx_c_paiement
2017-05-05 14:52:00 DEBUG   ::1             Translate::getLabelFromKey
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT libelle as label FROM llx_c_paiement WHERE code = 'LCR'
2017-05-05 14:52:00 DEBUG   ::1             Account::fetch
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT ba.rowid, ba.ref, ba.label, ba.bank, ba.number, ba.courant, ba.clos, ba.rappro, ba.url, ba.code_banque, ba.code_guichet, ba.cle_rib, ba.bic, ba.iban_prefix as iban, ba.domiciliation, ba.proprio, ba.owner_address, ba.state_id, ba.fk_pays as country_id, ba.account_number, ba.accountancy_journal, ba.currency_code, ba.min_allowed, ba.min_desired, ba.comment, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_bank_account as ba LEFT JOIN llx_c_country as c ON ba.fk_pays = c.rowid LEFT JOIN llx_c_departements as d ON ba.state_id = d.rowid WHERE entity IN (1) AND ba.rowid  = 1
2017-05-05 14:52:00 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'bank_account' ORDER BY pos
2017-05-05 14:52:00 DEBUG   ::1             useLocalTax
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:52:00 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:52:00 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facturedet' ORDER BY pos
2017-05-05 14:52:00 DEBUG   ::1             Product::fetch id=1 ref= ref_ext=
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT rowid, ref, ref_ext, label, description, url, note, customcode, fk_country, price, price_ttc, price_min, price_min_ttc, price_base_type, cost_price, default_vat_code, tva_tx, recuperableonly as tva_npr, localtax1_tx, localtax2_tx, localtax1_type, localtax2_type, tosell, tobuy, fk_product_type, duration, seuil_stock_alerte, canvas, weight, weight_units, length, length_units, surface, surface_units, volume, volume_units, barcode, fk_barcode_type, finished, accountancy_code_buy, accountancy_code_sell, stock, pmp, datec, tms, import_key, entity, desiredstock, tobatch, fk_unit, fk_price_expression, price_autogen FROM llx_product WHERE rowid = 1
2017-05-05 14:52:00 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'product' ORDER BY pos
2017-05-05 14:52:00 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facturedet' ORDER BY pos
2017-05-05 14:52:00 DEBUG   ::1             Form::select_produits_list search product
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT  p.rowid, p.label, p.ref, p.description, p.barcode, p.fk_product_type, p.price, p.price_ttc, p.price_base_type, p.tva_tx, p.duration, p.stock, p.fk_price_expression FROM llx_product as p WHERE p.entity IN (1) AND p.tosell = 1 ORDER BY p.ref LIMIT 1000
2017-05-05 14:52:00 DEBUG   ::1             DolEditor::DolEditor htmlname=dp_desc width= height=100 toolbarname=dolibarr_details
2017-05-05 14:52:00 DEBUG   ::1             Form::load_cache_vatrates
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT DISTINCT t.code, t.taux, t.recuperableonly FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND t.active > 0 AND c.code IN ('ES') ORDER BY t.code ASC, t.taux ASC, t.recuperableonly ASC
2017-05-05 14:52:00 DEBUG   ::1             get_default_tva: seller use vat=1, seller country=ES, seller in cee=1, buyer country=ES, buyer in cee=1, idprod=0, idprodfournprice=0, SERVICE_ARE_ECOMMERCE_200238EC=
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT taux as vat_rate FROM llx_c_tva as t, llx_c_country as c WHERE t.active=1 AND t.fk_pays = c.rowid AND c.code='ES' ORDER BY t.taux DESC, t.recuperableonly ASC LIMIT 1
2017-05-05 14:52:00 DEBUG   ::1             get_product_vat_for_country: ret=21
2017-05-05 14:52:00 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:52:00 DEBUG   ::1             /core/lib/function2.lib.php::getListOfModels
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT nom as id, nom as lib, libelle as label, description as description FROM llx_document_model WHERE type = 'invoice' AND entity IN (0,1) ORDER BY description DESC
2017-05-05 14:52:00 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/(PROV7) types=files recursive=0 filter= excludefilter="(\\.meta|_preview\\.png)$"
2017-05-05 14:52:00 DEBUG   ::1             Facture::fetchObjectLink
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT rowid, fk_source, sourcetype, fk_target, targettype FROM llx_element_element WHERE (fk_source = '7' AND sourcetype = 'facture') OR (fk_target = '7' AND targettype = 'facture') ORDER BY sourcetype
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT s.rowid as socid, s.nom as name, s.client, c.rowid, c.ref, c.ref_client, c.total_ht FROM llx_societe as s, llx_commande as c WHERE c.fk_soc = s.rowid AND c.fk_soc = 3
2017-05-05 14:52:00 DEBUG   ::1             ActionComm::getActions
2017-05-05 14:52:00 DEBUG   ::1             sql=SELECT a.id FROM llx_actioncomm as a WHERE a.entity IN (1) AND a.fk_element = 7 AND a.elementtype = 'invoice'
2017-05-05 14:52:00 DEBUG   ::1             --- End access to /dolibarr/compta/facture.php
2017-05-05 14:52:16 DEBUG   ::1             This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:52:16 DEBUG   ::1             User::fetch
2017-05-05 14:52:16 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:52:16 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:16 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:52:16 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:52:16 DEBUG   ::1             User::getrights
2017-05-05 14:52:16 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:52:16 DEBUG   ::1             User::getrights
2017-05-05 14:52:16 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:52:16 DEBUG   ::1             --- Access to /dolibarr/compta/facture.php
2017-05-05 14:52:16 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:52:16 DEBUG   ::1             Menubase::menuLoad mymainmenu=accountancy myleftmenu=customers_bills type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:52:16 DEBUG   ::1             sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:52:17 DEBUG   ::1             Facture::fetch
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:52:17 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:52:17 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:52:17 DEBUG   ::1             Facture::fetch
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:52:17 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:52:17 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:52:17 DEBUG   ::1             useLocalTax
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax1_type <> '0'
2017-05-05 14:52:17 DEBUG   ::1             useLocalTax
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:52:17 DEBUG   ::1             Facture::fetch
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:52:17 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:52:17 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:52:17 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:52:17 DEBUG   ::1             Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:52:17 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:52:17 DEBUG   ::1             Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:52:17 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:52:17 DEBUG   ::1             useRevenueStamp
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT COUNT(*) as nb FROM llx_c_revenuestamp as r, llx_c_country as c WHERE r.fk_pays = c.rowid AND c.code = 'ES' AND r.active = 1
2017-05-05 14:52:17 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:52:17 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 2
2017-05-05 14:52:17 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 3
2017-05-05 14:52:17 DEBUG   ::1             DiscountAbsolute::getAvailableDiscounts
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT SUM(rc.amount_ttc) as amount FROM llx_societe_remise_except as rc WHERE (rc.fk_facture IS NULL AND rc.fk_facture_line IS NULL) AND rc.fk_soc = 3 AND (fk_facture_source IS NULL OR (fk_facture_source IS NOT NULL AND description LIKE '(DEPOSIT)%'))
2017-05-05 14:52:17 DEBUG   ::1             DiscountAbsolute::getAvailableDiscounts
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT SUM(rc.amount_ttc) as amount FROM llx_societe_remise_except as rc WHERE (rc.fk_facture IS NULL AND rc.fk_facture_line IS NULL) AND rc.fk_soc = 3 AND (fk_facture_source IS NOT NULL AND description NOT LIKE '(DEPOSIT)%')
2017-05-05 14:52:17 DEBUG   ::1             User::fetch
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.rowid = 1
2017-05-05 14:52:17 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 7 AND type < 2 ORDER BY fk_statut DESC
2017-05-05 14:52:17 DEBUG   ::1             Facture::liste_contact
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT ec.rowid, ec.statut as statuslink, ec.fk_socpeople as id, ec.fk_c_type_contact, '-1' as socid, t.statut as statuscontact, t.civility as civility, t.lastname as lastname, t.firstname, t.email, tc.source, tc.element, tc.code, tc.libelle FROM llx_c_type_contact tc, llx_element_contact ec LEFT JOIN llx_user t on ec.fk_socpeople = t.rowid WHERE ec.element_id =7 AND ec.fk_c_type_contact=tc.rowid AND tc.element='facture' AND tc.source = 'internal' AND tc.active=1 ORDER BY t.lastname ASC
2017-05-05 14:52:17 DEBUG   ::1             Facture::liste_contact
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT ec.rowid, ec.statut as statuslink, ec.fk_socpeople as id, ec.fk_c_type_contact, t.fk_soc as socid, t.statut as statuscontact, t.civility as civility, t.lastname as lastname, t.firstname, t.email, tc.source, tc.element, tc.code, tc.libelle FROM llx_c_type_contact tc, llx_element_contact ec LEFT JOIN llx_socpeople t on ec.fk_socpeople = t.rowid WHERE ec.element_id =7 AND ec.fk_c_type_contact=tc.rowid AND tc.element='facture' AND tc.source = 'external' AND tc.active=1 ORDER BY t.lastname ASC
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT COUNT(pfd.rowid) as nb FROM llx_prelevement_facture_demande as pfd WHERE pfd.fk_facture = 7
2017-05-05 14:52:17 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/(PROV7) types=files recursive=0 filter= excludefilter="(\\.meta|_preview\\.png)$"
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT COUNT(rowid) as nb FROM llx_links WHERE objecttype = 'facture' AND objectid = 7 AND entity = 1
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT MAX(CAST(SUBSTRING(facnumber FROM 8) AS SIGNED)) as max FROM llx_facture WHERE facnumber LIKE 'FA____-%' AND entity IN (1)
2017-05-05 14:52:17 DEBUG   ::1             mod_facture_terre::getNextValue
2017-05-05 14:52:17 DEBUG   ::1             mod_facture_terre::getNextValue return FA1705-0005
2017-05-05 14:52:17 DEBUG   ::1             Notify::getNotificationsArray BILL_VALIDATE, 3
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT a.code, c.email, c.rowid FROM llx_notify_def as n, llx_socpeople as c, llx_c_action_trigger as a, llx_societe as s WHERE n.fk_contact = c.rowid AND a.rowid = n.fk_action AND n.fk_soc = s.rowid AND a.code = 'BILL_VALIDATE' AND s.entity IN (1) AND s.rowid = 3
2017-05-05 14:52:17 DEBUG   ::1             Facture::hasProductsOrServices we found 0 qualified lines of products/servcies
2017-05-05 14:52:17 DEBUG   ::1             DiscountAbsolute::fetch
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT sr.rowid, sr.fk_soc, sr.fk_user, sr.amount_ht, sr.amount_tva, sr.amount_ttc, sr.tva_tx, sr.fk_facture_line, sr.fk_facture, sr.fk_facture_source, sr.description, sr.datec, f.facnumber as ref_facture_source FROM llx_societe_remise_except as sr LEFT JOIN llx_facture as f ON sr.fk_facture_source = f.rowid WHERE sr.fk_facture_source=7
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT MAX(te.facnumber) FROM llx_facture as te WHERE te.facnumber < '(PROV7)' AND te.entity IN (1)
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT MIN(te.facnumber) FROM llx_facture as te WHERE te.facnumber > '(PROV7)' AND te.entity IN (1)
2017-05-05 14:52:17 DEBUG   ::1             get_OutstandingBill
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT rowid, total_ttc FROM llx_facture as f WHERE fk_soc = 3 AND paye = 0 AND fk_statut <> 0 AND fk_statut <> 3 AND fk_statut <> 2
2017-05-05 14:52:17 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 3
2017-05-05 14:52:17 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 2
2017-05-05 14:52:17 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 3
2017-05-05 14:52:17 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 4
2017-05-05 14:52:17 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 4 AND f.type = 2
2017-05-05 14:52:17 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 4 AND f.type = 3
2017-05-05 14:52:17 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 6
2017-05-05 14:52:17 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 2
2017-05-05 14:52:17 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 3
2017-05-05 14:52:17 DEBUG   ::1             Translate::loadCacheCurrencies
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT code_iso, label, unicode FROM llx_c_currencies WHERE active = 1 AND code_iso = 'EUR'
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 7 AND type = 2
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT p.datep as dp, p.ref, p.num_paiement, p.rowid, p.fk_bank, c.code as payment_code, c.libelle as payment_label, pf.amount, ba.rowid as baid, ba.ref as baref, ba.label FROM llx_c_paiement as c, llx_paiement_facture as pf, llx_paiement as p LEFT JOIN llx_bank as b ON p.fk_bank = b.rowid LEFT JOIN llx_bank_account as ba ON b.fk_account = ba.rowid WHERE pf.fk_facture = 7 AND p.fk_paiement = c.id AND pf.fk_paiement = p.rowid ORDER BY p.datep, p.tms
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT re.rowid, re.amount_ht, re.amount_tva, re.amount_ttc, re.description, re.fk_facture_source FROM llx_societe_remise_except as re WHERE fk_facture = 7
2017-05-05 14:52:17 DEBUG   ::1             Form::load_cache_conditions_paiements
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT rowid, code, libelle as label FROM llx_c_payment_term WHERE active > 0 ORDER BY sortorder
2017-05-05 14:52:17 DEBUG   ::1             Form::load_cache_types_paiements
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT id, code, libelle as label, type, active FROM llx_c_paiement
2017-05-05 14:52:17 DEBUG   ::1             Translate::getLabelFromKey
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT libelle as label FROM llx_c_paiement WHERE code = 'LCR'
2017-05-05 14:52:17 DEBUG   ::1             Account::fetch
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT ba.rowid, ba.ref, ba.label, ba.bank, ba.number, ba.courant, ba.clos, ba.rappro, ba.url, ba.code_banque, ba.code_guichet, ba.cle_rib, ba.bic, ba.iban_prefix as iban, ba.domiciliation, ba.proprio, ba.owner_address, ba.state_id, ba.fk_pays as country_id, ba.account_number, ba.accountancy_journal, ba.currency_code, ba.min_allowed, ba.min_desired, ba.comment, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_bank_account as ba LEFT JOIN llx_c_country as c ON ba.fk_pays = c.rowid LEFT JOIN llx_c_departements as d ON ba.state_id = d.rowid WHERE entity IN (1) AND ba.rowid  = 1
2017-05-05 14:52:17 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'bank_account' ORDER BY pos
2017-05-05 14:52:17 DEBUG   ::1             useLocalTax
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:52:17 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:52:17 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facturedet' ORDER BY pos
2017-05-05 14:52:17 DEBUG   ::1             Product::fetch id=1 ref= ref_ext=
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT rowid, ref, ref_ext, label, description, url, note, customcode, fk_country, price, price_ttc, price_min, price_min_ttc, price_base_type, cost_price, default_vat_code, tva_tx, recuperableonly as tva_npr, localtax1_tx, localtax2_tx, localtax1_type, localtax2_type, tosell, tobuy, fk_product_type, duration, seuil_stock_alerte, canvas, weight, weight_units, length, length_units, surface, surface_units, volume, volume_units, barcode, fk_barcode_type, finished, accountancy_code_buy, accountancy_code_sell, stock, pmp, datec, tms, import_key, entity, desiredstock, tobatch, fk_unit, fk_price_expression, price_autogen FROM llx_product WHERE rowid = 1
2017-05-05 14:52:17 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'product' ORDER BY pos
2017-05-05 14:52:17 DEBUG   ::1             /core/lib/function2.lib.php::getListOfModels
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT nom as id, nom as lib, libelle as label, description as description FROM llx_document_model WHERE type = 'invoice' AND entity IN (0,1) ORDER BY description DESC
2017-05-05 14:52:17 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/(PROV7) types=files recursive=0 filter= excludefilter="(\\.meta|_preview\\.png)$"
2017-05-05 14:52:17 DEBUG   ::1             Facture::fetchObjectLink
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT rowid, fk_source, sourcetype, fk_target, targettype FROM llx_element_element WHERE (fk_source = '7' AND sourcetype = 'facture') OR (fk_target = '7' AND targettype = 'facture') ORDER BY sourcetype
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT s.rowid as socid, s.nom as name, s.client, c.rowid, c.ref, c.ref_client, c.total_ht FROM llx_societe as s, llx_commande as c WHERE c.fk_soc = s.rowid AND c.fk_soc = 3
2017-05-05 14:52:17 DEBUG   ::1             ActionComm::getActions
2017-05-05 14:52:17 DEBUG   ::1             sql=SELECT a.id FROM llx_actioncomm as a WHERE a.entity IN (1) AND a.fk_element = 7 AND a.elementtype = 'invoice'
2017-05-05 14:52:17 DEBUG   ::1             --- End access to /dolibarr/compta/facture.php
2017-05-05 14:52:21 DEBUG   ::1             This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:52:21 DEBUG   ::1             User::fetch
2017-05-05 14:52:21 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:52:21 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:21 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:52:21 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:52:21 DEBUG   ::1             User::getrights
2017-05-05 14:52:21 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:52:21 DEBUG   ::1             User::getrights
2017-05-05 14:52:21 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:52:21 DEBUG   ::1             --- Access to /dolibarr/compta/facture.php
2017-05-05 14:52:21 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:52:21 DEBUG   ::1             Menubase::menuLoad mymainmenu=accountancy myleftmenu=customers_bills type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:52:21 DEBUG   ::1             sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:52:22 DEBUG   ::1             Facture::fetch
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:52:22 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:52:22 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:52:22 DEBUG   ::1             Facture::fetch
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:52:22 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:52:22 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:52:22 DEBUG   ::1             Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:52:22 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:52:22 DEBUG   ::1             Facture::hasProductsOrServices we found 0 qualified lines of products/servcies
2017-05-05 14:52:22 DEBUG   ::1             Facture::validate user=1, force_number=, idwarehouse=
2017-05-05 14:52:22 DEBUG   ::1             BEGIN Transaction
2017-05-05 14:52:22 DEBUG   ::1              sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:52:22 DEBUG   ::1              Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:52:22 DEBUG   ::1              ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:22 DEBUG   ::1              sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:52:22 DEBUG   ::1              Facture::fetch_lines
2017-05-05 14:52:22 DEBUG   ::1              sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:52:22 DEBUG   ::1              sql=SELECT MAX(CAST(SUBSTRING(facnumber FROM 8) AS SIGNED)) as max FROM llx_facture WHERE facnumber LIKE 'FA____-%' AND entity IN (1)
2017-05-05 14:52:22 DEBUG   ::1              mod_facture_terre::getNextValue
2017-05-05 14:52:22 DEBUG   ::1              mod_facture_terre::getNextValue return FA1705-0005
2017-05-05 14:52:22 DEBUG   ::1              Facture::update_price
2017-05-05 14:52:22 DEBUG   ::1              sql=SELECT rowid, qty, subprice as up, remise_percent, total_ht, total_tva as total_tva, total_ttc, total_localtax1 as total_localtax1, total_localtax2 as total_localtax2, tva_tx as vatrate, localtax1_tx, localtax2_tx, localtax1_type, localtax2_type, info_bits, product_type, situation_percent, multicurrency_total_ht, multicurrency_total_tva, multicurrency_total_ttc FROM llx_facturedet WHERE fk_facture = 7 AND product_type <> 9 ORDER by rowid
2017-05-05 14:52:22 DEBUG   ::1              Facture::update_price
2017-05-05 14:52:22 DEBUG   ::1              sql=UPDATE llx_facture SET total='45', tva='4.2', localtax1='0', localtax2='0', total_ttc='49.2', multicurrency_total_ht='45', multicurrency_total_tva='4.2', multicurrency_total_ttc='49.2' WHERE rowid = 7
2017-05-05 14:52:22 DEBUG   ::1              Facture::validate
2017-05-05 14:52:22 DEBUG   ::1              sql=UPDATE llx_facture SET facnumber='FA1705-0005', fk_statut = 1, fk_user_valid = 1, date_valid = '20170505145222' WHERE rowid = 7
2017-05-05 14:52:22 DEBUG   ::1              sql=UPDATE llx_societe SET client = 1 WHERE rowid = 3
2017-05-05 14:52:22 DEBUG   ::1              Interfaces::run_triggers action=BILL_VALIDATE Triggers for file 'interface_20_modPaypal_PaypalWorkflow.class.php' need module to be enabled
2017-05-05 14:52:22 DEBUG   ::1              Interfaces::run_triggers action=BILL_VALIDATE Launch runTrigger for file 'interface_20_all_Logevents.class.php'
2017-05-05 14:52:22 DEBUG   ::1              Interfaces::run_triggers action=BILL_VALIDATE Launch runTrigger for file 'interface_20_modWorkflow_WorkflowManager.class.php'
2017-05-05 14:52:22 DEBUG   ::1              Trigger 'WorkflowManager' for action 'BILL_VALIDATE' launched by C:\dolibarr\www\dolibarr\htdocs\core\triggers\interface_20_modWorkflow_WorkflowManager.class.php. id=7
2017-05-05 14:52:22 DEBUG   ::1              Interfaces::run_triggers action=BILL_VALIDATE Launch runTrigger for file 'interface_50_modAgenda_ActionsAuto.class.php'
2017-05-05 14:52:22 DEBUG   ::1              Trigger 'ActionsAuto' for action 'BILL_VALIDATE' launched by C:\dolibarr\www\dolibarr\htdocs\core\triggers\interface_50_modAgenda_ActionsAuto.class.php. id=7
2017-05-05 14:52:22 DEBUG   ::1              sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:52:22 DEBUG   ::1              Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:52:22 DEBUG   ::1              ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:22 DEBUG   ::1              sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:52:22 DEBUG   ::1              CActionComm::fetch
2017-05-05 14:52:22 DEBUG   ::1              sql=SELECT id, code, type, libelle, color, active FROM llx_c_actioncomm WHERE code='AC_OTH_AUTO'
2017-05-05 14:52:22 DEBUG   ::1               ActionComm::add
2017-05-05 14:52:22 DEBUG   ::1               sql=INSERT INTO llx_actioncomm(datec,datep,datep2,durationp,fk_action,code,fk_soc,fk_project,note,fk_contact,fk_user_author,fk_user_action,fk_user_done,label,percent,priority,fulldayevent,location,punctual,transparency,fk_element,elementtype,entity) VALUES ('20170505145222','20170505145222','20170505145222',null,40, 'AC_OTH_AUTO', '3',null, 'Factura FA1705-0005 validada\nAutor: apperture',null,'1','1',null,'Factura FA1705-0005 validada','-1','0','0','','1','0',7,'invoice',1)
2017-05-05 14:52:22 DEBUG   ::1               sql=INSERT INTO llx_actioncomm_resources(fk_actioncomm, element_type, fk_element, mandatory, transparency, answer_status) VALUES(15, 'user', 1, 0, 0, 0)
2017-05-05 14:52:22 DEBUG   ::1               Interfaces::run_triggers action=ACTION_CREATE Triggers for file 'interface_20_modPaypal_PaypalWorkflow.class.php' need module to be enabled
2017-05-05 14:52:22 DEBUG   ::1               Interfaces::run_triggers action=ACTION_CREATE Launch runTrigger for file 'interface_20_all_Logevents.class.php'
2017-05-05 14:52:22 DEBUG   ::1               Interfaces::run_triggers action=ACTION_CREATE Launch runTrigger for file 'interface_20_modWorkflow_WorkflowManager.class.php'
2017-05-05 14:52:22 DEBUG   ::1               Interfaces::run_triggers action=ACTION_CREATE Launch runTrigger for file 'interface_50_modAgenda_ActionsAuto.class.php'
2017-05-05 14:52:22 DEBUG   ::1               Interfaces::run_triggers action=ACTION_CREATE Launch runTrigger for file 'interface_50_modLdap_Ldapsynchro.class.php'
2017-05-05 14:52:22 DEBUG   ::1               Interfaces::run_triggers action=ACTION_CREATE Launch runTrigger for file 'interface_50_modMailmanspip_Mailmanspipsynchro.class.php'
2017-05-05 14:52:22 DEBUG   ::1               Interfaces::run_triggers action=ACTION_CREATE Launch runTrigger for file 'interface_50_modNotification_Notification.class.php'
2017-05-05 14:52:22 DEBUG   ::1               Trigger 'Notification' for action 'ACTION_CREATE' launched by C:\dolibarr\www\dolibarr\htdocs\core\triggers\interface_50_modNotification_Notification.class.php. id=15
2017-05-05 14:52:22 DEBUG   ::1               Notify::send notifcode=ACTION_CREATE, object=15
2017-05-05 14:52:22 DEBUG   ::1              Interfaces::run_triggers action=BILL_VALIDATE Launch runTrigger for file 'interface_50_modLdap_Ldapsynchro.class.php'
2017-05-05 14:52:22 DEBUG   ::1              Interfaces::run_triggers action=BILL_VALIDATE Launch runTrigger for file 'interface_50_modMailmanspip_Mailmanspipsynchro.class.php'
2017-05-05 14:52:22 DEBUG   ::1              Interfaces::run_triggers action=BILL_VALIDATE Launch runTrigger for file 'interface_50_modNotification_Notification.class.php'
2017-05-05 14:52:22 DEBUG   ::1              Trigger 'Notification' for action 'BILL_VALIDATE' launched by C:\dolibarr\www\dolibarr\htdocs\core\triggers\interface_50_modNotification_Notification.class.php. id=7
2017-05-05 14:52:22 DEBUG   ::1              Notify::send notifcode=BILL_VALIDATE, object=7
2017-05-05 14:52:22 DEBUG   ::1              sql=SELECT s.nom, c.email, c.rowid as cid, c.lastname, c.firstname, c.default_lang, a.rowid as adid, a.label, a.code, n.rowid, n.type FROM llx_socpeople as c, llx_c_action_trigger as a, llx_notify_def as n, llx_societe as s WHERE n.fk_contact = c.rowid AND a.rowid = n.fk_action AND n.fk_soc = s.rowid AND a.code = 'BILL_VALIDATE' AND s.rowid = 3
2017-05-05 14:52:22 DEBUG   ::1              No notification to thirdparty sent, nothing into notification setup for the thirdparty socid = 3
2017-05-05 14:52:22 DEBUG   ::1              Facture::validate rename dir c:/dolibarr/dolibarr_documents/facture/(PROV7) into c:/dolibarr/dolibarr_documents/facture/FA1705-0005
2017-05-05 14:52:22 DEBUG   ::1              Rename ok
2017-05-05 14:52:22 DEBUG   ::1              files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1705-0005 types=files recursive=1 filter=^\(PROV7\) excludefilter=""
2017-05-05 14:52:22 DEBUG   ::1             COMMIT Transaction
2017-05-05 14:52:22 DEBUG   ::1             Facture::fetch
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:52:22 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:52:22 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT code, label, width, height, unit FROM llx_c_paper_format WHERE code = 'EUA4'
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:52:22 DEBUG   ::1             Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:52:22 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:52:22 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:52:22 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 2
2017-05-05 14:52:22 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 3
2017-05-05 14:52:22 DEBUG   ::1             Facture::getListOfPayments
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT pf.amount, pf.multicurrency_amount, p.fk_paiement, p.datep, p.num_paiement as num, t.code FROM llx_paiement_facture as pf, llx_paiement as p, llx_c_paiement as t WHERE pf.fk_facture = 7 AND pf.fk_paiement = p.rowid AND p.fk_paiement = t.id
2017-05-05 14:52:22 DEBUG   ::1             functions.lib::dol_mkdir: dir=c:/dolibarr/dolibarr_documents/admin/temp/
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 7 AND type < 2 AND fk_statut = 1 ORDER BY fk_statut DESC
2017-05-05 14:52:22 DEBUG   ::1             Facture::fetchObjectLink
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT rowid, fk_source, sourcetype, fk_target, targettype FROM llx_element_element WHERE (fk_source = '7' AND sourcetype = 'facture') OR (fk_target = '7' AND targettype = 'facture') ORDER BY sourcetype
2017-05-05 14:52:22 DEBUG   ::1             Company.lib::getState
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT rowid, code_departement as code, nom as label FROM llx_c_departements WHERE rowid=524
2017-05-05 14:52:22 DEBUG   ::1             Company.lib::getState
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT rowid, code_departement as code, nom as label FROM llx_c_departements WHERE rowid=524
2017-05-05 14:52:22 DEBUG   ::1             Facture::getIdContact
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT ec.fk_socpeople FROM llx_element_contact as ec, llx_socpeople as c, llx_c_type_contact as tc WHERE ec.element_id = 7 AND ec.fk_socpeople = c.rowid AND c.entity IN (1) AND ec.fk_c_type_contact = tc.rowid AND tc.element = 'facture' AND tc.source = 'external' AND tc.code = 'BILLING' AND tc.active = 1
2017-05-05 14:52:22 DEBUG   ::1             Product::fetch id=1 ref= ref_ext=
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT rowid, ref, ref_ext, label, description, url, note, customcode, fk_country, price, price_ttc, price_min, price_min_ttc, price_base_type, cost_price, default_vat_code, tva_tx, recuperableonly as tva_npr, localtax1_tx, localtax2_tx, localtax1_type, localtax2_type, tosell, tobuy, fk_product_type, duration, seuil_stock_alerte, canvas, weight, weight_units, length, length_units, surface, surface_units, volume, volume_units, barcode, fk_barcode_type, finished, accountancy_code_buy, accountancy_code_sell, stock, pmp, datec, tms, import_key, entity, desiredstock, tobatch, fk_unit, fk_price_expression, price_autogen FROM llx_product WHERE rowid = 1
2017-05-05 14:52:22 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'product' ORDER BY pos
2017-05-05 14:52:22 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 2
2017-05-05 14:52:22 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 3
2017-05-05 14:52:22 DEBUG   ::1             Company.lib::getFormeJuridiqueLabel
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT libelle FROM llx_c_forme_juridique WHERE code='415'
2017-05-05 14:52:22 DEBUG   ::1             Translate::loadCacheCurrencies
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT code_iso, label, unicode FROM llx_c_currencies WHERE active = 1 AND code_iso = 'EUR'
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:52:22 DEBUG   ::1             useLocalTax
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax1_type <> '0'
2017-05-05 14:52:22 DEBUG   ::1             useLocalTax
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:52:22 DEBUG   ::1             Facture::fetch
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:52:22 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:52:22 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:52:22 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:52:22 DEBUG   ::1             Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:52:22 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:52:22 DEBUG   ::1             Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:52:22 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:52:22 DEBUG   ::1             useRevenueStamp
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT COUNT(*) as nb FROM llx_c_revenuestamp as r, llx_c_country as c WHERE r.fk_pays = c.rowid AND c.code = 'ES' AND r.active = 1
2017-05-05 14:52:22 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:52:22 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 2
2017-05-05 14:52:22 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 3
2017-05-05 14:52:22 DEBUG   ::1             DiscountAbsolute::getAvailableDiscounts
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT SUM(rc.amount_ttc) as amount FROM llx_societe_remise_except as rc WHERE (rc.fk_facture IS NULL AND rc.fk_facture_line IS NULL) AND rc.fk_soc = 3 AND (fk_facture_source IS NULL OR (fk_facture_source IS NOT NULL AND description LIKE '(DEPOSIT)%'))
2017-05-05 14:52:22 DEBUG   ::1             DiscountAbsolute::getAvailableDiscounts
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT SUM(rc.amount_ttc) as amount FROM llx_societe_remise_except as rc WHERE (rc.fk_facture IS NULL AND rc.fk_facture_line IS NULL) AND rc.fk_soc = 3 AND (fk_facture_source IS NOT NULL AND description NOT LIKE '(DEPOSIT)%')
2017-05-05 14:52:22 DEBUG   ::1             User::fetch
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.rowid = 1
2017-05-05 14:52:22 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 7 AND type < 2 ORDER BY fk_statut DESC
2017-05-05 14:52:22 DEBUG   ::1             Facture::liste_contact
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT ec.rowid, ec.statut as statuslink, ec.fk_socpeople as id, ec.fk_c_type_contact, '-1' as socid, t.statut as statuscontact, t.civility as civility, t.lastname as lastname, t.firstname, t.email, tc.source, tc.element, tc.code, tc.libelle FROM llx_c_type_contact tc, llx_element_contact ec LEFT JOIN llx_user t on ec.fk_socpeople = t.rowid WHERE ec.element_id =7 AND ec.fk_c_type_contact=tc.rowid AND tc.element='facture' AND tc.source = 'internal' AND tc.active=1 ORDER BY t.lastname ASC
2017-05-05 14:52:22 DEBUG   ::1             Facture::liste_contact
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT ec.rowid, ec.statut as statuslink, ec.fk_socpeople as id, ec.fk_c_type_contact, t.fk_soc as socid, t.statut as statuscontact, t.civility as civility, t.lastname as lastname, t.firstname, t.email, tc.source, tc.element, tc.code, tc.libelle FROM llx_c_type_contact tc, llx_element_contact ec LEFT JOIN llx_socpeople t on ec.fk_socpeople = t.rowid WHERE ec.element_id =7 AND ec.fk_c_type_contact=tc.rowid AND tc.element='facture' AND tc.source = 'external' AND tc.active=1 ORDER BY t.lastname ASC
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT COUNT(pfd.rowid) as nb FROM llx_prelevement_facture_demande as pfd WHERE pfd.fk_facture = 7
2017-05-05 14:52:22 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1705-0005 types=files recursive=0 filter= excludefilter="(\\.meta|_preview\\.png)$"
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT COUNT(rowid) as nb FROM llx_links WHERE objecttype = 'facture' AND objectid = 7 AND entity = 1
2017-05-05 14:52:22 DEBUG   ::1             DiscountAbsolute::fetch
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT sr.rowid, sr.fk_soc, sr.fk_user, sr.amount_ht, sr.amount_tva, sr.amount_ttc, sr.tva_tx, sr.fk_facture_line, sr.fk_facture, sr.fk_facture_source, sr.description, sr.datec, f.facnumber as ref_facture_source FROM llx_societe_remise_except as sr LEFT JOIN llx_facture as f ON sr.fk_facture_source = f.rowid WHERE sr.fk_facture_source=7
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT MAX(te.facnumber) FROM llx_facture as te WHERE te.facnumber < 'FA1705-0005' AND te.entity IN (1)
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT MIN(te.facnumber) FROM llx_facture as te WHERE te.facnumber > 'FA1705-0005' AND te.entity IN (1)
2017-05-05 14:52:22 DEBUG   ::1             get_OutstandingBill
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT rowid, total_ttc FROM llx_facture as f WHERE fk_soc = 3 AND paye = 0 AND fk_statut <> 0 AND fk_statut <> 3 AND fk_statut <> 2
2017-05-05 14:52:22 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 3
2017-05-05 14:52:22 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 2
2017-05-05 14:52:22 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 3
2017-05-05 14:52:22 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 4
2017-05-05 14:52:22 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:52:22 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 4 AND f.type = 2
2017-05-05 14:52:23 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:52:23 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 4 AND f.type = 3
2017-05-05 14:52:23 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:52:23 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 6
2017-05-05 14:52:23 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:52:23 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 2
2017-05-05 14:52:23 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:52:23 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 3
2017-05-05 14:52:23 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:52:23 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:52:23 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:52:23 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 2
2017-05-05 14:52:23 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:52:23 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 3
2017-05-05 14:52:23 DEBUG   ::1             sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 7 AND type = 2
2017-05-05 14:52:23 DEBUG   ::1             sql=SELECT p.datep as dp, p.ref, p.num_paiement, p.rowid, p.fk_bank, c.code as payment_code, c.libelle as payment_label, pf.amount, ba.rowid as baid, ba.ref as baref, ba.label FROM llx_c_paiement as c, llx_paiement_facture as pf, llx_paiement as p LEFT JOIN llx_bank as b ON p.fk_bank = b.rowid LEFT JOIN llx_bank_account as ba ON b.fk_account = ba.rowid WHERE pf.fk_facture = 7 AND p.fk_paiement = c.id AND pf.fk_paiement = p.rowid ORDER BY p.datep, p.tms
2017-05-05 14:52:23 DEBUG   ::1             sql=SELECT re.rowid, re.amount_ht, re.amount_tva, re.amount_ttc, re.description, re.fk_facture_source FROM llx_societe_remise_except as re WHERE fk_facture = 7
2017-05-05 14:52:23 DEBUG   ::1             Form::load_cache_conditions_paiements
2017-05-05 14:52:23 DEBUG   ::1             sql=SELECT rowid, code, libelle as label FROM llx_c_payment_term WHERE active > 0 ORDER BY sortorder
2017-05-05 14:52:23 DEBUG   ::1             Form::load_cache_types_paiements
2017-05-05 14:52:23 DEBUG   ::1             sql=SELECT id, code, libelle as label, type, active FROM llx_c_paiement
2017-05-05 14:52:23 DEBUG   ::1             Translate::getLabelFromKey
2017-05-05 14:52:23 DEBUG   ::1             sql=SELECT libelle as label FROM llx_c_paiement WHERE code = 'LCR'
2017-05-05 14:52:23 DEBUG   ::1             Account::fetch
2017-05-05 14:52:23 DEBUG   ::1             sql=SELECT ba.rowid, ba.ref, ba.label, ba.bank, ba.number, ba.courant, ba.clos, ba.rappro, ba.url, ba.code_banque, ba.code_guichet, ba.cle_rib, ba.bic, ba.iban_prefix as iban, ba.domiciliation, ba.proprio, ba.owner_address, ba.state_id, ba.fk_pays as country_id, ba.account_number, ba.accountancy_journal, ba.currency_code, ba.min_allowed, ba.min_desired, ba.comment, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_bank_account as ba LEFT JOIN llx_c_country as c ON ba.fk_pays = c.rowid LEFT JOIN llx_c_departements as d ON ba.state_id = d.rowid WHERE entity IN (1) AND ba.rowid  = 1
2017-05-05 14:52:23 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:23 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'bank_account' ORDER BY pos
2017-05-05 14:52:23 DEBUG   ::1             useLocalTax
2017-05-05 14:52:23 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:52:23 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:52:23 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:52:23 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:23 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facturedet' ORDER BY pos
2017-05-05 14:52:23 DEBUG   ::1             Product::fetch id=1 ref= ref_ext=
2017-05-05 14:52:23 DEBUG   ::1             sql=SELECT rowid, ref, ref_ext, label, description, url, note, customcode, fk_country, price, price_ttc, price_min, price_min_ttc, price_base_type, cost_price, default_vat_code, tva_tx, recuperableonly as tva_npr, localtax1_tx, localtax2_tx, localtax1_type, localtax2_type, tosell, tobuy, fk_product_type, duration, seuil_stock_alerte, canvas, weight, weight_units, length, length_units, surface, surface_units, volume, volume_units, barcode, fk_barcode_type, finished, accountancy_code_buy, accountancy_code_sell, stock, pmp, datec, tms, import_key, entity, desiredstock, tobatch, fk_unit, fk_price_expression, price_autogen FROM llx_product WHERE rowid = 1
2017-05-05 14:52:23 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:23 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'product' ORDER BY pos
2017-05-05 14:52:23 DEBUG   ::1             sql=SELECT MAX(CAST(SUBSTRING(facnumber FROM 8) AS SIGNED)) as max FROM llx_facture WHERE facnumber LIKE 'FA____-%' AND entity IN (1)
2017-05-05 14:52:23 DEBUG   ::1             mod_facture_terre::getNextValue
2017-05-05 14:52:23 DEBUG   ::1             mod_facture_terre::getNextValue
2017-05-05 14:52:23 DEBUG   ::1             sql=SELECT facnumber as ref FROM llx_facture WHERE facnumber LIKE 'FA____-0005' AND entity IN (1)
2017-05-05 14:52:23 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:52:23 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:52:23 DEBUG   ::1             /core/lib/function2.lib.php::getListOfModels
2017-05-05 14:52:23 DEBUG   ::1             sql=SELECT nom as id, nom as lib, libelle as label, description as description FROM llx_document_model WHERE type = 'invoice' AND entity IN (0,1) ORDER BY description DESC
2017-05-05 14:52:23 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1705-0005 types=files recursive=0 filter= excludefilter="(\\.meta|_preview\\.png)$"
2017-05-05 14:52:23 DEBUG   ::1             Facture::fetchObjectLink
2017-05-05 14:52:23 DEBUG   ::1             sql=SELECT rowid, fk_source, sourcetype, fk_target, targettype FROM llx_element_element WHERE (fk_source = '7' AND sourcetype = 'facture') OR (fk_target = '7' AND targettype = 'facture') ORDER BY sourcetype
2017-05-05 14:52:23 DEBUG   ::1             sql=SELECT s.rowid as socid, s.nom as name, s.client, c.rowid, c.ref, c.ref_client, c.total_ht FROM llx_societe as s, llx_commande as c WHERE c.fk_soc = s.rowid AND c.fk_soc = 3
2017-05-05 14:52:23 DEBUG   ::1             ActionComm::getActions
2017-05-05 14:52:23 DEBUG   ::1             sql=SELECT a.id FROM llx_actioncomm as a WHERE a.entity IN (1) AND a.fk_element = 7 AND a.elementtype = 'invoice'
2017-05-05 14:52:23 DEBUG   ::1             ActionComm::fetch
2017-05-05 14:52:23 DEBUG   ::1             sql=SELECT a.id, a.id as ref, a.ref_ext, a.datep, a.datep2, a.durationp, a.datec, a.tms as datem, a.code, a.label, a.note, a.fk_soc, a.fk_project, a.fk_user_author, a.fk_user_mod, a.fk_user_action, a.fk_user_done, a.fk_contact, a.percent as percentage, a.fk_element, a.elementtype, a.priority, a.fulldayevent, a.location, a.punctual, a.transparency, c.id as type_id, c.code as type_code, c.libelle, s.nom as socname, u.firstname, u.lastname as lastname FROM llx_actioncomm as a  LEFT JOIN llx_c_actioncomm as c ON a.fk_action=c.id  LEFT JOIN llx_user as u on u.rowid = a.fk_user_author LEFT JOIN llx_societe as s on s.rowid = a.fk_soc WHERE  a.id=15
2017-05-05 14:52:23 DEBUG   ::1             --- End access to /dolibarr/compta/facture.php
2017-05-05 14:52:30 DEBUG   ::1             This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:52:30 DEBUG   ::1             User::fetch
2017-05-05 14:52:30 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:52:30 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:30 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:52:30 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:52:30 DEBUG   ::1             User::getrights
2017-05-05 14:52:30 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:52:30 DEBUG   ::1             User::getrights
2017-05-05 14:52:30 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:52:30 DEBUG   ::1             --- Access to /dolibarr/compta/paiement.php
2017-05-05 14:52:30 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:52:30 DEBUG   ::1             Menubase::menuLoad mymainmenu=accountancy myleftmenu=customers_bills type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:52:30 DEBUG   ::1             sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:52:30 DEBUG   ::1             Facture::fetch
2017-05-05 14:52:30 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:52:30 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:30 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:52:30 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:52:30 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:52:30 DEBUG   ::1             sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:52:30 DEBUG   ::1             useLocalTax
2017-05-05 14:52:31 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax1_type <> '0'
2017-05-05 14:52:31 DEBUG   ::1             useLocalTax
2017-05-05 14:52:31 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:52:31 DEBUG   ::1             Facture::fetch
2017-05-05 14:52:31 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:52:31 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:31 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:52:31 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:52:31 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:52:31 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:52:31 DEBUG   ::1             Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:52:31 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:31 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:52:31 DEBUG   ::1             Form::select_types_paiements LIQ, paiementcode, , 2
2017-05-05 14:52:31 DEBUG   ::1             Form::load_cache_types_paiements
2017-05-05 14:52:31 DEBUG   ::1             sql=SELECT id, code, libelle as label, type, active FROM llx_c_paiement
2017-05-05 14:52:31 DEBUG   ::1             Translate::getLabelFromKey
2017-05-05 14:52:31 DEBUG   ::1             sql=SELECT libelle as label FROM llx_c_paiement WHERE code = 'LCR'
2017-05-05 14:52:31 DEBUG   ::1             Form::select_comptes
2017-05-05 14:52:31 DEBUG   ::1             sql=SELECT rowid, label, bank, clos as status FROM llx_bank_account WHERE entity IN (1) AND clos = '0' ORDER BY label
2017-05-05 14:52:31 DEBUG   ::1             sql=SELECT f.rowid as facid, f.facnumber, f.total_ttc, f.multicurrency_total_ttc, f.type,  f.datef as df FROM llx_facture as f WHERE f.entity = 1 AND f.fk_soc = 3 AND f.paye = 0 AND f.fk_statut = 1 AND type IN (0,1,3,5) ORDER BY f.datef ASC, f.facnumber ASC
2017-05-05 14:52:31 DEBUG   ::1             Facture::fetch
2017-05-05 14:52:31 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=3
2017-05-05 14:52:31 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:31 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:52:31 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:52:31 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 3 ORDER BY l.rang, l.rowid
2017-05-05 14:52:31 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:52:31 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 3
2017-05-05 14:52:31 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:52:31 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 2
2017-05-05 14:52:31 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:52:31 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 3
2017-05-05 14:52:31 DEBUG   ::1             Translate::loadCacheCurrencies
2017-05-05 14:52:31 DEBUG   ::1             sql=SELECT code_iso, label, unicode FROM llx_c_currencies WHERE active = 1 AND code_iso = 'EUR'
2017-05-05 14:52:31 DEBUG   ::1             Facture::fetch
2017-05-05 14:52:31 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=6
2017-05-05 14:52:31 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:31 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:52:31 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:52:31 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 6 ORDER BY l.rang, l.rowid
2017-05-05 14:52:31 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:52:31 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 6
2017-05-05 14:52:31 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:52:31 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 2
2017-05-05 14:52:31 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:52:31 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 3
2017-05-05 14:52:31 DEBUG   ::1             Facture::fetch
2017-05-05 14:52:31 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:52:31 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:31 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:52:31 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:52:31 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:52:31 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:52:31 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:52:31 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:52:31 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 2
2017-05-05 14:52:31 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:52:31 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 3
2017-05-05 14:52:31 DEBUG   ::1             --- End access to /dolibarr/compta/paiement.php
2017-05-05 14:52:35 DEBUG   ::1             --- Access to /dolibarr/core/datepicker.php
2017-05-05 14:52:35 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:52:35 DEBUG   ::1             --- End access to /dolibarr/core/datepicker.php
2017-05-05 14:52:49 DEBUG   ::1             This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:52:49 DEBUG   ::1             User::fetch
2017-05-05 14:52:49 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:52:49 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:49 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:52:49 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:52:49 DEBUG   ::1             User::getrights
2017-05-05 14:52:49 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:52:49 DEBUG   ::1             User::getrights
2017-05-05 14:52:49 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:52:49 DEBUG   ::1             --- Access to /dolibarr/compta/paiement.php
2017-05-05 14:52:49 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:52:50 DEBUG   ::1             Menubase::menuLoad mymainmenu=accountancy myleftmenu=customers_bills type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:52:50 DEBUG   ::1             Facture::fetch
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:52:50 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:52:50 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:52:50 DEBUG   ::1             Facture::fetch
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=3
2017-05-05 14:52:50 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:52:50 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 3 ORDER BY l.rang, l.rowid
2017-05-05 14:52:50 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 3
2017-05-05 14:52:50 DEBUG   ::1             Facture::fetch
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=6
2017-05-05 14:52:50 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:52:50 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 6 ORDER BY l.rang, l.rowid
2017-05-05 14:52:50 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 6
2017-05-05 14:52:50 DEBUG   ::1             Facture::fetch
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:52:50 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:52:50 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:52:50 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:52:50 DEBUG   ::1             useLocalTax
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax1_type <> '0'
2017-05-05 14:52:50 DEBUG   ::1             useLocalTax
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:52:50 DEBUG   ::1             Facture::fetch
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:52:50 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:52:50 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:52:50 DEBUG   ::1             Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:52:50 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:52:50 DEBUG   ::1             Form::select_types_paiements LIQ, paiementcode, , 2
2017-05-05 14:52:50 DEBUG   ::1             Form::load_cache_types_paiements
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT id, code, libelle as label, type, active FROM llx_c_paiement
2017-05-05 14:52:50 DEBUG   ::1             Translate::getLabelFromKey
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT libelle as label FROM llx_c_paiement WHERE code = 'LCR'
2017-05-05 14:52:50 DEBUG   ::1             Form::select_comptes
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT rowid, label, bank, clos as status FROM llx_bank_account WHERE entity IN (1) AND clos = '0' ORDER BY label
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT f.rowid as facid, f.facnumber, f.total_ttc, f.multicurrency_total_ttc, f.type,  f.datef as df FROM llx_facture as f WHERE f.entity = 1 AND f.fk_soc = 3 AND f.paye = 0 AND f.fk_statut = 1 AND type IN (0,1,3,5) ORDER BY f.datef ASC, f.facnumber ASC
2017-05-05 14:52:50 DEBUG   ::1             Facture::fetch
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=3
2017-05-05 14:52:50 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:52:50 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 3 ORDER BY l.rang, l.rowid
2017-05-05 14:52:50 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 3
2017-05-05 14:52:50 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 2
2017-05-05 14:52:50 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 3
2017-05-05 14:52:50 DEBUG   ::1             Translate::loadCacheCurrencies
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT code_iso, label, unicode FROM llx_c_currencies WHERE active = 1 AND code_iso = 'EUR'
2017-05-05 14:52:50 DEBUG   ::1             Facture::fetch
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=6
2017-05-05 14:52:50 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:52:50 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 6 ORDER BY l.rang, l.rowid
2017-05-05 14:52:50 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 6
2017-05-05 14:52:50 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 2
2017-05-05 14:52:50 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 3
2017-05-05 14:52:50 DEBUG   ::1             Facture::fetch
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:52:50 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:52:50 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:52:50 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:52:50 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 2
2017-05-05 14:52:50 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:52:50 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 3
2017-05-05 14:52:50 DEBUG   ::1             --- End access to /dolibarr/compta/paiement.php
2017-05-05 14:53:03 DEBUG   ::1             This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:53:03 DEBUG   ::1             User::fetch
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:53:03 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:53:03 DEBUG   ::1             User::getrights
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:53:03 DEBUG   ::1             User::getrights
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:53:03 DEBUG   ::1             --- Access to /dolibarr/compta/paiement.php
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:53:03 DEBUG   ::1             Menubase::menuLoad mymainmenu=accountancy myleftmenu=customers_bills type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:53:03 DEBUG   ::1             Facture::fetch
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:53:03 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:03 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:53:03 DEBUG   ::1             Facture::fetch
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=3
2017-05-05 14:53:03 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:03 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 3 ORDER BY l.rang, l.rowid
2017-05-05 14:53:03 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 3
2017-05-05 14:53:03 DEBUG   ::1             Facture::fetch
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=6
2017-05-05 14:53:03 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:03 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 6 ORDER BY l.rang, l.rowid
2017-05-05 14:53:03 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 6
2017-05-05 14:53:03 DEBUG   ::1             Facture::fetch
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:53:03 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:03 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:53:03 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:53:03 DEBUG   ::1             useLocalTax
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax1_type <> '0'
2017-05-05 14:53:03 DEBUG   ::1             useLocalTax
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:53:03 DEBUG   ::1             Facture::fetch
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:53:03 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:03 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:53:03 DEBUG   ::1             Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:53:03 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:53:03 DEBUG   ::1             Form::select_types_paiements LIQ, paiementcode, , 2
2017-05-05 14:53:03 DEBUG   ::1             Form::load_cache_types_paiements
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT id, code, libelle as label, type, active FROM llx_c_paiement
2017-05-05 14:53:03 DEBUG   ::1             Translate::getLabelFromKey
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT libelle as label FROM llx_c_paiement WHERE code = 'LCR'
2017-05-05 14:53:03 DEBUG   ::1             Form::select_comptes
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT rowid, label, bank, clos as status FROM llx_bank_account WHERE entity IN (1) AND clos = '0' ORDER BY label
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT f.rowid as facid, f.facnumber, f.total_ttc, f.multicurrency_total_ttc, f.type,  f.datef as df FROM llx_facture as f WHERE f.entity = 1 AND f.fk_soc = 3 AND f.paye = 0 AND f.fk_statut = 1 AND type IN (0,1,3,5) ORDER BY f.datef ASC, f.facnumber ASC
2017-05-05 14:53:03 DEBUG   ::1             Facture::fetch
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=3
2017-05-05 14:53:03 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:03 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 3 ORDER BY l.rang, l.rowid
2017-05-05 14:53:03 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:53:03 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 3
2017-05-05 14:53:04 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:53:04 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 2
2017-05-05 14:53:04 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:53:04 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 3
2017-05-05 14:53:04 DEBUG   ::1             Translate::loadCacheCurrencies
2017-05-05 14:53:04 DEBUG   ::1             sql=SELECT code_iso, label, unicode FROM llx_c_currencies WHERE active = 1 AND code_iso = 'EUR'
2017-05-05 14:53:04 DEBUG   ::1             Facture::fetch
2017-05-05 14:53:04 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=6
2017-05-05 14:53:04 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:04 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:04 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:53:04 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 6 ORDER BY l.rang, l.rowid
2017-05-05 14:53:04 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:53:04 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 6
2017-05-05 14:53:04 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:53:04 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 2
2017-05-05 14:53:04 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:53:04 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 3
2017-05-05 14:53:04 DEBUG   ::1             Facture::fetch
2017-05-05 14:53:04 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:53:04 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:04 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:04 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:53:04 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:53:04 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:53:04 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:53:04 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:53:04 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 2
2017-05-05 14:53:04 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:53:04 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 3
2017-05-05 14:53:04 DEBUG   ::1             --- End access to /dolibarr/compta/paiement.php
2017-05-05 14:53:08 DEBUG   ::1             This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:53:08 DEBUG   ::1             User::fetch
2017-05-05 14:53:08 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:53:08 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:08 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:53:08 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:53:08 DEBUG   ::1             User::getrights
2017-05-05 14:53:08 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:53:08 DEBUG   ::1             User::getrights
2017-05-05 14:53:08 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:53:08 DEBUG   ::1             --- Access to /dolibarr/compta/paiement.php
2017-05-05 14:53:08 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:53:08 DEBUG   ::1             Menubase::menuLoad mymainmenu=accountancy myleftmenu=customers_bills type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:53:08 DEBUG   ::1             sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:53:08 DEBUG   ::1             Facture::fetch
2017-05-05 14:53:08 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:53:08 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:08 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:08 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:53:08 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:53:08 DEBUG   ::1             Facture::fetch
2017-05-05 14:53:08 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=3
2017-05-05 14:53:08 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:08 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:08 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:53:08 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 3 ORDER BY l.rang, l.rowid
2017-05-05 14:53:08 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:53:08 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 3
2017-05-05 14:53:08 DEBUG   ::1             Facture::fetch
2017-05-05 14:53:08 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=6
2017-05-05 14:53:08 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:08 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:08 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:53:08 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 6 ORDER BY l.rang, l.rowid
2017-05-05 14:53:08 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:53:08 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 6
2017-05-05 14:53:08 DEBUG   ::1             Facture::fetch
2017-05-05 14:53:08 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:53:08 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:08 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:08 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:53:08 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:53:08 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:53:08 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:53:08 DEBUG   ::1             BEGIN Transaction
2017-05-05 14:53:08 DEBUG   ::1              dol_getIdFromCode
2017-05-05 14:53:08 DEBUG   ::1              sql=SELECT id as valuetoget FROM llx_c_paiement WHERE code = 'LIQ'
2017-05-05 14:53:08 DEBUG   ::1              MultiCurrency::getInvoiceRate
2017-05-05 14:53:08 DEBUG   ::1              sql=SELECT multicurrency_tx FROM llx_facture WHERE rowid = 3
2017-05-05 14:53:08 DEBUG   ::1              MultiCurrency::getInvoiceRate
2017-05-05 14:53:08 DEBUG   ::1              sql=SELECT multicurrency_tx FROM llx_facture WHERE rowid = 6
2017-05-05 14:53:08 DEBUG   ::1              MultiCurrency::getInvoiceRate
2017-05-05 14:53:08 DEBUG   ::1              sql=SELECT multicurrency_tx FROM llx_facture WHERE rowid = 7
2017-05-05 14:53:08 DEBUG   ::1               sql=SELECT MAX(CAST(SUBSTRING(ref FROM 9) AS SIGNED)) as max FROM llx_paiement WHERE ref like 'PAY____-%' AND entity = 1
2017-05-05 14:53:08 DEBUG   ::1               mod_payment_cicada::getNextValue return PAY1705-0002
2017-05-05 14:53:08 DEBUG   ::1               Paiement::Create insert paiement
2017-05-05 14:53:08 DEBUG   ::1               sql=INSERT INTO llx_paiement (entity, ref, datec, datep, amount, multicurrency_amount, fk_paiement, num_paiement, note, fk_user_creat) VALUES (1, 'PAY1705-0002', '20170505145308', '20170505120000', '49', '49', 4, '', '', 1)
2017-05-05 14:53:08 DEBUG   ::1               Paiement::Create Amount line 3 not a number. We discard it.
2017-05-05 14:53:08 DEBUG   ::1               Paiement::Create Amount line 6 not a number. We discard it.
2017-05-05 14:53:08 DEBUG   ::1               Paiement::Create Amount line 7 insert paiement_facture
2017-05-05 14:53:08 DEBUG   ::1               sql=INSERT INTO llx_paiement_facture (fk_facture, fk_paiement, amount, multicurrency_amount) VALUES (7, 2, '49', '49')
2017-05-05 14:53:08 DEBUG   ::1               Facture::fetch
2017-05-05 14:53:08 DEBUG   ::1               sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:53:08 DEBUG   ::1               ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:08 DEBUG   ::1               sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:08 DEBUG   ::1               Facture::fetch_lines
2017-05-05 14:53:08 DEBUG   ::1               sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:53:08 DEBUG   ::1               Facture::getSommePaiement
2017-05-05 14:53:08 DEBUG   ::1               sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:53:08 DEBUG   ::1               DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:53:08 DEBUG   ::1               sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 2
2017-05-05 14:53:09 DEBUG   ::1               DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:53:09 DEBUG   ::1               sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 3
2017-05-05 14:53:09 DEBUG   ::1               Facture::getListOfPayments
2017-05-05 14:53:09 DEBUG   ::1               sql=SELECT pf.amount, pf.multicurrency_amount, p.fk_paiement, p.datep, p.num_paiement as num, t.code FROM llx_paiement_facture as pf, llx_paiement as p, llx_c_paiement as t WHERE pf.fk_facture = 7 AND pf.fk_paiement = p.rowid AND p.fk_paiement = t.id
2017-05-05 14:53:09 DEBUG   ::1               Remain to pay for invoice 7 not null. We do nothing more.
2017-05-05 14:53:09 DEBUG   ::1               Interfaces::run_triggers action=PAYMENT_CUSTOMER_CREATE Triggers for file 'interface_20_modPaypal_PaypalWorkflow.class.php' need module to be enabled
2017-05-05 14:53:09 DEBUG   ::1               Interfaces::run_triggers action=PAYMENT_CUSTOMER_CREATE Launch runTrigger for file 'interface_20_all_Logevents.class.php'
2017-05-05 14:53:09 DEBUG   ::1               Interfaces::run_triggers action=PAYMENT_CUSTOMER_CREATE Launch runTrigger for file 'interface_20_modWorkflow_WorkflowManager.class.php'
2017-05-05 14:53:09 DEBUG   ::1               Interfaces::run_triggers action=PAYMENT_CUSTOMER_CREATE Launch runTrigger for file 'interface_50_modAgenda_ActionsAuto.class.php'
2017-05-05 14:53:09 DEBUG   ::1               Interfaces::run_triggers action=PAYMENT_CUSTOMER_CREATE Launch runTrigger for file 'interface_50_modLdap_Ldapsynchro.class.php'
2017-05-05 14:53:09 DEBUG   ::1               Interfaces::run_triggers action=PAYMENT_CUSTOMER_CREATE Launch runTrigger for file 'interface_50_modMailmanspip_Mailmanspipsynchro.class.php'
2017-05-05 14:53:09 DEBUG   ::1               Interfaces::run_triggers action=PAYMENT_CUSTOMER_CREATE Launch runTrigger for file 'interface_50_modNotification_Notification.class.php'
2017-05-05 14:53:09 DEBUG   ::1               Trigger 'Notification' for action 'PAYMENT_CUSTOMER_CREATE' launched by C:\dolibarr\www\dolibarr\htdocs\core\triggers\interface_50_modNotification_Notification.class.php. id=2
2017-05-05 14:53:09 DEBUG   ::1               Notify::send notifcode=PAYMENT_CUSTOMER_CREATE, object=2
2017-05-05 14:53:09 DEBUG   ::1               1,payment,(CustomerInvoicePayment),1,,
2017-05-05 14:53:09 DEBUG   ::1               Account::fetch
2017-05-05 14:53:09 DEBUG   ::1               sql=SELECT ba.rowid, ba.ref, ba.label, ba.bank, ba.number, ba.courant, ba.clos, ba.rappro, ba.url, ba.code_banque, ba.code_guichet, ba.cle_rib, ba.bic, ba.iban_prefix as iban, ba.domiciliation, ba.proprio, ba.owner_address, ba.state_id, ba.fk_pays as country_id, ba.account_number, ba.accountancy_journal, ba.currency_code, ba.min_allowed, ba.min_desired, ba.comment, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_bank_account as ba LEFT JOIN llx_c_country as c ON ba.fk_pays = c.rowid LEFT JOIN llx_c_departements as d ON ba.state_id = d.rowid WHERE entity IN (1) AND ba.rowid  = 1
2017-05-05 14:53:09 DEBUG   ::1               ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:09 DEBUG   ::1               sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'bank_account' ORDER BY pos
2017-05-05 14:53:09 WARNING ::1               Account::addline: using numeric operations is deprecated
2017-05-05 14:53:09 DEBUG   ::1               sql=SELECT code FROM llx_c_paiement WHERE id=4
2017-05-05 14:53:09 DEBUG   ::1                AccountLine::insert
2017-05-05 14:53:09 DEBUG   ::1                sql=INSERT INTO llx_bank (datec, dateo, datev, label, amount, fk_user_author, num_chq, fk_account, fk_type,emetteur,banque, rappro) VALUES ('20170505145309', '20170505120000', '20170505120000', '(CustomerInvoicePayment)', 49, '1', null, '1', 'LIQ', null, null, 0)
2017-05-05 14:53:09 DEBUG   ::1               Paiement::update_fk_bank
2017-05-05 14:53:09 DEBUG   ::1               sql=UPDATE llx_paiement set fk_bank = 3 WHERE rowid = 2
2017-05-05 14:53:09 DEBUG   ::1               Account::add_url_line
2017-05-05 14:53:09 DEBUG   ::1               sql=INSERT INTO llx_bank_url (fk_bank, url_id, url, label, type) VALUES ('3', '2', '/dolibarr/compta/paiement/card.php?id=', '(paiement)', 'payment')
2017-05-05 14:53:09 DEBUG   ::1               Facture::fetch
2017-05-05 14:53:09 DEBUG   ::1               sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=3
2017-05-05 14:53:09 DEBUG   ::1               ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:09 DEBUG   ::1               sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:09 DEBUG   ::1               Facture::fetch_lines
2017-05-05 14:53:09 DEBUG   ::1               sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 3 ORDER BY l.rang, l.rowid
2017-05-05 14:53:09 DEBUG   ::1               sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:53:09 DEBUG   ::1               Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:53:09 DEBUG   ::1               ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:09 DEBUG   ::1               sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:53:09 DEBUG   ::1               Account::add_url_line
2017-05-05 14:53:09 DEBUG   ::1               sql=INSERT INTO llx_bank_url (fk_bank, url_id, url, label, type) VALUES ('3', '3', '/dolibarr/comm/card.php?socid=', 'arnau cahors', 'company')
2017-05-05 14:53:09 DEBUG   ::1               Facture::fetch
2017-05-05 14:53:09 DEBUG   ::1               sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=6
2017-05-05 14:53:09 DEBUG   ::1               ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:09 DEBUG   ::1               sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:09 DEBUG   ::1               Facture::fetch_lines
2017-05-05 14:53:09 DEBUG   ::1               sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 6 ORDER BY l.rang, l.rowid
2017-05-05 14:53:09 DEBUG   ::1               sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:53:09 DEBUG   ::1               Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:53:09 DEBUG   ::1               ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:09 DEBUG   ::1               sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:53:09 DEBUG   ::1               Facture::fetch
2017-05-05 14:53:09 DEBUG   ::1               sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:53:09 DEBUG   ::1               ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:09 DEBUG   ::1               sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:09 DEBUG   ::1               Facture::fetch_lines
2017-05-05 14:53:09 DEBUG   ::1               sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:53:09 DEBUG   ::1               sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:53:09 DEBUG   ::1               Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:53:09 DEBUG   ::1               ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:09 DEBUG   ::1               sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:53:09 DEBUG   ::1               Interfaces::run_triggers action=PAYMENT_ADD_TO_BANK Triggers for file 'interface_20_modPaypal_PaypalWorkflow.class.php' need module to be enabled
2017-05-05 14:53:09 DEBUG   ::1               Interfaces::run_triggers action=PAYMENT_ADD_TO_BANK Launch runTrigger for file 'interface_20_all_Logevents.class.php'
2017-05-05 14:53:09 DEBUG   ::1               Interfaces::run_triggers action=PAYMENT_ADD_TO_BANK Launch runTrigger for file 'interface_20_modWorkflow_WorkflowManager.class.php'
2017-05-05 14:53:09 DEBUG   ::1               Interfaces::run_triggers action=PAYMENT_ADD_TO_BANK Launch runTrigger for file 'interface_50_modAgenda_ActionsAuto.class.php'
2017-05-05 14:53:09 DEBUG   ::1               Interfaces::run_triggers action=PAYMENT_ADD_TO_BANK Launch runTrigger for file 'interface_50_modLdap_Ldapsynchro.class.php'
2017-05-05 14:53:09 DEBUG   ::1               Interfaces::run_triggers action=PAYMENT_ADD_TO_BANK Launch runTrigger for file 'interface_50_modMailmanspip_Mailmanspipsynchro.class.php'
2017-05-05 14:53:09 DEBUG   ::1               Interfaces::run_triggers action=PAYMENT_ADD_TO_BANK Launch runTrigger for file 'interface_50_modNotification_Notification.class.php'
2017-05-05 14:53:09 DEBUG   ::1               Trigger 'Notification' for action 'PAYMENT_ADD_TO_BANK' launched by C:\dolibarr\www\dolibarr\htdocs\core\triggers\interface_50_modNotification_Notification.class.php. id=2
2017-05-05 14:53:09 DEBUG   ::1               Notify::send notifcode=PAYMENT_ADD_TO_BANK, object=2
2017-05-05 14:53:09 DEBUG   ::1             COMMIT Transaction
2017-05-05 14:53:09 DEBUG   ::1             --- End access to /dolibarr/compta/paiement.php
2017-05-05 14:53:10 DEBUG   ::1             This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:53:10 DEBUG   ::1             User::fetch
2017-05-05 14:53:10 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:53:10 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:10 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:53:10 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:53:10 DEBUG   ::1             User::getrights
2017-05-05 14:53:10 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:53:10 DEBUG   ::1             User::getrights
2017-05-05 14:53:10 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:53:10 DEBUG   ::1             --- Access to /dolibarr/compta/facture.php
2017-05-05 14:53:10 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:53:10 DEBUG   ::1             Menubase::menuLoad mymainmenu=accountancy myleftmenu=customers_bills type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:53:10 DEBUG   ::1             sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:53:10 DEBUG   ::1             Facture::fetch
2017-05-05 14:53:10 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:53:10 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:10 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:10 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:53:10 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:53:11 DEBUG   ::1             useLocalTax
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax1_type <> '0'
2017-05-05 14:53:11 DEBUG   ::1             useLocalTax
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:53:11 DEBUG   ::1             Facture::fetch
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:53:11 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:11 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:53:11 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:53:11 DEBUG   ::1             Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:53:11 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:53:11 DEBUG   ::1             Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:53:11 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:53:11 DEBUG   ::1             useRevenueStamp
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT COUNT(*) as nb FROM llx_c_revenuestamp as r, llx_c_country as c WHERE r.fk_pays = c.rowid AND c.code = 'ES' AND r.active = 1
2017-05-05 14:53:11 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:53:11 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 2
2017-05-05 14:53:11 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 3
2017-05-05 14:53:11 DEBUG   ::1             DiscountAbsolute::getAvailableDiscounts
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT SUM(rc.amount_ttc) as amount FROM llx_societe_remise_except as rc WHERE (rc.fk_facture IS NULL AND rc.fk_facture_line IS NULL) AND rc.fk_soc = 3 AND (fk_facture_source IS NULL OR (fk_facture_source IS NOT NULL AND description LIKE '(DEPOSIT)%'))
2017-05-05 14:53:11 DEBUG   ::1             DiscountAbsolute::getAvailableDiscounts
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT SUM(rc.amount_ttc) as amount FROM llx_societe_remise_except as rc WHERE (rc.fk_facture IS NULL AND rc.fk_facture_line IS NULL) AND rc.fk_soc = 3 AND (fk_facture_source IS NOT NULL AND description NOT LIKE '(DEPOSIT)%')
2017-05-05 14:53:11 DEBUG   ::1             User::fetch
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.rowid = 1
2017-05-05 14:53:11 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 7 AND type < 2 ORDER BY fk_statut DESC
2017-05-05 14:53:11 DEBUG   ::1             Facture::liste_contact
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT ec.rowid, ec.statut as statuslink, ec.fk_socpeople as id, ec.fk_c_type_contact, '-1' as socid, t.statut as statuscontact, t.civility as civility, t.lastname as lastname, t.firstname, t.email, tc.source, tc.element, tc.code, tc.libelle FROM llx_c_type_contact tc, llx_element_contact ec LEFT JOIN llx_user t on ec.fk_socpeople = t.rowid WHERE ec.element_id =7 AND ec.fk_c_type_contact=tc.rowid AND tc.element='facture' AND tc.source = 'internal' AND tc.active=1 ORDER BY t.lastname ASC
2017-05-05 14:53:11 DEBUG   ::1             Facture::liste_contact
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT ec.rowid, ec.statut as statuslink, ec.fk_socpeople as id, ec.fk_c_type_contact, t.fk_soc as socid, t.statut as statuscontact, t.civility as civility, t.lastname as lastname, t.firstname, t.email, tc.source, tc.element, tc.code, tc.libelle FROM llx_c_type_contact tc, llx_element_contact ec LEFT JOIN llx_socpeople t on ec.fk_socpeople = t.rowid WHERE ec.element_id =7 AND ec.fk_c_type_contact=tc.rowid AND tc.element='facture' AND tc.source = 'external' AND tc.active=1 ORDER BY t.lastname ASC
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT COUNT(pfd.rowid) as nb FROM llx_prelevement_facture_demande as pfd WHERE pfd.fk_facture = 7
2017-05-05 14:53:11 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1705-0005 types=files recursive=0 filter= excludefilter="(\\.meta|_preview\\.png)$"
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT COUNT(rowid) as nb FROM llx_links WHERE objecttype = 'facture' AND objectid = 7 AND entity = 1
2017-05-05 14:53:11 DEBUG   ::1             DiscountAbsolute::fetch
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT sr.rowid, sr.fk_soc, sr.fk_user, sr.amount_ht, sr.amount_tva, sr.amount_ttc, sr.tva_tx, sr.fk_facture_line, sr.fk_facture, sr.fk_facture_source, sr.description, sr.datec, f.facnumber as ref_facture_source FROM llx_societe_remise_except as sr LEFT JOIN llx_facture as f ON sr.fk_facture_source = f.rowid WHERE sr.fk_facture_source=7
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT MAX(te.facnumber) FROM llx_facture as te WHERE te.facnumber < 'FA1705-0005' AND te.entity IN (1)
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT MIN(te.facnumber) FROM llx_facture as te WHERE te.facnumber > 'FA1705-0005' AND te.entity IN (1)
2017-05-05 14:53:11 DEBUG   ::1             get_OutstandingBill
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT rowid, total_ttc FROM llx_facture as f WHERE fk_soc = 3 AND paye = 0 AND fk_statut <> 0 AND fk_statut <> 3 AND fk_statut <> 2
2017-05-05 14:53:11 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 3
2017-05-05 14:53:11 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 2
2017-05-05 14:53:11 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 3
2017-05-05 14:53:11 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 4
2017-05-05 14:53:11 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 4 AND f.type = 2
2017-05-05 14:53:11 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 4 AND f.type = 3
2017-05-05 14:53:11 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 6
2017-05-05 14:53:11 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 2
2017-05-05 14:53:11 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 3
2017-05-05 14:53:11 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:53:11 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 2
2017-05-05 14:53:11 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 3
2017-05-05 14:53:11 DEBUG   ::1             Translate::loadCacheCurrencies
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT code_iso, label, unicode FROM llx_c_currencies WHERE active = 1 AND code_iso = 'EUR'
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 7 AND type = 2
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT p.datep as dp, p.ref, p.num_paiement, p.rowid, p.fk_bank, c.code as payment_code, c.libelle as payment_label, pf.amount, ba.rowid as baid, ba.ref as baref, ba.label FROM llx_c_paiement as c, llx_paiement_facture as pf, llx_paiement as p LEFT JOIN llx_bank as b ON p.fk_bank = b.rowid LEFT JOIN llx_bank_account as ba ON b.fk_account = ba.rowid WHERE pf.fk_facture = 7 AND p.fk_paiement = c.id AND pf.fk_paiement = p.rowid ORDER BY p.datep, p.tms
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT fk_facture FROM llx_paiement_facture as pf, llx_facture as f WHERE pf.fk_facture = f.rowid AND fk_paiement = 2
2017-05-05 14:53:11 DEBUG   ::1             Facture::fetch
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:53:11 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:11 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT re.rowid, re.amount_ht, re.amount_tva, re.amount_ttc, re.description, re.fk_facture_source FROM llx_societe_remise_except as re WHERE fk_facture = 7
2017-05-05 14:53:11 DEBUG   ::1             Form::load_cache_conditions_paiements
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT rowid, code, libelle as label FROM llx_c_payment_term WHERE active > 0 ORDER BY sortorder
2017-05-05 14:53:11 DEBUG   ::1             Form::load_cache_types_paiements
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT id, code, libelle as label, type, active FROM llx_c_paiement
2017-05-05 14:53:11 DEBUG   ::1             Translate::getLabelFromKey
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT libelle as label FROM llx_c_paiement WHERE code = 'LCR'
2017-05-05 14:53:11 DEBUG   ::1             Account::fetch
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT ba.rowid, ba.ref, ba.label, ba.bank, ba.number, ba.courant, ba.clos, ba.rappro, ba.url, ba.code_banque, ba.code_guichet, ba.cle_rib, ba.bic, ba.iban_prefix as iban, ba.domiciliation, ba.proprio, ba.owner_address, ba.state_id, ba.fk_pays as country_id, ba.account_number, ba.accountancy_journal, ba.currency_code, ba.min_allowed, ba.min_desired, ba.comment, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_bank_account as ba LEFT JOIN llx_c_country as c ON ba.fk_pays = c.rowid LEFT JOIN llx_c_departements as d ON ba.state_id = d.rowid WHERE entity IN (1) AND ba.rowid  = 1
2017-05-05 14:53:11 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'bank_account' ORDER BY pos
2017-05-05 14:53:11 DEBUG   ::1             useLocalTax
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:53:11 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:53:11 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facturedet' ORDER BY pos
2017-05-05 14:53:11 DEBUG   ::1             Product::fetch id=1 ref= ref_ext=
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT rowid, ref, ref_ext, label, description, url, note, customcode, fk_country, price, price_ttc, price_min, price_min_ttc, price_base_type, cost_price, default_vat_code, tva_tx, recuperableonly as tva_npr, localtax1_tx, localtax2_tx, localtax1_type, localtax2_type, tosell, tobuy, fk_product_type, duration, seuil_stock_alerte, canvas, weight, weight_units, length, length_units, surface, surface_units, volume, volume_units, barcode, fk_barcode_type, finished, accountancy_code_buy, accountancy_code_sell, stock, pmp, datec, tms, import_key, entity, desiredstock, tobatch, fk_unit, fk_price_expression, price_autogen FROM llx_product WHERE rowid = 1
2017-05-05 14:53:11 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'product' ORDER BY pos
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT MAX(CAST(SUBSTRING(facnumber FROM 8) AS SIGNED)) as max FROM llx_facture WHERE facnumber LIKE 'FA____-%' AND entity IN (1)
2017-05-05 14:53:11 DEBUG   ::1             mod_facture_terre::getNextValue
2017-05-05 14:53:11 DEBUG   ::1             mod_facture_terre::getNextValue
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT facnumber as ref FROM llx_facture WHERE facnumber LIKE 'FA____-0005' AND entity IN (1)
2017-05-05 14:53:11 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:53:11 DEBUG   ::1             /core/lib/function2.lib.php::getListOfModels
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT nom as id, nom as lib, libelle as label, description as description FROM llx_document_model WHERE type = 'invoice' AND entity IN (0,1) ORDER BY description DESC
2017-05-05 14:53:11 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1705-0005 types=files recursive=0 filter= excludefilter="(\\.meta|_preview\\.png)$"
2017-05-05 14:53:11 DEBUG   ::1             Facture::fetchObjectLink
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT rowid, fk_source, sourcetype, fk_target, targettype FROM llx_element_element WHERE (fk_source = '7' AND sourcetype = 'facture') OR (fk_target = '7' AND targettype = 'facture') ORDER BY sourcetype
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT s.rowid as socid, s.nom as name, s.client, c.rowid, c.ref, c.ref_client, c.total_ht FROM llx_societe as s, llx_commande as c WHERE c.fk_soc = s.rowid AND c.fk_soc = 3
2017-05-05 14:53:11 DEBUG   ::1             ActionComm::getActions
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT a.id FROM llx_actioncomm as a WHERE a.entity IN (1) AND a.fk_element = 7 AND a.elementtype = 'invoice'
2017-05-05 14:53:11 DEBUG   ::1             ActionComm::fetch
2017-05-05 14:53:11 DEBUG   ::1             sql=SELECT a.id, a.id as ref, a.ref_ext, a.datep, a.datep2, a.durationp, a.datec, a.tms as datem, a.code, a.label, a.note, a.fk_soc, a.fk_project, a.fk_user_author, a.fk_user_mod, a.fk_user_action, a.fk_user_done, a.fk_contact, a.percent as percentage, a.fk_element, a.elementtype, a.priority, a.fulldayevent, a.location, a.punctual, a.transparency, c.id as type_id, c.code as type_code, c.libelle, s.nom as socname, u.firstname, u.lastname as lastname FROM llx_actioncomm as a  LEFT JOIN llx_c_actioncomm as c ON a.fk_action=c.id  LEFT JOIN llx_user as u on u.rowid = a.fk_user_author LEFT JOIN llx_societe as s on s.rowid = a.fk_soc WHERE  a.id=15
2017-05-05 14:53:11 DEBUG   ::1             --- End access to /dolibarr/compta/facture.php
2017-05-05 14:53:17 DEBUG   ::1             This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:53:17 DEBUG   ::1             User::fetch
2017-05-05 14:53:17 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:53:17 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:17 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:53:17 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:53:17 DEBUG   ::1             User::getrights
2017-05-05 14:53:17 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:53:17 DEBUG   ::1             User::getrights
2017-05-05 14:53:17 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:53:17 DEBUG   ::1             --- Access to /dolibarr/compta/paiement.php
2017-05-05 14:53:17 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:53:17 DEBUG   ::1             Menubase::menuLoad mymainmenu=accountancy myleftmenu=customers_bills type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:53:17 DEBUG   ::1             sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:53:18 DEBUG   ::1             Facture::fetch
2017-05-05 14:53:18 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:53:18 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:18 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:18 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:53:18 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:53:18 DEBUG   ::1             sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:53:18 DEBUG   ::1             useLocalTax
2017-05-05 14:53:18 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax1_type <> '0'
2017-05-05 14:53:18 DEBUG   ::1             useLocalTax
2017-05-05 14:53:18 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:53:18 DEBUG   ::1             Facture::fetch
2017-05-05 14:53:18 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:53:18 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:18 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:18 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:53:18 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:53:18 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:53:18 DEBUG   ::1             Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:53:18 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:18 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:53:18 DEBUG   ::1             Form::select_types_paiements LIQ, paiementcode, , 2
2017-05-05 14:53:18 DEBUG   ::1             Form::load_cache_types_paiements
2017-05-05 14:53:18 DEBUG   ::1             sql=SELECT id, code, libelle as label, type, active FROM llx_c_paiement
2017-05-05 14:53:18 DEBUG   ::1             Translate::getLabelFromKey
2017-05-05 14:53:18 DEBUG   ::1             sql=SELECT libelle as label FROM llx_c_paiement WHERE code = 'LCR'
2017-05-05 14:53:18 DEBUG   ::1             Form::select_comptes
2017-05-05 14:53:18 DEBUG   ::1             sql=SELECT rowid, label, bank, clos as status FROM llx_bank_account WHERE entity IN (1) AND clos = '0' ORDER BY label
2017-05-05 14:53:18 DEBUG   ::1             sql=SELECT f.rowid as facid, f.facnumber, f.total_ttc, f.multicurrency_total_ttc, f.type,  f.datef as df FROM llx_facture as f WHERE f.entity = 1 AND f.fk_soc = 3 AND f.paye = 0 AND f.fk_statut = 1 AND type IN (0,1,3,5) ORDER BY f.datef ASC, f.facnumber ASC
2017-05-05 14:53:18 DEBUG   ::1             Facture::fetch
2017-05-05 14:53:18 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=3
2017-05-05 14:53:18 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:18 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:18 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:53:18 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 3 ORDER BY l.rang, l.rowid
2017-05-05 14:53:18 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:53:18 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 3
2017-05-05 14:53:18 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:53:18 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 2
2017-05-05 14:53:18 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:53:18 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 3
2017-05-05 14:53:18 DEBUG   ::1             Translate::loadCacheCurrencies
2017-05-05 14:53:18 DEBUG   ::1             sql=SELECT code_iso, label, unicode FROM llx_c_currencies WHERE active = 1 AND code_iso = 'EUR'
2017-05-05 14:53:18 DEBUG   ::1             Facture::fetch
2017-05-05 14:53:18 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=6
2017-05-05 14:53:18 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:18 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:18 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:53:18 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 6 ORDER BY l.rang, l.rowid
2017-05-05 14:53:18 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:53:18 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 6
2017-05-05 14:53:18 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:53:18 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 2
2017-05-05 14:53:18 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:53:18 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 3
2017-05-05 14:53:18 DEBUG   ::1             Facture::fetch
2017-05-05 14:53:18 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:53:18 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:18 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:18 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:53:18 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:53:18 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:53:18 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:53:18 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:53:18 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 2
2017-05-05 14:53:18 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:53:18 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 3
2017-05-05 14:53:18 DEBUG   ::1             --- End access to /dolibarr/compta/paiement.php
2017-05-05 14:53:21 DEBUG   ::1             This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:53:21 DEBUG   ::1             User::fetch
2017-05-05 14:53:21 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:53:21 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:21 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:53:21 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:53:21 DEBUG   ::1             User::getrights
2017-05-05 14:53:21 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:53:21 DEBUG   ::1             User::getrights
2017-05-05 14:53:21 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:53:21 DEBUG   ::1             --- Access to /dolibarr/compta/facture.php
2017-05-05 14:53:21 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:53:21 DEBUG   ::1             Menubase::menuLoad mymainmenu=accountancy myleftmenu=customers_bills type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:53:21 DEBUG   ::1             sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:53:22 DEBUG   ::1             Facture::fetch
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:53:22 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:22 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:53:22 DEBUG   ::1             useLocalTax
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax1_type <> '0'
2017-05-05 14:53:22 DEBUG   ::1             useLocalTax
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:53:22 DEBUG   ::1             Facture::fetch
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:53:22 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:22 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:53:22 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:53:22 DEBUG   ::1             Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:53:22 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:53:22 DEBUG   ::1             Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:53:22 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:53:22 DEBUG   ::1             useRevenueStamp
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT COUNT(*) as nb FROM llx_c_revenuestamp as r, llx_c_country as c WHERE r.fk_pays = c.rowid AND c.code = 'ES' AND r.active = 1
2017-05-05 14:53:22 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:53:22 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 2
2017-05-05 14:53:22 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 3
2017-05-05 14:53:22 DEBUG   ::1             DiscountAbsolute::getAvailableDiscounts
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT SUM(rc.amount_ttc) as amount FROM llx_societe_remise_except as rc WHERE (rc.fk_facture IS NULL AND rc.fk_facture_line IS NULL) AND rc.fk_soc = 3 AND (fk_facture_source IS NULL OR (fk_facture_source IS NOT NULL AND description LIKE '(DEPOSIT)%'))
2017-05-05 14:53:22 DEBUG   ::1             DiscountAbsolute::getAvailableDiscounts
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT SUM(rc.amount_ttc) as amount FROM llx_societe_remise_except as rc WHERE (rc.fk_facture IS NULL AND rc.fk_facture_line IS NULL) AND rc.fk_soc = 3 AND (fk_facture_source IS NOT NULL AND description NOT LIKE '(DEPOSIT)%')
2017-05-05 14:53:22 DEBUG   ::1             User::fetch
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.rowid = 1
2017-05-05 14:53:22 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 7 AND type < 2 ORDER BY fk_statut DESC
2017-05-05 14:53:22 DEBUG   ::1             Facture::liste_contact
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT ec.rowid, ec.statut as statuslink, ec.fk_socpeople as id, ec.fk_c_type_contact, '-1' as socid, t.statut as statuscontact, t.civility as civility, t.lastname as lastname, t.firstname, t.email, tc.source, tc.element, tc.code, tc.libelle FROM llx_c_type_contact tc, llx_element_contact ec LEFT JOIN llx_user t on ec.fk_socpeople = t.rowid WHERE ec.element_id =7 AND ec.fk_c_type_contact=tc.rowid AND tc.element='facture' AND tc.source = 'internal' AND tc.active=1 ORDER BY t.lastname ASC
2017-05-05 14:53:22 DEBUG   ::1             Facture::liste_contact
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT ec.rowid, ec.statut as statuslink, ec.fk_socpeople as id, ec.fk_c_type_contact, t.fk_soc as socid, t.statut as statuscontact, t.civility as civility, t.lastname as lastname, t.firstname, t.email, tc.source, tc.element, tc.code, tc.libelle FROM llx_c_type_contact tc, llx_element_contact ec LEFT JOIN llx_socpeople t on ec.fk_socpeople = t.rowid WHERE ec.element_id =7 AND ec.fk_c_type_contact=tc.rowid AND tc.element='facture' AND tc.source = 'external' AND tc.active=1 ORDER BY t.lastname ASC
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT COUNT(pfd.rowid) as nb FROM llx_prelevement_facture_demande as pfd WHERE pfd.fk_facture = 7
2017-05-05 14:53:22 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1705-0005 types=files recursive=0 filter= excludefilter="(\\.meta|_preview\\.png)$"
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT COUNT(rowid) as nb FROM llx_links WHERE objecttype = 'facture' AND objectid = 7 AND entity = 1
2017-05-05 14:53:22 DEBUG   ::1             DiscountAbsolute::fetch
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT sr.rowid, sr.fk_soc, sr.fk_user, sr.amount_ht, sr.amount_tva, sr.amount_ttc, sr.tva_tx, sr.fk_facture_line, sr.fk_facture, sr.fk_facture_source, sr.description, sr.datec, f.facnumber as ref_facture_source FROM llx_societe_remise_except as sr LEFT JOIN llx_facture as f ON sr.fk_facture_source = f.rowid WHERE sr.fk_facture_source=7
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT MAX(te.facnumber) FROM llx_facture as te WHERE te.facnumber < 'FA1705-0005' AND te.entity IN (1)
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT MIN(te.facnumber) FROM llx_facture as te WHERE te.facnumber > 'FA1705-0005' AND te.entity IN (1)
2017-05-05 14:53:22 DEBUG   ::1             get_OutstandingBill
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT rowid, total_ttc FROM llx_facture as f WHERE fk_soc = 3 AND paye = 0 AND fk_statut <> 0 AND fk_statut <> 3 AND fk_statut <> 2
2017-05-05 14:53:22 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 3
2017-05-05 14:53:22 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 2
2017-05-05 14:53:22 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 3
2017-05-05 14:53:22 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 4
2017-05-05 14:53:22 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 4 AND f.type = 2
2017-05-05 14:53:22 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 4 AND f.type = 3
2017-05-05 14:53:22 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 6
2017-05-05 14:53:22 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 2
2017-05-05 14:53:22 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 3
2017-05-05 14:53:22 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:53:22 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 2
2017-05-05 14:53:22 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 3
2017-05-05 14:53:22 DEBUG   ::1             Translate::loadCacheCurrencies
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT code_iso, label, unicode FROM llx_c_currencies WHERE active = 1 AND code_iso = 'EUR'
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 7 AND type = 2
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT p.datep as dp, p.ref, p.num_paiement, p.rowid, p.fk_bank, c.code as payment_code, c.libelle as payment_label, pf.amount, ba.rowid as baid, ba.ref as baref, ba.label FROM llx_c_paiement as c, llx_paiement_facture as pf, llx_paiement as p LEFT JOIN llx_bank as b ON p.fk_bank = b.rowid LEFT JOIN llx_bank_account as ba ON b.fk_account = ba.rowid WHERE pf.fk_facture = 7 AND p.fk_paiement = c.id AND pf.fk_paiement = p.rowid ORDER BY p.datep, p.tms
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT fk_facture FROM llx_paiement_facture as pf, llx_facture as f WHERE pf.fk_facture = f.rowid AND fk_paiement = 2
2017-05-05 14:53:22 DEBUG   ::1             Facture::fetch
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:53:22 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:22 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT re.rowid, re.amount_ht, re.amount_tva, re.amount_ttc, re.description, re.fk_facture_source FROM llx_societe_remise_except as re WHERE fk_facture = 7
2017-05-05 14:53:22 DEBUG   ::1             Form::load_cache_conditions_paiements
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT rowid, code, libelle as label FROM llx_c_payment_term WHERE active > 0 ORDER BY sortorder
2017-05-05 14:53:22 DEBUG   ::1             Form::load_cache_types_paiements
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT id, code, libelle as label, type, active FROM llx_c_paiement
2017-05-05 14:53:22 DEBUG   ::1             Translate::getLabelFromKey
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT libelle as label FROM llx_c_paiement WHERE code = 'LCR'
2017-05-05 14:53:22 DEBUG   ::1             Account::fetch
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT ba.rowid, ba.ref, ba.label, ba.bank, ba.number, ba.courant, ba.clos, ba.rappro, ba.url, ba.code_banque, ba.code_guichet, ba.cle_rib, ba.bic, ba.iban_prefix as iban, ba.domiciliation, ba.proprio, ba.owner_address, ba.state_id, ba.fk_pays as country_id, ba.account_number, ba.accountancy_journal, ba.currency_code, ba.min_allowed, ba.min_desired, ba.comment, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_bank_account as ba LEFT JOIN llx_c_country as c ON ba.fk_pays = c.rowid LEFT JOIN llx_c_departements as d ON ba.state_id = d.rowid WHERE entity IN (1) AND ba.rowid  = 1
2017-05-05 14:53:22 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'bank_account' ORDER BY pos
2017-05-05 14:53:22 DEBUG   ::1             useLocalTax
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:53:22 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:53:22 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facturedet' ORDER BY pos
2017-05-05 14:53:22 DEBUG   ::1             Product::fetch id=1 ref= ref_ext=
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT rowid, ref, ref_ext, label, description, url, note, customcode, fk_country, price, price_ttc, price_min, price_min_ttc, price_base_type, cost_price, default_vat_code, tva_tx, recuperableonly as tva_npr, localtax1_tx, localtax2_tx, localtax1_type, localtax2_type, tosell, tobuy, fk_product_type, duration, seuil_stock_alerte, canvas, weight, weight_units, length, length_units, surface, surface_units, volume, volume_units, barcode, fk_barcode_type, finished, accountancy_code_buy, accountancy_code_sell, stock, pmp, datec, tms, import_key, entity, desiredstock, tobatch, fk_unit, fk_price_expression, price_autogen FROM llx_product WHERE rowid = 1
2017-05-05 14:53:22 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'product' ORDER BY pos
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT MAX(CAST(SUBSTRING(facnumber FROM 8) AS SIGNED)) as max FROM llx_facture WHERE facnumber LIKE 'FA____-%' AND entity IN (1)
2017-05-05 14:53:22 DEBUG   ::1             mod_facture_terre::getNextValue
2017-05-05 14:53:22 DEBUG   ::1             mod_facture_terre::getNextValue
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT facnumber as ref FROM llx_facture WHERE facnumber LIKE 'FA____-0005' AND entity IN (1)
2017-05-05 14:53:22 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:53:22 DEBUG   ::1             /core/lib/function2.lib.php::getListOfModels
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT nom as id, nom as lib, libelle as label, description as description FROM llx_document_model WHERE type = 'invoice' AND entity IN (0,1) ORDER BY description DESC
2017-05-05 14:53:22 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1705-0005 types=files recursive=0 filter= excludefilter="(\\.meta|_preview\\.png)$"
2017-05-05 14:53:22 DEBUG   ::1             Facture::fetchObjectLink
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT rowid, fk_source, sourcetype, fk_target, targettype FROM llx_element_element WHERE (fk_source = '7' AND sourcetype = 'facture') OR (fk_target = '7' AND targettype = 'facture') ORDER BY sourcetype
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT s.rowid as socid, s.nom as name, s.client, c.rowid, c.ref, c.ref_client, c.total_ht FROM llx_societe as s, llx_commande as c WHERE c.fk_soc = s.rowid AND c.fk_soc = 3
2017-05-05 14:53:22 DEBUG   ::1             ActionComm::getActions
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT a.id FROM llx_actioncomm as a WHERE a.entity IN (1) AND a.fk_element = 7 AND a.elementtype = 'invoice'
2017-05-05 14:53:22 DEBUG   ::1             ActionComm::fetch
2017-05-05 14:53:22 DEBUG   ::1             sql=SELECT a.id, a.id as ref, a.ref_ext, a.datep, a.datep2, a.durationp, a.datec, a.tms as datem, a.code, a.label, a.note, a.fk_soc, a.fk_project, a.fk_user_author, a.fk_user_mod, a.fk_user_action, a.fk_user_done, a.fk_contact, a.percent as percentage, a.fk_element, a.elementtype, a.priority, a.fulldayevent, a.location, a.punctual, a.transparency, c.id as type_id, c.code as type_code, c.libelle, s.nom as socname, u.firstname, u.lastname as lastname FROM llx_actioncomm as a  LEFT JOIN llx_c_actioncomm as c ON a.fk_action=c.id  LEFT JOIN llx_user as u on u.rowid = a.fk_user_author LEFT JOIN llx_societe as s on s.rowid = a.fk_soc WHERE  a.id=15
2017-05-05 14:53:22 DEBUG   ::1             --- End access to /dolibarr/compta/facture.php
2017-05-05 14:53:30 DEBUG   ::1             This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:53:30 DEBUG   ::1             User::fetch
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:53:30 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:53:30 DEBUG   ::1             User::getrights
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:53:30 DEBUG   ::1             User::getrights
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:53:30 DEBUG   ::1             --- Access to /dolibarr/compta/facture.php
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:53:30 DEBUG   ::1             Menubase::menuLoad mymainmenu=accountancy myleftmenu=customers_bills type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:53:30 DEBUG   ::1             Facture::fetch
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:53:30 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:30 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:53:30 DEBUG   ::1             useLocalTax
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax1_type <> '0'
2017-05-05 14:53:30 DEBUG   ::1             useLocalTax
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:53:30 DEBUG   ::1             Facture::fetch
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:53:30 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:30 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:53:30 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:53:30 DEBUG   ::1             Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:53:30 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:53:30 DEBUG   ::1             Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:53:30 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:53:30 DEBUG   ::1             useRevenueStamp
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT COUNT(*) as nb FROM llx_c_revenuestamp as r, llx_c_country as c WHERE r.fk_pays = c.rowid AND c.code = 'ES' AND r.active = 1
2017-05-05 14:53:30 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:53:30 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 2
2017-05-05 14:53:30 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 3
2017-05-05 14:53:30 DEBUG   ::1             DiscountAbsolute::getAvailableDiscounts
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT SUM(rc.amount_ttc) as amount FROM llx_societe_remise_except as rc WHERE (rc.fk_facture IS NULL AND rc.fk_facture_line IS NULL) AND rc.fk_soc = 3 AND (fk_facture_source IS NULL OR (fk_facture_source IS NOT NULL AND description LIKE '(DEPOSIT)%'))
2017-05-05 14:53:30 DEBUG   ::1             DiscountAbsolute::getAvailableDiscounts
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT SUM(rc.amount_ttc) as amount FROM llx_societe_remise_except as rc WHERE (rc.fk_facture IS NULL AND rc.fk_facture_line IS NULL) AND rc.fk_soc = 3 AND (fk_facture_source IS NOT NULL AND description NOT LIKE '(DEPOSIT)%')
2017-05-05 14:53:30 DEBUG   ::1             User::fetch
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.rowid = 1
2017-05-05 14:53:30 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 7 AND type < 2 ORDER BY fk_statut DESC
2017-05-05 14:53:30 DEBUG   ::1             Facture::liste_contact
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT ec.rowid, ec.statut as statuslink, ec.fk_socpeople as id, ec.fk_c_type_contact, '-1' as socid, t.statut as statuscontact, t.civility as civility, t.lastname as lastname, t.firstname, t.email, tc.source, tc.element, tc.code, tc.libelle FROM llx_c_type_contact tc, llx_element_contact ec LEFT JOIN llx_user t on ec.fk_socpeople = t.rowid WHERE ec.element_id =7 AND ec.fk_c_type_contact=tc.rowid AND tc.element='facture' AND tc.source = 'internal' AND tc.active=1 ORDER BY t.lastname ASC
2017-05-05 14:53:30 DEBUG   ::1             Facture::liste_contact
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT ec.rowid, ec.statut as statuslink, ec.fk_socpeople as id, ec.fk_c_type_contact, t.fk_soc as socid, t.statut as statuscontact, t.civility as civility, t.lastname as lastname, t.firstname, t.email, tc.source, tc.element, tc.code, tc.libelle FROM llx_c_type_contact tc, llx_element_contact ec LEFT JOIN llx_socpeople t on ec.fk_socpeople = t.rowid WHERE ec.element_id =7 AND ec.fk_c_type_contact=tc.rowid AND tc.element='facture' AND tc.source = 'external' AND tc.active=1 ORDER BY t.lastname ASC
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT COUNT(pfd.rowid) as nb FROM llx_prelevement_facture_demande as pfd WHERE pfd.fk_facture = 7
2017-05-05 14:53:30 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1705-0005 types=files recursive=0 filter= excludefilter="(\\.meta|_preview\\.png)$"
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT COUNT(rowid) as nb FROM llx_links WHERE objecttype = 'facture' AND objectid = 7 AND entity = 1
2017-05-05 14:53:30 DEBUG   ::1             DiscountAbsolute::fetch
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT sr.rowid, sr.fk_soc, sr.fk_user, sr.amount_ht, sr.amount_tva, sr.amount_ttc, sr.tva_tx, sr.fk_facture_line, sr.fk_facture, sr.fk_facture_source, sr.description, sr.datec, f.facnumber as ref_facture_source FROM llx_societe_remise_except as sr LEFT JOIN llx_facture as f ON sr.fk_facture_source = f.rowid WHERE sr.fk_facture_source=7
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT MAX(te.facnumber) FROM llx_facture as te WHERE te.facnumber < 'FA1705-0005' AND te.entity IN (1)
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT MIN(te.facnumber) FROM llx_facture as te WHERE te.facnumber > 'FA1705-0005' AND te.entity IN (1)
2017-05-05 14:53:30 DEBUG   ::1             get_OutstandingBill
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT rowid, total_ttc FROM llx_facture as f WHERE fk_soc = 3 AND paye = 0 AND fk_statut <> 0 AND fk_statut <> 3 AND fk_statut <> 2
2017-05-05 14:53:30 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 3
2017-05-05 14:53:30 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 2
2017-05-05 14:53:30 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 3
2017-05-05 14:53:30 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 4
2017-05-05 14:53:30 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 4 AND f.type = 2
2017-05-05 14:53:30 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 4 AND f.type = 3
2017-05-05 14:53:30 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 6
2017-05-05 14:53:30 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 2
2017-05-05 14:53:30 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 3
2017-05-05 14:53:30 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:53:30 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 2
2017-05-05 14:53:30 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 3
2017-05-05 14:53:30 DEBUG   ::1             Translate::loadCacheCurrencies
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT code_iso, label, unicode FROM llx_c_currencies WHERE active = 1 AND code_iso = 'EUR'
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 7 AND type = 2
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT p.datep as dp, p.ref, p.num_paiement, p.rowid, p.fk_bank, c.code as payment_code, c.libelle as payment_label, pf.amount, ba.rowid as baid, ba.ref as baref, ba.label FROM llx_c_paiement as c, llx_paiement_facture as pf, llx_paiement as p LEFT JOIN llx_bank as b ON p.fk_bank = b.rowid LEFT JOIN llx_bank_account as ba ON b.fk_account = ba.rowid WHERE pf.fk_facture = 7 AND p.fk_paiement = c.id AND pf.fk_paiement = p.rowid ORDER BY p.datep, p.tms
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT fk_facture FROM llx_paiement_facture as pf, llx_facture as f WHERE pf.fk_facture = f.rowid AND fk_paiement = 2
2017-05-05 14:53:30 DEBUG   ::1             Facture::fetch
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:53:30 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:30 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT re.rowid, re.amount_ht, re.amount_tva, re.amount_ttc, re.description, re.fk_facture_source FROM llx_societe_remise_except as re WHERE fk_facture = 7
2017-05-05 14:53:30 DEBUG   ::1             Form::load_cache_conditions_paiements
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT rowid, code, libelle as label FROM llx_c_payment_term WHERE active > 0 ORDER BY sortorder
2017-05-05 14:53:30 DEBUG   ::1             Form::load_cache_types_paiements
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT id, code, libelle as label, type, active FROM llx_c_paiement
2017-05-05 14:53:30 DEBUG   ::1             Translate::getLabelFromKey
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT libelle as label FROM llx_c_paiement WHERE code = 'LCR'
2017-05-05 14:53:30 DEBUG   ::1             Account::fetch
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT ba.rowid, ba.ref, ba.label, ba.bank, ba.number, ba.courant, ba.clos, ba.rappro, ba.url, ba.code_banque, ba.code_guichet, ba.cle_rib, ba.bic, ba.iban_prefix as iban, ba.domiciliation, ba.proprio, ba.owner_address, ba.state_id, ba.fk_pays as country_id, ba.account_number, ba.accountancy_journal, ba.currency_code, ba.min_allowed, ba.min_desired, ba.comment, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_bank_account as ba LEFT JOIN llx_c_country as c ON ba.fk_pays = c.rowid LEFT JOIN llx_c_departements as d ON ba.state_id = d.rowid WHERE entity IN (1) AND ba.rowid  = 1
2017-05-05 14:53:30 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'bank_account' ORDER BY pos
2017-05-05 14:53:30 DEBUG   ::1             useLocalTax
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:53:30 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:53:30 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facturedet' ORDER BY pos
2017-05-05 14:53:30 DEBUG   ::1             Product::fetch id=1 ref= ref_ext=
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT rowid, ref, ref_ext, label, description, url, note, customcode, fk_country, price, price_ttc, price_min, price_min_ttc, price_base_type, cost_price, default_vat_code, tva_tx, recuperableonly as tva_npr, localtax1_tx, localtax2_tx, localtax1_type, localtax2_type, tosell, tobuy, fk_product_type, duration, seuil_stock_alerte, canvas, weight, weight_units, length, length_units, surface, surface_units, volume, volume_units, barcode, fk_barcode_type, finished, accountancy_code_buy, accountancy_code_sell, stock, pmp, datec, tms, import_key, entity, desiredstock, tobatch, fk_unit, fk_price_expression, price_autogen FROM llx_product WHERE rowid = 1
2017-05-05 14:53:30 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'product' ORDER BY pos
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT MAX(CAST(SUBSTRING(facnumber FROM 8) AS SIGNED)) as max FROM llx_facture WHERE facnumber LIKE 'FA____-%' AND entity IN (1)
2017-05-05 14:53:30 DEBUG   ::1             mod_facture_terre::getNextValue
2017-05-05 14:53:30 DEBUG   ::1             mod_facture_terre::getNextValue
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT facnumber as ref FROM llx_facture WHERE facnumber LIKE 'FA____-0005' AND entity IN (1)
2017-05-05 14:53:30 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:53:30 DEBUG   ::1             /core/lib/function2.lib.php::getListOfModels
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT nom as id, nom as lib, libelle as label, description as description FROM llx_document_model WHERE type = 'invoice' AND entity IN (0,1) ORDER BY description DESC
2017-05-05 14:53:30 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1705-0005 types=files recursive=0 filter= excludefilter="(\\.meta|_preview\\.png)$"
2017-05-05 14:53:30 DEBUG   ::1             Facture::fetchObjectLink
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT rowid, fk_source, sourcetype, fk_target, targettype FROM llx_element_element WHERE (fk_source = '7' AND sourcetype = 'facture') OR (fk_target = '7' AND targettype = 'facture') ORDER BY sourcetype
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT s.rowid as socid, s.nom as name, s.client, c.rowid, c.ref, c.ref_client, c.total_ht FROM llx_societe as s, llx_commande as c WHERE c.fk_soc = s.rowid AND c.fk_soc = 3
2017-05-05 14:53:30 DEBUG   ::1             ActionComm::getActions
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT a.id FROM llx_actioncomm as a WHERE a.entity IN (1) AND a.fk_element = 7 AND a.elementtype = 'invoice'
2017-05-05 14:53:30 DEBUG   ::1             ActionComm::fetch
2017-05-05 14:53:30 DEBUG   ::1             sql=SELECT a.id, a.id as ref, a.ref_ext, a.datep, a.datep2, a.durationp, a.datec, a.tms as datem, a.code, a.label, a.note, a.fk_soc, a.fk_project, a.fk_user_author, a.fk_user_mod, a.fk_user_action, a.fk_user_done, a.fk_contact, a.percent as percentage, a.fk_element, a.elementtype, a.priority, a.fulldayevent, a.location, a.punctual, a.transparency, c.id as type_id, c.code as type_code, c.libelle, s.nom as socname, u.firstname, u.lastname as lastname FROM llx_actioncomm as a  LEFT JOIN llx_c_actioncomm as c ON a.fk_action=c.id  LEFT JOIN llx_user as u on u.rowid = a.fk_user_author LEFT JOIN llx_societe as s on s.rowid = a.fk_soc WHERE  a.id=15
2017-05-05 14:53:30 DEBUG   ::1             --- End access to /dolibarr/compta/facture.php
2017-05-05 14:53:51 DEBUG   ::1             This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:53:51 DEBUG   ::1             User::fetch
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:53:51 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:53:51 DEBUG   ::1             User::getrights
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:53:51 DEBUG   ::1             User::getrights
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:53:51 DEBUG   ::1             --- Access to /dolibarr/compta/facture.php
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:53:51 DEBUG   ::1             Menubase::menuLoad mymainmenu=accountancy myleftmenu=customers_bills type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:53:51 DEBUG   ::1             Facture::fetch
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:53:51 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:51 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:53:51 DEBUG   ::1             Facture::fetch
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:53:51 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:51 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:53:51 DEBUG   ::1             BEGIN Transaction
2017-05-05 14:53:51 DEBUG   ::1              Facture::set_paid rowid=7
2017-05-05 14:53:51 DEBUG   ::1              Facture::set_paid
2017-05-05 14:53:51 DEBUG   ::1              sql=UPDATE llx_facture SET fk_statut=2, close_code='discount_vat' WHERE rowid = 7
2017-05-05 14:53:51 DEBUG   ::1              Interfaces::run_triggers action=BILL_PAYED Triggers for file 'interface_20_modPaypal_PaypalWorkflow.class.php' need module to be enabled
2017-05-05 14:53:51 DEBUG   ::1              Interfaces::run_triggers action=BILL_PAYED Launch runTrigger for file 'interface_20_all_Logevents.class.php'
2017-05-05 14:53:51 DEBUG   ::1              Interfaces::run_triggers action=BILL_PAYED Launch runTrigger for file 'interface_20_modWorkflow_WorkflowManager.class.php'
2017-05-05 14:53:51 DEBUG   ::1              Trigger 'WorkflowManager' for action 'BILL_PAYED' launched by C:\dolibarr\www\dolibarr\htdocs\core\triggers\interface_20_modWorkflow_WorkflowManager.class.php. id=7
2017-05-05 14:53:51 DEBUG   ::1              Interfaces::run_triggers action=BILL_PAYED Launch runTrigger for file 'interface_50_modAgenda_ActionsAuto.class.php'
2017-05-05 14:53:51 DEBUG   ::1              Trigger 'ActionsAuto' for action 'BILL_PAYED' launched by C:\dolibarr\www\dolibarr\htdocs\core\triggers\interface_50_modAgenda_ActionsAuto.class.php. id=7
2017-05-05 14:53:51 DEBUG   ::1              sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:53:51 DEBUG   ::1              Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:53:51 DEBUG   ::1              ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:51 DEBUG   ::1              sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:53:51 DEBUG   ::1              CActionComm::fetch
2017-05-05 14:53:51 DEBUG   ::1              sql=SELECT id, code, type, libelle, color, active FROM llx_c_actioncomm WHERE code='AC_OTH_AUTO'
2017-05-05 14:53:51 DEBUG   ::1               ActionComm::add
2017-05-05 14:53:51 DEBUG   ::1               sql=INSERT INTO llx_actioncomm(datec,datep,datep2,durationp,fk_action,code,fk_soc,fk_project,note,fk_contact,fk_user_author,fk_user_action,fk_user_done,label,percent,priority,fulldayevent,location,punctual,transparency,fk_element,elementtype,entity) VALUES ('20170505145351','20170505145351','20170505145351',null,40, 'AC_OTH_AUTO', '3',null, 'Factura FA1705-0005 pasada a pagada\nAutor: apperture',null,'1','1',null,'Factura FA1705-0005 pasada a pagada','-1','0','0','','1','0',7,'invoice',1)
2017-05-05 14:53:51 DEBUG   ::1               sql=INSERT INTO llx_actioncomm_resources(fk_actioncomm, element_type, fk_element, mandatory, transparency, answer_status) VALUES(16, 'user', 1, 0, 0, 0)
2017-05-05 14:53:51 DEBUG   ::1               Interfaces::run_triggers action=ACTION_CREATE Triggers for file 'interface_20_modPaypal_PaypalWorkflow.class.php' need module to be enabled
2017-05-05 14:53:51 DEBUG   ::1               Interfaces::run_triggers action=ACTION_CREATE Launch runTrigger for file 'interface_20_all_Logevents.class.php'
2017-05-05 14:53:51 DEBUG   ::1               Interfaces::run_triggers action=ACTION_CREATE Launch runTrigger for file 'interface_20_modWorkflow_WorkflowManager.class.php'
2017-05-05 14:53:51 DEBUG   ::1               Interfaces::run_triggers action=ACTION_CREATE Launch runTrigger for file 'interface_50_modAgenda_ActionsAuto.class.php'
2017-05-05 14:53:51 DEBUG   ::1               Interfaces::run_triggers action=ACTION_CREATE Launch runTrigger for file 'interface_50_modLdap_Ldapsynchro.class.php'
2017-05-05 14:53:51 DEBUG   ::1               Interfaces::run_triggers action=ACTION_CREATE Launch runTrigger for file 'interface_50_modMailmanspip_Mailmanspipsynchro.class.php'
2017-05-05 14:53:51 DEBUG   ::1               Interfaces::run_triggers action=ACTION_CREATE Launch runTrigger for file 'interface_50_modNotification_Notification.class.php'
2017-05-05 14:53:51 DEBUG   ::1               Trigger 'Notification' for action 'ACTION_CREATE' launched by C:\dolibarr\www\dolibarr\htdocs\core\triggers\interface_50_modNotification_Notification.class.php. id=16
2017-05-05 14:53:51 DEBUG   ::1               Notify::send notifcode=ACTION_CREATE, object=16
2017-05-05 14:53:51 DEBUG   ::1              Interfaces::run_triggers action=BILL_PAYED Launch runTrigger for file 'interface_50_modLdap_Ldapsynchro.class.php'
2017-05-05 14:53:51 DEBUG   ::1              Interfaces::run_triggers action=BILL_PAYED Launch runTrigger for file 'interface_50_modMailmanspip_Mailmanspipsynchro.class.php'
2017-05-05 14:53:51 DEBUG   ::1              Interfaces::run_triggers action=BILL_PAYED Launch runTrigger for file 'interface_50_modNotification_Notification.class.php'
2017-05-05 14:53:51 DEBUG   ::1              Trigger 'Notification' for action 'BILL_PAYED' launched by C:\dolibarr\www\dolibarr\htdocs\core\triggers\interface_50_modNotification_Notification.class.php. id=7
2017-05-05 14:53:51 DEBUG   ::1              Notify::send notifcode=BILL_PAYED, object=7
2017-05-05 14:53:51 DEBUG   ::1              sql=SELECT s.nom, c.email, c.rowid as cid, c.lastname, c.firstname, c.default_lang, a.rowid as adid, a.label, a.code, n.rowid, n.type FROM llx_socpeople as c, llx_c_action_trigger as a, llx_notify_def as n, llx_societe as s WHERE n.fk_contact = c.rowid AND a.rowid = n.fk_action AND n.fk_soc = s.rowid AND a.code = 'BILL_PAYED' AND s.rowid = 3
2017-05-05 14:53:51 DEBUG   ::1              No notification to thirdparty sent, nothing into notification setup for the thirdparty socid = 3
2017-05-05 14:53:51 DEBUG   ::1             COMMIT Transaction
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:53:51 DEBUG   ::1             useLocalTax
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax1_type <> '0'
2017-05-05 14:53:51 DEBUG   ::1             useLocalTax
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:53:51 DEBUG   ::1             Facture::fetch
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:53:51 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:51 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:53:51 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:53:51 DEBUG   ::1             Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:53:51 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:53:51 DEBUG   ::1             Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:53:51 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:53:51 DEBUG   ::1             useRevenueStamp
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT COUNT(*) as nb FROM llx_c_revenuestamp as r, llx_c_country as c WHERE r.fk_pays = c.rowid AND c.code = 'ES' AND r.active = 1
2017-05-05 14:53:51 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:53:51 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 2
2017-05-05 14:53:51 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 3
2017-05-05 14:53:51 DEBUG   ::1             DiscountAbsolute::getAvailableDiscounts
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT SUM(rc.amount_ttc) as amount FROM llx_societe_remise_except as rc WHERE (rc.fk_facture IS NULL AND rc.fk_facture_line IS NULL) AND rc.fk_soc = 3 AND (fk_facture_source IS NULL OR (fk_facture_source IS NOT NULL AND description LIKE '(DEPOSIT)%'))
2017-05-05 14:53:51 DEBUG   ::1             DiscountAbsolute::getAvailableDiscounts
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT SUM(rc.amount_ttc) as amount FROM llx_societe_remise_except as rc WHERE (rc.fk_facture IS NULL AND rc.fk_facture_line IS NULL) AND rc.fk_soc = 3 AND (fk_facture_source IS NOT NULL AND description NOT LIKE '(DEPOSIT)%')
2017-05-05 14:53:51 DEBUG   ::1             User::fetch
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.rowid = 1
2017-05-05 14:53:51 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 7 AND type < 2 ORDER BY fk_statut DESC
2017-05-05 14:53:51 DEBUG   ::1             Facture::liste_contact
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT ec.rowid, ec.statut as statuslink, ec.fk_socpeople as id, ec.fk_c_type_contact, '-1' as socid, t.statut as statuscontact, t.civility as civility, t.lastname as lastname, t.firstname, t.email, tc.source, tc.element, tc.code, tc.libelle FROM llx_c_type_contact tc, llx_element_contact ec LEFT JOIN llx_user t on ec.fk_socpeople = t.rowid WHERE ec.element_id =7 AND ec.fk_c_type_contact=tc.rowid AND tc.element='facture' AND tc.source = 'internal' AND tc.active=1 ORDER BY t.lastname ASC
2017-05-05 14:53:51 DEBUG   ::1             Facture::liste_contact
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT ec.rowid, ec.statut as statuslink, ec.fk_socpeople as id, ec.fk_c_type_contact, t.fk_soc as socid, t.statut as statuscontact, t.civility as civility, t.lastname as lastname, t.firstname, t.email, tc.source, tc.element, tc.code, tc.libelle FROM llx_c_type_contact tc, llx_element_contact ec LEFT JOIN llx_socpeople t on ec.fk_socpeople = t.rowid WHERE ec.element_id =7 AND ec.fk_c_type_contact=tc.rowid AND tc.element='facture' AND tc.source = 'external' AND tc.active=1 ORDER BY t.lastname ASC
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT COUNT(pfd.rowid) as nb FROM llx_prelevement_facture_demande as pfd WHERE pfd.fk_facture = 7
2017-05-05 14:53:51 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1705-0005 types=files recursive=0 filter= excludefilter="(\\.meta|_preview\\.png)$"
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT COUNT(rowid) as nb FROM llx_links WHERE objecttype = 'facture' AND objectid = 7 AND entity = 1
2017-05-05 14:53:51 DEBUG   ::1             DiscountAbsolute::fetch
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT sr.rowid, sr.fk_soc, sr.fk_user, sr.amount_ht, sr.amount_tva, sr.amount_ttc, sr.tva_tx, sr.fk_facture_line, sr.fk_facture, sr.fk_facture_source, sr.description, sr.datec, f.facnumber as ref_facture_source FROM llx_societe_remise_except as sr LEFT JOIN llx_facture as f ON sr.fk_facture_source = f.rowid WHERE sr.fk_facture_source=7
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT MAX(te.facnumber) FROM llx_facture as te WHERE te.facnumber < 'FA1705-0005' AND te.entity IN (1)
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT MIN(te.facnumber) FROM llx_facture as te WHERE te.facnumber > 'FA1705-0005' AND te.entity IN (1)
2017-05-05 14:53:51 DEBUG   ::1             get_OutstandingBill
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT rowid, total_ttc FROM llx_facture as f WHERE fk_soc = 3 AND paye = 0 AND fk_statut <> 0 AND fk_statut <> 3 AND fk_statut <> 2
2017-05-05 14:53:51 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 3
2017-05-05 14:53:51 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 2
2017-05-05 14:53:51 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 3
2017-05-05 14:53:51 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 4
2017-05-05 14:53:51 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 4 AND f.type = 2
2017-05-05 14:53:51 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 4 AND f.type = 3
2017-05-05 14:53:51 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 6
2017-05-05 14:53:51 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 2
2017-05-05 14:53:51 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 3
2017-05-05 14:53:51 DEBUG   ::1             Translate::loadCacheCurrencies
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT code_iso, label, unicode FROM llx_c_currencies WHERE active = 1 AND code_iso = 'EUR'
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 7 AND type = 2
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT p.datep as dp, p.ref, p.num_paiement, p.rowid, p.fk_bank, c.code as payment_code, c.libelle as payment_label, pf.amount, ba.rowid as baid, ba.ref as baref, ba.label FROM llx_c_paiement as c, llx_paiement_facture as pf, llx_paiement as p LEFT JOIN llx_bank as b ON p.fk_bank = b.rowid LEFT JOIN llx_bank_account as ba ON b.fk_account = ba.rowid WHERE pf.fk_facture = 7 AND p.fk_paiement = c.id AND pf.fk_paiement = p.rowid ORDER BY p.datep, p.tms
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT fk_facture FROM llx_paiement_facture as pf, llx_facture as f WHERE pf.fk_facture = f.rowid AND fk_paiement = 2
2017-05-05 14:53:51 DEBUG   ::1             Facture::fetch
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:53:51 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:53:51 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT re.rowid, re.amount_ht, re.amount_tva, re.amount_ttc, re.description, re.fk_facture_source FROM llx_societe_remise_except as re WHERE fk_facture = 7
2017-05-05 14:53:51 DEBUG   ::1             Form::load_cache_conditions_paiements
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT rowid, code, libelle as label FROM llx_c_payment_term WHERE active > 0 ORDER BY sortorder
2017-05-05 14:53:51 DEBUG   ::1             Form::load_cache_types_paiements
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT id, code, libelle as label, type, active FROM llx_c_paiement
2017-05-05 14:53:51 DEBUG   ::1             Translate::getLabelFromKey
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT libelle as label FROM llx_c_paiement WHERE code = 'LCR'
2017-05-05 14:53:51 DEBUG   ::1             Account::fetch
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT ba.rowid, ba.ref, ba.label, ba.bank, ba.number, ba.courant, ba.clos, ba.rappro, ba.url, ba.code_banque, ba.code_guichet, ba.cle_rib, ba.bic, ba.iban_prefix as iban, ba.domiciliation, ba.proprio, ba.owner_address, ba.state_id, ba.fk_pays as country_id, ba.account_number, ba.accountancy_journal, ba.currency_code, ba.min_allowed, ba.min_desired, ba.comment, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_bank_account as ba LEFT JOIN llx_c_country as c ON ba.fk_pays = c.rowid LEFT JOIN llx_c_departements as d ON ba.state_id = d.rowid WHERE entity IN (1) AND ba.rowid  = 1
2017-05-05 14:53:51 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'bank_account' ORDER BY pos
2017-05-05 14:53:51 DEBUG   ::1             useLocalTax
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:53:51 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:53:51 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facturedet' ORDER BY pos
2017-05-05 14:53:51 DEBUG   ::1             Product::fetch id=1 ref= ref_ext=
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT rowid, ref, ref_ext, label, description, url, note, customcode, fk_country, price, price_ttc, price_min, price_min_ttc, price_base_type, cost_price, default_vat_code, tva_tx, recuperableonly as tva_npr, localtax1_tx, localtax2_tx, localtax1_type, localtax2_type, tosell, tobuy, fk_product_type, duration, seuil_stock_alerte, canvas, weight, weight_units, length, length_units, surface, surface_units, volume, volume_units, barcode, fk_barcode_type, finished, accountancy_code_buy, accountancy_code_sell, stock, pmp, datec, tms, import_key, entity, desiredstock, tobatch, fk_unit, fk_price_expression, price_autogen FROM llx_product WHERE rowid = 1
2017-05-05 14:53:51 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'product' ORDER BY pos
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT MAX(CAST(SUBSTRING(facnumber FROM 8) AS SIGNED)) as max FROM llx_facture WHERE facnumber LIKE 'FA____-%' AND entity IN (1)
2017-05-05 14:53:51 DEBUG   ::1             mod_facture_terre::getNextValue
2017-05-05 14:53:51 DEBUG   ::1             mod_facture_terre::getNextValue
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT facnumber as ref FROM llx_facture WHERE facnumber LIKE 'FA____-0005' AND entity IN (1)
2017-05-05 14:53:51 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:53:51 DEBUG   ::1             /core/lib/function2.lib.php::getListOfModels
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT nom as id, nom as lib, libelle as label, description as description FROM llx_document_model WHERE type = 'invoice' AND entity IN (0,1) ORDER BY description DESC
2017-05-05 14:53:51 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1705-0005 types=files recursive=0 filter= excludefilter="(\\.meta|_preview\\.png)$"
2017-05-05 14:53:51 DEBUG   ::1             Facture::fetchObjectLink
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT rowid, fk_source, sourcetype, fk_target, targettype FROM llx_element_element WHERE (fk_source = '7' AND sourcetype = 'facture') OR (fk_target = '7' AND targettype = 'facture') ORDER BY sourcetype
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT s.rowid as socid, s.nom as name, s.client, c.rowid, c.ref, c.ref_client, c.total_ht FROM llx_societe as s, llx_commande as c WHERE c.fk_soc = s.rowid AND c.fk_soc = 3
2017-05-05 14:53:51 DEBUG   ::1             ActionComm::getActions
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT a.id FROM llx_actioncomm as a WHERE a.entity IN (1) AND a.fk_element = 7 AND a.elementtype = 'invoice'
2017-05-05 14:53:51 DEBUG   ::1             ActionComm::fetch
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT a.id, a.id as ref, a.ref_ext, a.datep, a.datep2, a.durationp, a.datec, a.tms as datem, a.code, a.label, a.note, a.fk_soc, a.fk_project, a.fk_user_author, a.fk_user_mod, a.fk_user_action, a.fk_user_done, a.fk_contact, a.percent as percentage, a.fk_element, a.elementtype, a.priority, a.fulldayevent, a.location, a.punctual, a.transparency, c.id as type_id, c.code as type_code, c.libelle, s.nom as socname, u.firstname, u.lastname as lastname FROM llx_actioncomm as a  LEFT JOIN llx_c_actioncomm as c ON a.fk_action=c.id  LEFT JOIN llx_user as u on u.rowid = a.fk_user_author LEFT JOIN llx_societe as s on s.rowid = a.fk_soc WHERE  a.id=15
2017-05-05 14:53:51 DEBUG   ::1             ActionComm::fetch
2017-05-05 14:53:51 DEBUG   ::1             sql=SELECT a.id, a.id as ref, a.ref_ext, a.datep, a.datep2, a.durationp, a.datec, a.tms as datem, a.code, a.label, a.note, a.fk_soc, a.fk_project, a.fk_user_author, a.fk_user_mod, a.fk_user_action, a.fk_user_done, a.fk_contact, a.percent as percentage, a.fk_element, a.elementtype, a.priority, a.fulldayevent, a.location, a.punctual, a.transparency, c.id as type_id, c.code as type_code, c.libelle, s.nom as socname, u.firstname, u.lastname as lastname FROM llx_actioncomm as a  LEFT JOIN llx_c_actioncomm as c ON a.fk_action=c.id  LEFT JOIN llx_user as u on u.rowid = a.fk_user_author LEFT JOIN llx_societe as s on s.rowid = a.fk_soc WHERE  a.id=16
2017-05-05 14:53:51 DEBUG   ::1             --- End access to /dolibarr/compta/facture.php
2017-05-05 14:53:59 DEBUG   ::1             This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:53:59 DEBUG   ::1             User::fetch
2017-05-05 14:53:59 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:53:59 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:53:59 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:53:59 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:53:59 DEBUG   ::1             User::getrights
2017-05-05 14:53:59 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:53:59 DEBUG   ::1             User::getrights
2017-05-05 14:53:59 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:53:59 DEBUG   ::1             --- Access to /dolibarr/document.php
2017-05-05 14:53:59 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:53:59 DEBUG   ::1             modulepart=facture original_file=FA1705-0005/FA1705-0005.pdf
2017-05-05 14:53:59 DEBUG   ::1             document.php download c:/dolibarr/dolibarr_documents/facture/FA1705-0005/FA1705-0005.pdf FA1705-0005.pdf content-type=application/pdf
2017-05-05 14:53:59 DEBUG   ::1             --- End access to /dolibarr/document.php
2017-05-05 14:54:42 DEBUG   ::1             This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:54:42 DEBUG   ::1             User::fetch
2017-05-05 14:54:42 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:54:42 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:54:42 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:54:42 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:54:42 DEBUG   ::1             User::getrights
2017-05-05 14:54:42 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:54:42 DEBUG   ::1             User::getrights
2017-05-05 14:54:42 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:54:42 DEBUG   ::1             --- Access to /dolibarr/compta/facture.php
2017-05-05 14:54:42 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:54:42 DEBUG   ::1             Menubase::menuLoad mymainmenu=accountancy myleftmenu=customers_bills type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:54:42 DEBUG   ::1             sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:54:43 DEBUG   ::1             Facture::fetch
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:54:43 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:54:43 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:54:43 DEBUG   ::1             useLocalTax
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax1_type <> '0'
2017-05-05 14:54:43 DEBUG   ::1             useLocalTax
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:54:43 DEBUG   ::1             Facture::fetch
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:54:43 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:54:43 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:54:43 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:54:43 DEBUG   ::1             Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:54:43 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:54:43 DEBUG   ::1             Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:54:43 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:54:43 DEBUG   ::1             useRevenueStamp
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT COUNT(*) as nb FROM llx_c_revenuestamp as r, llx_c_country as c WHERE r.fk_pays = c.rowid AND c.code = 'ES' AND r.active = 1
2017-05-05 14:54:43 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:54:43 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 2
2017-05-05 14:54:43 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 3
2017-05-05 14:54:43 DEBUG   ::1             DiscountAbsolute::getAvailableDiscounts
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT SUM(rc.amount_ttc) as amount FROM llx_societe_remise_except as rc WHERE (rc.fk_facture IS NULL AND rc.fk_facture_line IS NULL) AND rc.fk_soc = 3 AND (fk_facture_source IS NULL OR (fk_facture_source IS NOT NULL AND description LIKE '(DEPOSIT)%'))
2017-05-05 14:54:43 DEBUG   ::1             DiscountAbsolute::getAvailableDiscounts
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT SUM(rc.amount_ttc) as amount FROM llx_societe_remise_except as rc WHERE (rc.fk_facture IS NULL AND rc.fk_facture_line IS NULL) AND rc.fk_soc = 3 AND (fk_facture_source IS NOT NULL AND description NOT LIKE '(DEPOSIT)%')
2017-05-05 14:54:43 DEBUG   ::1             User::fetch
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.rowid = 1
2017-05-05 14:54:43 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 7 AND type < 2 ORDER BY fk_statut DESC
2017-05-05 14:54:43 DEBUG   ::1             Facture::liste_contact
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT ec.rowid, ec.statut as statuslink, ec.fk_socpeople as id, ec.fk_c_type_contact, '-1' as socid, t.statut as statuscontact, t.civility as civility, t.lastname as lastname, t.firstname, t.email, tc.source, tc.element, tc.code, tc.libelle FROM llx_c_type_contact tc, llx_element_contact ec LEFT JOIN llx_user t on ec.fk_socpeople = t.rowid WHERE ec.element_id =7 AND ec.fk_c_type_contact=tc.rowid AND tc.element='facture' AND tc.source = 'internal' AND tc.active=1 ORDER BY t.lastname ASC
2017-05-05 14:54:43 DEBUG   ::1             Facture::liste_contact
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT ec.rowid, ec.statut as statuslink, ec.fk_socpeople as id, ec.fk_c_type_contact, t.fk_soc as socid, t.statut as statuscontact, t.civility as civility, t.lastname as lastname, t.firstname, t.email, tc.source, tc.element, tc.code, tc.libelle FROM llx_c_type_contact tc, llx_element_contact ec LEFT JOIN llx_socpeople t on ec.fk_socpeople = t.rowid WHERE ec.element_id =7 AND ec.fk_c_type_contact=tc.rowid AND tc.element='facture' AND tc.source = 'external' AND tc.active=1 ORDER BY t.lastname ASC
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT COUNT(pfd.rowid) as nb FROM llx_prelevement_facture_demande as pfd WHERE pfd.fk_facture = 7
2017-05-05 14:54:43 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1705-0005 types=files recursive=0 filter= excludefilter="(\\.meta|_preview\\.png)$"
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT COUNT(rowid) as nb FROM llx_links WHERE objecttype = 'facture' AND objectid = 7 AND entity = 1
2017-05-05 14:54:43 DEBUG   ::1             DiscountAbsolute::fetch
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT sr.rowid, sr.fk_soc, sr.fk_user, sr.amount_ht, sr.amount_tva, sr.amount_ttc, sr.tva_tx, sr.fk_facture_line, sr.fk_facture, sr.fk_facture_source, sr.description, sr.datec, f.facnumber as ref_facture_source FROM llx_societe_remise_except as sr LEFT JOIN llx_facture as f ON sr.fk_facture_source = f.rowid WHERE sr.fk_facture_source=7
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT MAX(te.facnumber) FROM llx_facture as te WHERE te.facnumber < 'FA1705-0005' AND te.entity IN (1)
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT MIN(te.facnumber) FROM llx_facture as te WHERE te.facnumber > 'FA1705-0005' AND te.entity IN (1)
2017-05-05 14:54:43 DEBUG   ::1             get_OutstandingBill
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT rowid, total_ttc FROM llx_facture as f WHERE fk_soc = 3 AND paye = 0 AND fk_statut <> 0 AND fk_statut <> 3 AND fk_statut <> 2
2017-05-05 14:54:43 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 3
2017-05-05 14:54:43 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 2
2017-05-05 14:54:43 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 3
2017-05-05 14:54:43 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 4
2017-05-05 14:54:43 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 4 AND f.type = 2
2017-05-05 14:54:43 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 4 AND f.type = 3
2017-05-05 14:54:43 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 6
2017-05-05 14:54:43 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 2
2017-05-05 14:54:43 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 3
2017-05-05 14:54:43 DEBUG   ::1             Translate::loadCacheCurrencies
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT code_iso, label, unicode FROM llx_c_currencies WHERE active = 1 AND code_iso = 'EUR'
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 7 AND type = 2
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT p.datep as dp, p.ref, p.num_paiement, p.rowid, p.fk_bank, c.code as payment_code, c.libelle as payment_label, pf.amount, ba.rowid as baid, ba.ref as baref, ba.label FROM llx_c_paiement as c, llx_paiement_facture as pf, llx_paiement as p LEFT JOIN llx_bank as b ON p.fk_bank = b.rowid LEFT JOIN llx_bank_account as ba ON b.fk_account = ba.rowid WHERE pf.fk_facture = 7 AND p.fk_paiement = c.id AND pf.fk_paiement = p.rowid ORDER BY p.datep, p.tms
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT fk_facture FROM llx_paiement_facture as pf, llx_facture as f WHERE pf.fk_facture = f.rowid AND fk_paiement = 2
2017-05-05 14:54:43 DEBUG   ::1             Facture::fetch
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:54:43 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:54:43 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT re.rowid, re.amount_ht, re.amount_tva, re.amount_ttc, re.description, re.fk_facture_source FROM llx_societe_remise_except as re WHERE fk_facture = 7
2017-05-05 14:54:43 DEBUG   ::1             Form::load_cache_conditions_paiements
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT rowid, code, libelle as label FROM llx_c_payment_term WHERE active > 0 ORDER BY sortorder
2017-05-05 14:54:43 DEBUG   ::1             Form::load_cache_types_paiements
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT id, code, libelle as label, type, active FROM llx_c_paiement
2017-05-05 14:54:43 DEBUG   ::1             Translate::getLabelFromKey
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT libelle as label FROM llx_c_paiement WHERE code = 'LCR'
2017-05-05 14:54:43 DEBUG   ::1             Account::fetch
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT ba.rowid, ba.ref, ba.label, ba.bank, ba.number, ba.courant, ba.clos, ba.rappro, ba.url, ba.code_banque, ba.code_guichet, ba.cle_rib, ba.bic, ba.iban_prefix as iban, ba.domiciliation, ba.proprio, ba.owner_address, ba.state_id, ba.fk_pays as country_id, ba.account_number, ba.accountancy_journal, ba.currency_code, ba.min_allowed, ba.min_desired, ba.comment, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_bank_account as ba LEFT JOIN llx_c_country as c ON ba.fk_pays = c.rowid LEFT JOIN llx_c_departements as d ON ba.state_id = d.rowid WHERE entity IN (1) AND ba.rowid  = 1
2017-05-05 14:54:43 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'bank_account' ORDER BY pos
2017-05-05 14:54:43 DEBUG   ::1             useLocalTax
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:54:43 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:54:43 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facturedet' ORDER BY pos
2017-05-05 14:54:43 DEBUG   ::1             Product::fetch id=1 ref= ref_ext=
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT rowid, ref, ref_ext, label, description, url, note, customcode, fk_country, price, price_ttc, price_min, price_min_ttc, price_base_type, cost_price, default_vat_code, tva_tx, recuperableonly as tva_npr, localtax1_tx, localtax2_tx, localtax1_type, localtax2_type, tosell, tobuy, fk_product_type, duration, seuil_stock_alerte, canvas, weight, weight_units, length, length_units, surface, surface_units, volume, volume_units, barcode, fk_barcode_type, finished, accountancy_code_buy, accountancy_code_sell, stock, pmp, datec, tms, import_key, entity, desiredstock, tobatch, fk_unit, fk_price_expression, price_autogen FROM llx_product WHERE rowid = 1
2017-05-05 14:54:43 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'product' ORDER BY pos
2017-05-05 14:54:43 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1705-0005 types=files recursive=0 filter=FA1705\-0005[^\-]+ excludefilter=["(\\.meta|_preview\\.png)$","^\\."]
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT rowid, email, statut, phone_mobile, lastname, poste, firstname FROM llx_socpeople WHERE fk_soc = '3'
2017-05-05 14:54:43 DEBUG   ::1             Facture::liste_contact
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT ec.rowid, ec.statut as statuslink, ec.fk_socpeople as id, ec.fk_c_type_contact, t.fk_soc as socid, t.statut as statuscontact, t.civility as civility, t.lastname as lastname, t.firstname, t.email, tc.source, tc.element, tc.code, tc.libelle FROM llx_c_type_contact tc, llx_element_contact ec LEFT JOIN llx_socpeople t on ec.fk_socpeople = t.rowid WHERE ec.element_id =7 AND ec.fk_c_type_contact=tc.rowid AND tc.element='facture' AND tc.source = 'external' AND tc.active=1 ORDER BY t.lastname ASC
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT label, topic, content, lang FROM llx_c_email_templates WHERE type_template='facture_send' AND entity IN (1) AND (fk_user is NULL or fk_user = 0 or fk_user = 1) AND active = 1 AND (lang = 'es_ES' OR lang IS NULL OR lang = '') ORDER BY lang ASC,label ASC
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT rowid, label, topic, content, lang, position FROM llx_c_email_templates WHERE type_template='facture_send' AND entity IN (1) AND (fk_user is NULL or fk_user = 0 or fk_user = 1) AND active = 1 AND (lang = 'es_ES' OR lang IS NULL OR lang = '') ORDER BY position ASC,lang ASC,label ASC
2017-05-05 14:54:43 DEBUG   ::1             User::fetch
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.rowid = 1
2017-05-05 14:54:43 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:54:43 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:54:43 DEBUG   ::1             DolEditor::DolEditor htmlname=message width= height=280 toolbarname=dolibarr_notes
2017-05-05 14:54:43 DEBUG   ::1             --- End access to /dolibarr/compta/facture.php
2017-05-05 14:54:49 DEBUG   ::1             This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:54:49 DEBUG   ::1             User::fetch
2017-05-05 14:54:49 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:54:49 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:54:49 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:54:49 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:54:49 DEBUG   ::1             User::getrights
2017-05-05 14:54:49 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:54:49 DEBUG   ::1             User::getrights
2017-05-05 14:54:49 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:54:49 DEBUG   ::1             --- Access to /dolibarr/compta/facture.php
2017-05-05 14:54:49 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:54:49 DEBUG   ::1             Menubase::menuLoad mymainmenu=accountancy myleftmenu=customers_bills type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:54:49 DEBUG   ::1             sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:54:49 DEBUG   ::1             Facture::fetch
2017-05-05 14:54:49 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:54:49 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:54:49 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:54:49 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:54:49 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:54:50 DEBUG   ::1             useLocalTax
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax1_type <> '0'
2017-05-05 14:54:50 DEBUG   ::1             useLocalTax
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:54:50 DEBUG   ::1             Facture::fetch
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:54:50 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:54:50 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:54:50 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:54:50 DEBUG   ::1             Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:54:50 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:54:50 DEBUG   ::1             Societe::fetch SELECT s.rowid, s.nom as name, s.name_alias, s.entity, s.ref_ext, s.ref_int, s.address, s.datec as date_creation, s.prefix_comm, s.status, s.price_level, s.tms as date_modification, s.phone, s.fax, s.email, s.skype, s.url, s.zip, s.town, s.note_private, s.note_public, s.model_pdf, s.client, s.fournisseur, s.siren as idprof1, s.siret as idprof2, s.ape as idprof3, s.idprof4, s.idprof5, s.idprof6, s.capital, s.tva_intra, s.fk_typent as typent_id, s.fk_effectif as effectif_id, s.fk_forme_juridique as forme_juridique_code, s.webservices_url, s.webservices_key, s.code_client, s.code_fournisseur, s.code_compta, s.code_compta_fournisseur, s.parent, s.barcode, s.fk_departement, s.fk_pays as country_id, s.fk_stcomm, s.remise_client, s.mode_reglement, s.cond_reglement, s.tva_assuj, s.mode_reglement_supplier, s.cond_reglement_supplier, s.localtax1_assuj, s.localtax1_value, s.localtax2_assuj, s.localtax2_value, s.fk_prospectlevel, s.default_lang, s.logo, s.fk_shipping_method, s.outstanding_limit, s.import_key, s.canvas, s.fk_incoterms, s.location_incoterms, s.fk_multicurrency, s.multicurrency_code, fj.libelle as forme_juridique, e.libelle as effectif, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state, st.libelle as stcomm, te.code as typent_code, i.libelle as libelle_incoterms FROM llx_societe as s LEFT JOIN llx_c_effectif as e ON s.fk_effectif = e.id LEFT JOIN llx_c_country as c ON s.fk_pays = c.rowid LEFT JOIN llx_c_stcomm as st ON s.fk_stcomm = st.id LEFT JOIN llx_c_forme_juridique as fj ON s.fk_forme_juridique = fj.code LEFT JOIN llx_c_departements as d ON s.fk_departement = d.rowid LEFT JOIN llx_c_typent as te ON s.fk_typent = te.id LEFT JOIN llx_c_incoterms as i ON s.fk_incoterms = i.rowid WHERE s.rowid = 3
2017-05-05 14:54:50 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'societe' ORDER BY pos
2017-05-05 14:54:50 DEBUG   ::1             useRevenueStamp
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT COUNT(*) as nb FROM llx_c_revenuestamp as r, llx_c_country as c WHERE r.fk_pays = c.rowid AND c.code = 'ES' AND r.active = 1
2017-05-05 14:54:50 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:54:50 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 2
2017-05-05 14:54:50 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 7 AND f.type = 3
2017-05-05 14:54:50 DEBUG   ::1             DiscountAbsolute::getAvailableDiscounts
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT SUM(rc.amount_ttc) as amount FROM llx_societe_remise_except as rc WHERE (rc.fk_facture IS NULL AND rc.fk_facture_line IS NULL) AND rc.fk_soc = 3 AND (fk_facture_source IS NULL OR (fk_facture_source IS NOT NULL AND description LIKE '(DEPOSIT)%'))
2017-05-05 14:54:50 DEBUG   ::1             DiscountAbsolute::getAvailableDiscounts
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT SUM(rc.amount_ttc) as amount FROM llx_societe_remise_except as rc WHERE (rc.fk_facture IS NULL AND rc.fk_facture_line IS NULL) AND rc.fk_soc = 3 AND (fk_facture_source IS NOT NULL AND description NOT LIKE '(DEPOSIT)%')
2017-05-05 14:54:50 DEBUG   ::1             User::fetch
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.rowid = 1
2017-05-05 14:54:50 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 7 AND type < 2 ORDER BY fk_statut DESC
2017-05-05 14:54:50 DEBUG   ::1             Facture::liste_contact
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT ec.rowid, ec.statut as statuslink, ec.fk_socpeople as id, ec.fk_c_type_contact, '-1' as socid, t.statut as statuscontact, t.civility as civility, t.lastname as lastname, t.firstname, t.email, tc.source, tc.element, tc.code, tc.libelle FROM llx_c_type_contact tc, llx_element_contact ec LEFT JOIN llx_user t on ec.fk_socpeople = t.rowid WHERE ec.element_id =7 AND ec.fk_c_type_contact=tc.rowid AND tc.element='facture' AND tc.source = 'internal' AND tc.active=1 ORDER BY t.lastname ASC
2017-05-05 14:54:50 DEBUG   ::1             Facture::liste_contact
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT ec.rowid, ec.statut as statuslink, ec.fk_socpeople as id, ec.fk_c_type_contact, t.fk_soc as socid, t.statut as statuscontact, t.civility as civility, t.lastname as lastname, t.firstname, t.email, tc.source, tc.element, tc.code, tc.libelle FROM llx_c_type_contact tc, llx_element_contact ec LEFT JOIN llx_socpeople t on ec.fk_socpeople = t.rowid WHERE ec.element_id =7 AND ec.fk_c_type_contact=tc.rowid AND tc.element='facture' AND tc.source = 'external' AND tc.active=1 ORDER BY t.lastname ASC
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT COUNT(pfd.rowid) as nb FROM llx_prelevement_facture_demande as pfd WHERE pfd.fk_facture = 7
2017-05-05 14:54:50 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1705-0005 types=files recursive=0 filter= excludefilter="(\\.meta|_preview\\.png)$"
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT COUNT(rowid) as nb FROM llx_links WHERE objecttype = 'facture' AND objectid = 7 AND entity = 1
2017-05-05 14:54:50 DEBUG   ::1             DiscountAbsolute::fetch
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT sr.rowid, sr.fk_soc, sr.fk_user, sr.amount_ht, sr.amount_tva, sr.amount_ttc, sr.tva_tx, sr.fk_facture_line, sr.fk_facture, sr.fk_facture_source, sr.description, sr.datec, f.facnumber as ref_facture_source FROM llx_societe_remise_except as sr LEFT JOIN llx_facture as f ON sr.fk_facture_source = f.rowid WHERE sr.fk_facture_source=7
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT MAX(te.facnumber) FROM llx_facture as te WHERE te.facnumber < 'FA1705-0005' AND te.entity IN (1)
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT MIN(te.facnumber) FROM llx_facture as te WHERE te.facnumber > 'FA1705-0005' AND te.entity IN (1)
2017-05-05 14:54:50 DEBUG   ::1             get_OutstandingBill
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT rowid, total_ttc FROM llx_facture as f WHERE fk_soc = 3 AND paye = 0 AND fk_statut <> 0 AND fk_statut <> 3 AND fk_statut <> 2
2017-05-05 14:54:50 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 3
2017-05-05 14:54:50 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 2
2017-05-05 14:54:50 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 3 AND f.type = 3
2017-05-05 14:54:50 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 4
2017-05-05 14:54:50 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 4 AND f.type = 2
2017-05-05 14:54:50 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 4 AND f.type = 3
2017-05-05 14:54:50 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 6
2017-05-05 14:54:50 DEBUG   ::1             DiscountAbsolute::getSumCreditNotesUsed
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 2
2017-05-05 14:54:50 DEBUG   ::1             DiscountAbsolute::getSumDepositsUsed
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT sum(rc.amount_ttc) as amount, sum(rc.multicurrency_amount_ttc) as multicurrency_amount FROM llx_societe_remise_except as rc, llx_facture as f WHERE rc.fk_facture_source=f.rowid AND rc.fk_facture = 6 AND f.type = 3
2017-05-05 14:54:50 DEBUG   ::1             Translate::loadCacheCurrencies
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT code_iso, label, unicode FROM llx_c_currencies WHERE active = 1 AND code_iso = 'EUR'
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT rowid FROM llx_facture WHERE fk_facture_source = 7 AND type = 2
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT p.datep as dp, p.ref, p.num_paiement, p.rowid, p.fk_bank, c.code as payment_code, c.libelle as payment_label, pf.amount, ba.rowid as baid, ba.ref as baref, ba.label FROM llx_c_paiement as c, llx_paiement_facture as pf, llx_paiement as p LEFT JOIN llx_bank as b ON p.fk_bank = b.rowid LEFT JOIN llx_bank_account as ba ON b.fk_account = ba.rowid WHERE pf.fk_facture = 7 AND p.fk_paiement = c.id AND pf.fk_paiement = p.rowid ORDER BY p.datep, p.tms
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT fk_facture FROM llx_paiement_facture as pf, llx_facture as f WHERE pf.fk_facture = f.rowid AND fk_paiement = 2
2017-05-05 14:54:50 DEBUG   ::1             Facture::fetch
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT f.rowid,f.facnumber,f.ref_client,f.ref_ext,f.ref_int,f.type,f.fk_soc,f.amount,f.tva, f.localtax1, f.localtax2, f.total, f.total_ttc, f.revenuestamp, f.remise_percent, f.remise_absolue, f.remise, f.datef as df, f.date_pointoftax, f.date_lim_reglement as dlr, f.datec as datec, f.date_valid as datev, f.tms as datem, f.note_private, f.note_public, f.fk_statut, f.paye, f.close_code, f.close_note, f.fk_user_author, f.fk_user_valid, f.model_pdf, f.fk_facture_source, f.fk_mode_reglement, f.fk_cond_reglement, f.fk_projet, f.extraparams, f.situation_cycle_ref, f.situation_counter, f.situation_final, f.fk_account, f.fk_multicurrency, f.multicurrency_code, f.multicurrency_tx, f.multicurrency_total_ht, f.multicurrency_total_tva, f.multicurrency_total_ttc, p.code as mode_reglement_code, p.libelle as mode_reglement_libelle, c.code as cond_reglement_code, c.libelle as cond_reglement_libelle, c.libelle_facture as cond_reglement_libelle_doc, f.fk_incoterms, f.location_incoterms, i.libelle as libelle_incoterms FROM llx_facture as f LEFT JOIN llx_c_payment_term as c ON f.fk_cond_reglement = c.rowid LEFT JOIN llx_c_paiement as p ON f.fk_mode_reglement = p.id LEFT JOIN llx_c_incoterms as i ON f.fk_incoterms = i.rowid WHERE f.entity = 1 AND f.rowid=7
2017-05-05 14:54:50 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:54:50 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT re.rowid, re.amount_ht, re.amount_tva, re.amount_ttc, re.description, re.fk_facture_source FROM llx_societe_remise_except as re WHERE fk_facture = 7
2017-05-05 14:54:50 DEBUG   ::1             Form::load_cache_conditions_paiements
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT rowid, code, libelle as label FROM llx_c_payment_term WHERE active > 0 ORDER BY sortorder
2017-05-05 14:54:50 DEBUG   ::1             Form::load_cache_types_paiements
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT id, code, libelle as label, type, active FROM llx_c_paiement
2017-05-05 14:54:50 DEBUG   ::1             Translate::getLabelFromKey
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT libelle as label FROM llx_c_paiement WHERE code = 'LCR'
2017-05-05 14:54:50 DEBUG   ::1             Account::fetch
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT ba.rowid, ba.ref, ba.label, ba.bank, ba.number, ba.courant, ba.clos, ba.rappro, ba.url, ba.code_banque, ba.code_guichet, ba.cle_rib, ba.bic, ba.iban_prefix as iban, ba.domiciliation, ba.proprio, ba.owner_address, ba.state_id, ba.fk_pays as country_id, ba.account_number, ba.accountancy_journal, ba.currency_code, ba.min_allowed, ba.min_desired, ba.comment, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_bank_account as ba LEFT JOIN llx_c_country as c ON ba.fk_pays = c.rowid LEFT JOIN llx_c_departements as d ON ba.state_id = d.rowid WHERE entity IN (1) AND ba.rowid  = 1
2017-05-05 14:54:50 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'bank_account' ORDER BY pos
2017-05-05 14:54:50 DEBUG   ::1             useLocalTax
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:54:50 DEBUG   ::1             Facture::fetch_lines
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT l.rowid, l.fk_product, l.fk_parent_line, l.label as custom_label, l.description, l.product_type, l.price, l.qty, l.tva_tx,  l.situation_percent, l.fk_prev_id, l.localtax1_tx, l.localtax2_tx, l.localtax1_type, l.localtax2_type, l.remise_percent, l.fk_remise_except, l.subprice, l.rang, l.special_code, l.date_start as date_start, l.date_end as date_end, l.info_bits, l.total_ht, l.total_tva, l.total_localtax1, l.total_localtax2, l.total_ttc, l.fk_code_ventilation, l.fk_product_fournisseur_price as fk_fournprice, l.buy_price_ht as pa_ht, l.fk_unit, l.fk_multicurrency, l.multicurrency_code, l.multicurrency_subprice, l.multicurrency_total_ht, l.multicurrency_total_tva, l.multicurrency_total_ttc, p.ref as product_ref, p.fk_product_type as fk_product_type, p.label as product_label, p.description as product_desc FROM llx_facturedet as l LEFT JOIN llx_product as p ON l.fk_product = p.rowid WHERE l.fk_facture = 7 ORDER BY l.rang, l.rowid
2017-05-05 14:54:50 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facturedet' ORDER BY pos
2017-05-05 14:54:50 DEBUG   ::1             Product::fetch id=1 ref= ref_ext=
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT rowid, ref, ref_ext, label, description, url, note, customcode, fk_country, price, price_ttc, price_min, price_min_ttc, price_base_type, cost_price, default_vat_code, tva_tx, recuperableonly as tva_npr, localtax1_tx, localtax2_tx, localtax1_type, localtax2_type, tosell, tobuy, fk_product_type, duration, seuil_stock_alerte, canvas, weight, weight_units, length, length_units, surface, surface_units, volume, volume_units, barcode, fk_barcode_type, finished, accountancy_code_buy, accountancy_code_sell, stock, pmp, datec, tms, import_key, entity, desiredstock, tobatch, fk_unit, fk_price_expression, price_autogen FROM llx_product WHERE rowid = 1
2017-05-05 14:54:50 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'product' ORDER BY pos
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT MAX(CAST(SUBSTRING(facnumber FROM 8) AS SIGNED)) as max FROM llx_facture WHERE facnumber LIKE 'FA____-%' AND entity IN (1)
2017-05-05 14:54:50 DEBUG   ::1             mod_facture_terre::getNextValue
2017-05-05 14:54:50 DEBUG   ::1             mod_facture_terre::getNextValue
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT facnumber as ref FROM llx_facture WHERE facnumber LIKE 'FA____-0005' AND entity IN (1)
2017-05-05 14:54:50 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:54:50 DEBUG   ::1             /core/lib/function2.lib.php::getListOfModels
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT nom as id, nom as lib, libelle as label, description as description FROM llx_document_model WHERE type = 'invoice' AND entity IN (0,1) ORDER BY description DESC
2017-05-05 14:54:50 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1705-0005 types=files recursive=0 filter= excludefilter="(\\.meta|_preview\\.png)$"
2017-05-05 14:54:50 DEBUG   ::1             Facture::fetchObjectLink
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT rowid, fk_source, sourcetype, fk_target, targettype FROM llx_element_element WHERE (fk_source = '7' AND sourcetype = 'facture') OR (fk_target = '7' AND targettype = 'facture') ORDER BY sourcetype
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT s.rowid as socid, s.nom as name, s.client, c.rowid, c.ref, c.ref_client, c.total_ht FROM llx_societe as s, llx_commande as c WHERE c.fk_soc = s.rowid AND c.fk_soc = 3
2017-05-05 14:54:50 DEBUG   ::1             ActionComm::getActions
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT a.id FROM llx_actioncomm as a WHERE a.entity IN (1) AND a.fk_element = 7 AND a.elementtype = 'invoice'
2017-05-05 14:54:50 DEBUG   ::1             ActionComm::fetch
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT a.id, a.id as ref, a.ref_ext, a.datep, a.datep2, a.durationp, a.datec, a.tms as datem, a.code, a.label, a.note, a.fk_soc, a.fk_project, a.fk_user_author, a.fk_user_mod, a.fk_user_action, a.fk_user_done, a.fk_contact, a.percent as percentage, a.fk_element, a.elementtype, a.priority, a.fulldayevent, a.location, a.punctual, a.transparency, c.id as type_id, c.code as type_code, c.libelle, s.nom as socname, u.firstname, u.lastname as lastname FROM llx_actioncomm as a  LEFT JOIN llx_c_actioncomm as c ON a.fk_action=c.id  LEFT JOIN llx_user as u on u.rowid = a.fk_user_author LEFT JOIN llx_societe as s on s.rowid = a.fk_soc WHERE  a.id=15
2017-05-05 14:54:50 DEBUG   ::1             ActionComm::fetch
2017-05-05 14:54:50 DEBUG   ::1             sql=SELECT a.id, a.id as ref, a.ref_ext, a.datep, a.datep2, a.durationp, a.datec, a.tms as datem, a.code, a.label, a.note, a.fk_soc, a.fk_project, a.fk_user_author, a.fk_user_mod, a.fk_user_action, a.fk_user_done, a.fk_contact, a.percent as percentage, a.fk_element, a.elementtype, a.priority, a.fulldayevent, a.location, a.punctual, a.transparency, c.id as type_id, c.code as type_code, c.libelle, s.nom as socname, u.firstname, u.lastname as lastname FROM llx_actioncomm as a  LEFT JOIN llx_c_actioncomm as c ON a.fk_action=c.id  LEFT JOIN llx_user as u on u.rowid = a.fk_user_author LEFT JOIN llx_societe as s on s.rowid = a.fk_soc WHERE  a.id=16
2017-05-05 14:54:50 DEBUG   ::1             --- End access to /dolibarr/compta/facture.php
2017-05-05 14:54:53 DEBUG   ::1             This is an already logged session. _SESSION['dol_login']=apperture
2017-05-05 14:54:53 DEBUG   ::1             User::fetch
2017-05-05 14:54:53 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.employee, u.gender, u.email, u.job, u.skype, u.signature, u.office_phone, u.office_fax, u.user_mobile, u.address, u.zip, u.town, u.fk_state as state_id, u.fk_country as country_id, u.admin, u.login, u.note, u.pass, u.pass_crypted, u.pass_temp, u.api_key, u.fk_soc, u.fk_socpeople, u.fk_member, u.fk_user, u.ldap_sid, u.statut, u.lang, u.entity, u.datec as datec, u.tms as datem, u.datelastlogin as datel, u.datepreviouslogin as datep, u.photo as photo, u.openid as openid, u.accountancy_code, u.thm, u.tjm, u.salary, u.salaryextra, u.weeklyhours, u.color, u.ref_int, u.ref_ext, c.code as country_code, c.label as country, d.code_departement as state_code, d.nom as state FROM llx_user as u LEFT JOIN llx_c_country as c ON u.fk_country = c.rowid LEFT JOIN llx_c_departements as d ON u.fk_state = d.rowid WHERE u.entity IS NOT NULL AND u.login = 'apperture'
2017-05-05 14:54:53 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:54:53 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'user' ORDER BY pos
2017-05-05 14:54:53 DEBUG   ::1             sql=SELECT param, value FROM llx_user_param WHERE fk_user = 1 AND entity = 1
2017-05-05 14:54:53 DEBUG   ::1             User::getrights
2017-05-05 14:54:53 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_user_rights as ur, llx_rights_def as r WHERE r.id = ur.fk_id AND r.entity IN (0,1) AND ur.fk_user= 1 AND r.perms IS NOT NULL
2017-05-05 14:54:54 DEBUG   ::1             User::getrights
2017-05-05 14:54:54 DEBUG   ::1             sql=SELECT r.module, r.perms, r.subperms FROM llx_usergroup_rights as gr, llx_usergroup_user as gu, llx_rights_def as r WHERE r.id = gr.fk_id AND r.entity = 1 AND gr.fk_usergroup = gu.fk_usergroup AND gu.fk_user = 1 AND r.perms IS NOT NULL
2017-05-05 14:54:54 DEBUG   ::1             --- Access to /dolibarr/compta/facture/list.php
2017-05-05 14:54:54 DEBUG   ::1             sql=SELECT transkey, transvalue FROM llx_overwrite_trans where lang='es_ES'
2017-05-05 14:54:54 DEBUG   ::1             Menubase::menuLoad mymainmenu=accountancy myleftmenu=customers_bills type_user=0 menu_handler=eldy tabMenu size=0
2017-05-05 14:54:54 DEBUG   ::1             sql=SELECT m.rowid, m.type, m.module, m.fk_menu, m.fk_mainmenu, m.fk_leftmenu, m.url, m.titre, m.langs, m.perms, m.enabled, m.target, m.mainmenu, m.leftmenu, m.position FROM llx_menu as m WHERE m.entity IN (0,1) AND m.menu_handler IN ('eldy','all') AND m.usertype IN (0,2) ORDER BY m.position, m.rowid
2017-05-05 14:54:54 DEBUG   ::1             ExtraFields::fetch_name_optionals_label
2017-05-05 14:54:54 DEBUG   ::1             sql=SELECT rowid,name,label,type,size,elementtype,fieldunique,fieldrequired,param,pos,alwayseditable,perms,list,ishidden FROM llx_extrafields WHERE entity IN (0,1) AND elementtype = 'facture' ORDER BY pos
2017-05-05 14:54:54 DEBUG   ::1             sql=SELECT rowid, title, url, target FROM llx_bookmark WHERE (fk_user = 1 OR fk_user is NULL OR fk_user = 0) AND entity = 1 ORDER BY position
2017-05-05 14:54:54 DEBUG   ::1             useLocalTax
2017-05-05 14:54:54 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax1_type <> '0'
2017-05-05 14:54:54 DEBUG   ::1             useLocalTax
2017-05-05 14:54:54 DEBUG   ::1             sql=SELECT t.localtax1, t.localtax2 FROM llx_c_tva as t, llx_c_country as c WHERE t.fk_pays = c.rowid AND c.code = 'ES' AND t.active = 1 AND t.localtax2_type <> '0'
2017-05-05 14:54:54 DEBUG   ::1             sql=SELECT f.rowid as facid, f.facnumber, f.ref_client, f.type, f.note_private, f.note_public, f.increment, f.fk_mode_reglement, f.total as total_ht, f.tva as total_vat, f.total_ttc, f.datef as df, f.date_lim_reglement as datelimite, f.paye as paye, f.fk_statut, f.datec as date_creation, f.tms as date_update, s.rowid as socid, s.nom as name, s.town, s.zip, s.fk_pays, s.client, s.code_client,  typent.code as typent_code, state.code_departement as state_code, state.nom as state_name, SUM(pf.amount) as am FROM llx_societe as s LEFT JOIN llx_c_country as country on (country.rowid = s.fk_pays) LEFT JOIN llx_c_typent as typent on (typent.id = s.fk_typent) LEFT JOIN llx_c_departements as state on (state.rowid = s.fk_departement), llx_facture as f LEFT JOIN llx_paiement_facture as pf ON pf.fk_facture = f.rowid WHERE f.fk_soc = s.rowid AND f.entity = 1 GROUP BY f.rowid, f.facnumber, ref_client, f.type, f.note_private, f.note_public, f.increment, fk_mode_reglement, f.total, f.tva, f.total_ttc, f.datef, f.date_lim_reglement, f.paye, f.fk_statut, f.datec, f.tms, s.rowid, s.nom, s.town, s.zip, s.fk_pays, s.code_client, s.client, typent.code ,state.code_departement, state.nom ORDER BY f.datef DESC, f.rowid DESC
2017-05-05 14:54:54 DEBUG   ::1             sql=SELECT f.rowid as facid, f.facnumber, f.ref_client, f.type, f.note_private, f.note_public, f.increment, f.fk_mode_reglement, f.total as total_ht, f.tva as total_vat, f.total_ttc, f.datef as df, f.date_lim_reglement as datelimite, f.paye as paye, f.fk_statut, f.datec as date_creation, f.tms as date_update, s.rowid as socid, s.nom as name, s.town, s.zip, s.fk_pays, s.client, s.code_client,  typent.code as typent_code, state.code_departement as state_code, state.nom as state_name, SUM(pf.amount) as am FROM llx_societe as s LEFT JOIN llx_c_country as country on (country.rowid = s.fk_pays) LEFT JOIN llx_c_typent as typent on (typent.id = s.fk_typent) LEFT JOIN llx_c_departements as state on (state.rowid = s.fk_departement), llx_facture as f LEFT JOIN llx_paiement_facture as pf ON pf.fk_facture = f.rowid WHERE f.fk_soc = s.rowid AND f.entity = 1 GROUP BY f.rowid, f.facnumber, ref_client, f.type, f.note_private, f.note_public, f.increment, fk_mode_reglement, f.total, f.tva, f.total_ttc, f.datef, f.date_lim_reglement, f.paye, f.fk_statut, f.datec, f.tms, s.rowid, s.nom, s.town, s.zip, s.fk_pays, s.code_client, s.client, typent.code ,state.code_departement, state.nom ORDER BY f.datef DESC, f.rowid DESC  LIMIT 26
2017-05-05 14:54:54 DEBUG   ::1             sql=SELECT u.rowid, u.lastname, u.firstname, u.statut, u.login FROM llx_user as u WHERE u.entity IN (0,1) ORDER BY lastname ASC
2017-05-05 14:54:54 DEBUG   ::1             Form::select_dolusers
2017-05-05 14:54:54 DEBUG   ::1             sql=SELECT DISTINCT u.rowid, u.lastname as lastname, u.firstname, u.statut, u.login, u.admin, u.entity FROM llx_user as u WHERE u.entity IN (0,1) ORDER BY u.lastname ASC
2017-05-05 14:54:54 WARNING ::1             Form::select_all_categories: using numeric value for parameter type is deprecated. Use string code instead.
2017-05-05 14:54:54 WARNING ::1             Categorie::get_full_arbo(): numeric types are deprecated, please use string instead
2017-05-05 14:54:54 DEBUG   ::1             Categorie::load_motherof
2017-05-05 14:54:54 DEBUG   ::1             sql=SELECT fk_parent as id_parent, rowid as id_son FROM llx_categorie WHERE fk_parent != 0 AND entity IN (1)
2017-05-05 14:54:54 DEBUG   ::1             Categorie::get_full_arbo get category list
2017-05-05 14:54:54 DEBUG   ::1             sql=SELECT DISTINCT c.rowid, c.label, c.description, c.color, c.fk_parent FROM llx_categorie as c WHERE c.entity IN (1) AND c.type = 0
2017-05-05 14:54:54 DEBUG   ::1             Categorie::get_full_arbo call to build_path_from_id_categ
2017-05-05 14:54:54 DEBUG   ::1             Categorie::get_full_arbo dol_sort_array
2017-05-05 14:54:54 DEBUG   ::1             Form::select_types_paiements , search_paymentmode, , 0
2017-05-05 14:54:54 DEBUG   ::1             Form::load_cache_types_paiements
2017-05-05 14:54:54 DEBUG   ::1             sql=SELECT id, code, libelle as label, type, active FROM llx_c_paiement
2017-05-05 14:54:54 DEBUG   ::1             Translate::getLabelFromKey
2017-05-05 14:54:54 DEBUG   ::1             sql=SELECT libelle as label FROM llx_c_paiement WHERE code = 'LCR'
2017-05-05 14:54:54 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:54:54 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 7
2017-05-05 14:54:54 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1705-0005 types=files recursive=0 filter=FA1705\-0005[^\-]+ excludefilter="\\.meta$|\\.png$"
2017-05-05 14:54:54 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:54:54 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 6
2017-05-05 14:54:54 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1704-0004 types=files recursive=0 filter=FA1704\-0004[^\-]+ excludefilter="\\.meta$|\\.png$"
2017-05-05 14:54:54 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:54:54 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 5
2017-05-05 14:54:54 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1704-0003 types=files recursive=0 filter=FA1704\-0003[^\-]+ excludefilter="\\.meta$|\\.png$"
2017-05-05 14:54:54 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:54:54 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 4
2017-05-05 14:54:54 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/AV1704-0001 types=files recursive=0 filter=AV1704\-0001[^\-]+ excludefilter="\\.meta$|\\.png$"
2017-05-05 14:54:54 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:54:54 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 3
2017-05-05 14:54:54 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1704-0001 types=files recursive=0 filter=FA1704\-0001[^\-]+ excludefilter="\\.meta$|\\.png$"
2017-05-05 14:54:54 DEBUG   ::1             Facture::getSommePaiement
2017-05-05 14:54:54 DEBUG   ::1             sql=SELECT sum(amount) as amount, sum(multicurrency_amount) as multicurrency_amount FROM llx_paiement_facture WHERE fk_facture = 2
2017-05-05 14:54:54 DEBUG   ::1             files.lib.php::dol_dir_list path=c:/dolibarr/dolibarr_documents/facture/FA1704-0002 types=files recursive=0 filter=FA1704\-0002[^\-]+ excludefilter="\\.meta$|\\.png$"
2017-05-05 14:54:54 DEBUG   ::1             --- End access to /dolibarr/compta/facture/list.php
